(()=>{"use strict";var e,t,n,i={429697:(e,t,n)=>{n.d(t,{default:()=>v});var i=n(654337),o=n(773949),r=n(486186),a=(n(45697),n(292859)),s=n(316787),u=n(667294),l=n(696630),c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},d=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){t.removeClasses(e,"exit"),t.addClass(e,n?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var i=n?"appear":"enter";t.addClass(e,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var i=n?"appear":"enter";t.removeClasses(e,i),t.addClass(e,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),t.addClass(e,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){t.addClass(e,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){t.removeClasses(e,"exit"),t.addClass(e,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,i="string"==typeof n,o=i?""+(i&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:i?o+"-active":n[e+"Active"],doneClassName:i?o+"-done":n[e+"Done"]}},t}(0,r.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var i=this.getClassNames(t)[n+"ClassName"];"appear"===t&&"done"===n&&(i+=" "+this.getClassNames("enter").doneClassName),"active"===n&&e&&e.scrollTop,this.appliedClasses[t][n]=i,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))}(e,i)},n.removeClasses=function(e,t){var n=this.appliedClasses[t],i=n.base,o=n.active,r=n.done;this.appliedClasses[t]={},i&&c(e,i),o&&c(e,o),r&&c(e,r)},n.render=function(){var e=this.props,t=(e.classNames,(0,o.default)(e,["classNames"]));return u.createElement(l.default,(0,i.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(u.Component);d.defaultProps={classNames:""},d.propTypes={};const v=d},696630:(e,t,n)=>{n.d(t,{default:()=>g});var i=n(773949),o=n(486186),r=(n(45697),n(667294)),a=n(973935),s=n(806035),u=n(500220),l="unmounted",c="exited",d="entering",v="entered",f="exiting",p=function(e){function t(t,n){var i;i=e.call(this,t,n)||this;var o,r=n&&!n.isMounting?t.enter:t.appear;return i.appearStatus=null,t.in?r?(o=c,i.appearStatus=d):o=v:o=t.unmountOnExit||t.mountOnEnter?l:c,i.state={status:o},i.nextCallback=null,i}(0,o.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:c}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==d&&n!==v&&(t=d):n!==d&&n!==v||(t=f)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,i=this.props.timeout;return e=t=n=i,null!=i&&"number"!=typeof i&&(e=i.exit,t=i.enter,n=void 0!==i.appear?i.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=a.findDOMNode(this);t===d?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:l})},n.performEnter=function(e,t){var n=this,i=this.props.enter,o=this.context?this.context.isMounting:t,r=this.getTimeouts(),a=o?r.appear:r.enter;!t&&!i||s.default.disabled?this.safeSetState({status:v},(function(){n.props.onEntered(e)})):(this.props.onEnter(e,o),this.safeSetState({status:d},(function(){n.props.onEntering(e,o),n.onTransitionEnd(e,a,(function(){n.safeSetState({status:v},(function(){n.props.onEntered(e,o)}))}))})))},n.performExit=function(e){var t=this,n=this.props.exit,i=this.getTimeouts();n&&!s.default.disabled?(this.props.onExit(e),this.safeSetState({status:f},(function(){t.props.onExiting(e),t.onTransitionEnd(e,i.exit,(function(){t.safeSetState({status:c},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:c},(function(){t.props.onExited(e)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var i=null==t&&!this.props.addEndListener;e&&!i?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,o=(0,i.default)(t,["children"]);if(delete o.in,delete o.mountOnEnter,delete o.unmountOnExit,delete o.appear,delete o.enter,delete o.exit,delete o.timeout,delete o.addEndListener,delete o.onEnter,delete o.onEntering,delete o.onEntered,delete o.onExit,delete o.onExiting,delete o.onExited,"function"==typeof n)return r.createElement(u.default.Provider,{value:null},n(e,o));var a=r.Children.only(n);return r.createElement(u.default.Provider,{value:null},r.cloneElement(a,o))},t}(r.Component);function m(){}p.contextType=u.default,p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4;const g=p},500220:(e,t,n)=>{n.d(t,{default:()=>i});const i=n(667294).createContext(null)},806035:(e,t,n)=>{n.d(t,{default:()=>i});const i={disabled:!1}},654337:(e,t,n)=>{function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}n.d(t,{default:()=>i})},486186:(e,t,n)=>{function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{default:()=>i})},773949:(e,t,n)=>{function i(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,{default:()=>i})},292859:(e,t,n)=>{n.d(t,{default:()=>o});var i=n(305261);function o(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},305261:(e,t,n)=>{function i(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>i})},316787:(e,t,n)=>{function i(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function o(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=i(e.className,t):e.setAttribute("class",i(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>o})},70162:(e,t,n)=>{n.d(t,{langNumeric:()=>o,langSex:()=>r,langStr:()=>a,langReplace:()=>s,langTag:()=>u});var i=n(40906);function o(e,t,n){var o,r=window.langConfig;if(!t||!r){if(!(0,i.isNumeric)(e)){var a=new Error("Non-numeric value passed to langNumeric");throw console.log(e,a),a}return String(e)}Array.isArray(t)?(o=t[1],e!=Math.floor(e)?o=t[r.numRules.float]:(r.numRules.int||[]).some((function(n){if("*"===n[0])return o=t[n[2]],!0;var i=n[0]?e%n[0]:e;return Array.isArray(n[1])&&n[1].includes(i)?(o=t[n[2]],!0):void 0}))):o=t;var s=String(e);if(n){for(var u=s.split("."),l=[],c=u[0].length-3;c>-3;c-=3)l.unshift(u[0].slice(c>0?c:0,c+3));u[0]=l.join(r.numDel),s=u.join(r.numDec)}return o=(o||"%s").replace("%s",s)}function r(e,t){if(!Array.isArray(t))return t;var n=t[1],i=window.langConfig;return i?(i.sexRules&&i.sexRules.some((function(i){return"*"===i[0]||Number(e)===Number(i[0])&&t[i[1]]?(n=t[i[1]],!0):void 0})),n):n}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=String(e),o=0;o<t.length;o+=2){var r=t[o];if(null!=r){var a=String(t[o]).startsWith("%")?t[o]:"{"+t[o]+"}";i=i.replace(a,t[o+1])}}return i}function s(e,t){for(var n in t)if(t.hasOwnProperty(n)){var i="{"+n+"}";e=e.replace(i,t[n])}return e}function u(e,t,n,i){return void 0===i&&(i="tag"),n=(n=n.replace("{"+i+"}",e)).replace("{/"+i+"}",t)}},690847:(e,t,n)=>{n.d(t,{makePendingRequestState:()=>i});var i=function(e){void 0===e&&(e={});var t=Object.create(null);return{cancel:function(e){var n=t[e];null==n||n.abort(),delete t[e]},register:function(n,i){var o,r=t[n],a=function(e){var n;return void 0!==(null===(n=t[e])||void 0===n?void 0:n.throttleTimerId)}(n);if(r){if(a)return!1;console.warn("Reactions pending request for key '"+n+"' wasn't unregistered, but has to be overwritten.\nPending request should be cancelled through .cancel() explicitly before .register()"),r.abort()}t[n]={abort:i},void 0!==(null==e?void 0:e.throttleMs)&&(o=function(e,n){var i=t[e];if(i){i.throttleTimerId&&window.clearTimeout(i.throttleTimerId);var o=window.setTimeout((function(){var n=t[e];n&&(n.throttleTimerId=void 0)}),n);return i.throttleTimerId=o,o}}(n,e.throttleMs));return function(){var e;(null===(e=t[n])||void 0===e?void 0:e.abort)===i&&delete t[n],window.clearTimeout(o)}}}}},52104:(e,t,n)=>{var i=n(434389);window.Reactions=i.ReactionsEntryGlobal,(0,i.init)();try{window.stManager.done(window.jsc("web/reactions.js"))}catch(e){}},569129:(e,t,n)=>{n.d(t,{useOnClickOutside:()=>o});var i=n(667294),o=function(e,t){(0,i.useEffect)((function(){var n=function(n){!e.current||n.target instanceof Node&&e.current.contains(n.target)||t(n)};return document.addEventListener("mousedown",n,{passive:!0}),document.addEventListener("touchstart",n,{passive:!0}),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}},465864:(e,t,n)=>{n.d(t,{parseLikeObjectId:()=>o,likePostObjectId:()=>r,likeReplyObjectId:()=>a,getElementLikeButtonCount:()=>s,getElementLikeButtonIcon:()=>u,getElementLikeButtonLabel:()=>l});var i=n(570655);function o(e){var t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;var n=(0,i.__read)(t,3);return{objectType:n[1],objectId:n[2]}}var r=function(e){return"wall"+e},a=function(e){return"wall_reply"+e},s=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_count, ._like_button_count"))&&void 0!==t?t:void 0},u=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_icon, ._like_button_icon"))&&void 0!==t?t:void 0},l=function(e){var t;return null!==(t=e.querySelector(".like_button_label, ._like_button_label"))&&void 0!==t?t:void 0}},453991:(e,t,n)=>{n.d(t,{ReactionImage:()=>u});var i=n(570655),o=n(785893),r=n(667294),a=n(546876),s=n(659397),u=(0,r.forwardRef)((function(e,t){var n=e.animationURL,u=e.isPlaying,l=e.image,c=e.loadAnimationParams,d=(0,r.useRef)(null),v=(0,a.useReactionAnimation)({animationElem:d,animationURL:n,play:u,loadAnimationParams:c}).isAnimationReady&&u;return(0,o.jsx)("div",(0,i.__assign)({className:"ReactionImage",style:{backgroundImage:!v&&l?"url("+l+")":void 0},ref:t},{children:(0,o.jsx)("div",{className:(0,s.classNames)("ReactionImage__animationContainer",{"ReactionImage__animationContainer--hidden":!v}),ref:d},void 0)}),void 0)}))},640248:(e,t,n)=>{n.d(t,{PreloadImages:()=>r});var i=n(740672),o=n(667294),r=(0,o.memo)((function(e){var t=e.imageURLs;return(0,o.useEffect)((function(){Promise.all(t.map((function(e){return(0,i.preloadImage)(e)}))).catch((function(){}))}),[t]),null}))},442513:(e,t,n)=>{n.d(t,{userPhotoStub:()=>s,ReactedUsersStack:()=>u,stackConfigForVisibleCount:()=>l});var i=n(570655),o=n(785893),r=n(659397),a=n(695724),s={kind:"stub"};function u(e){var t=e.photos,n=e.size,s=e.totalCount,u=e.visibleCount,l=null!=s?s:t.length,c=Math.min(t.length,u);l===c+1&&t.length>=c+1&&(c+=1);var d=Math.max(0,l-c),v=d>0,f=t.slice(0,c),p=(0,a.formatCount)(d);return(0,o.jsx)("div",(0,i.__assign)({className:(0,r.classNames)("ReactedUsersStack","ReactedUsersStack--size-"+n,{"ReactedUsersStack--others":v})},{children:(0,o.jsxs)("div",(0,i.__assign)({className:"ReactedUsersStack__photos",role:"presentation"},{children:[f.map((function(e,t){return function(e){return"profile"===e.kind}(e)?(0,o.jsx)("div",{className:"ReactedUsersStack__photo",role:"img",style:{backgroundImage:"url("+e.imageURL+")"},title:e.title},t):function(e){return"stub"===e.kind}(e)?(0,o.jsx)("div",{role:"img",className:"ReactedUsersStack__photo ReactedUsersStack__photo--stub"},t):null})),v&&(0,o.jsx)("div",{className:"ReactedUsersStack__photo ReactedUsersStack__photo--others","aria-hidden":"true",dangerouslySetInnerHTML:{__html:"+"+p}},void 0)]}),void 0)}),void 0)}function l(e){var t=e+1;return{maxStackItems:t,visibleCount:e,stubItemsForPhotos:function(e){return Math.min(e,t)}}}},471242:(e,t,n)=>{n.d(t,{Reaction:()=>c});var i=n(570655),o=n(785893),r=n(49535),a=n(659397),s=n(285262),u=n(882824),l=n(453991),c=function(e){var t=e.animationURL,n=e.image,c=e.isOpenedDefault,d=e.onMouseEnter,v=e.onReactionClick,f=e.reactionId,p=e.reactionTitle,m=(0,u.useReactedUsersConfig)(f),g=function(){null==v||v(f)};return(0,o.jsxs)("div",(0,i.__assign)({className:(0,a.classNames)("Reaction",{"Reaction--openedDefault":c&&m.shouldShowReactedUsers}),onClick:function(e){g(),e.stopPropagation()},onKeyDown:function(e){[r.KEY.RETURN,r.KEY.SPACE].includes(e.keyCode)&&(g(),e.stopPropagation())},onMouseEnter:d,tabIndex:0,role:"button","aria-label":p||void 0},{children:[(0,o.jsx)("div",{className:"Reaction__hoverArea"},void 0),(0,o.jsx)("div",(0,i.__assign)({className:"Reaction__title"},{children:(0,o.jsx)(s.ReactionTitle,{reactedUsersConfigResult:m,reactionId:f,title:p},void 0)}),void 0),(0,o.jsx)("div",(0,i.__assign)({className:"Reaction__image"},{children:(0,o.jsx)(l.ReactionImage,{isPlaying:!0,image:n,animationURL:t},void 0)}),void 0)]}),void 0)}},285262:(e,t,n)=>{n.d(t,{ReactionTitle:()=>u});var i=n(570655),o=n(785893),r=n(667294),a=n(659397),s=n(859036),u=function(e){var t=e.reactedUsersConfigResult,n=e.reactionId,u=e.title,l=(0,r.useRef)(null),c=t.reactedUsersConfig,d=t.shouldShowReactedUsers;return(0,o.jsxs)("div",(0,i.__assign)({className:(0,a.classNames)("ReactionTitle",{"ReactionTitle--withUsers":d}),ref:l},{children:[(0,o.jsx)("div",(0,i.__assign)({className:"ReactionTitle__name"},{children:u}),void 0),(0,o.jsx)("div",(0,i.__assign)({className:(0,a.classNames)({"ReactionTitle__reactedUsers--visible":d})},{children:(0,o.jsx)(s.ReactionsMenuReactedUsersPreview,{parentClickContainerRef:l,reactedUsersConfig:c,reactionId:n},void 0)}),void 0)]}),void 0)}},339222:(e,t,n)=>{n.d(t,{ReactionsMenu:()=>d});var i=n(570655),o=n(785893),r=n(667294),a=n(659397),s=n(49535),u=n(471242),l=n(840075),c=n(803609),d=(0,r.forwardRef)((function(e,t){var n=e.close,d=e.currentReactionId,v=e.onReactionChoose,f=e.position,p=void 0===f?l.PopperVerticalPosition.TOP:f,m=e.reactionsOptions,g=e.onMouseEnter,_=e.onMouseLeave,h=(0,c.useReactionMenuConfig)(),R=p===l.PopperVerticalPosition.TOP?null==h?void 0:h.openedDefaultReactionId:void 0,E=(0,i.__read)((0,r.useState)(R),2),C=E[0],b=E[1],y=(0,r.useCallback)((function(e){e.keyCode===s.KEY.ESC&&(null==n||n())}),[]),w=(0,r.useCallback)((function(){b(void 0)}),[]);return(0,o.jsx)("div",(0,i.__assign)({className:(0,a.classNames)("ReactionsMenu ReactionsMenu--extraHoverArea",{"ReactionsMenu--extraHoverAreaToTop":p===l.PopperVerticalPosition.TOP,"ReactionsMenu--extraHoverAreaToBottom":p===l.PopperVerticalPosition.BOTTOM}),onKeyDown:y,onMouseEnter:g,onMouseLeave:_,ref:t},{children:(0,o.jsx)("div",(0,i.__assign)({className:"ReactionsMenu__inner"},{children:m.items.map((function(e){return(0,o.jsx)(u.Reaction,{animationURL:e.animationURL,image:e.imageMenuURL,isOpenedDefault:e.id===C,isSelected:e.id===d,onMouseEnter:w,onReactionClick:v,reactionId:e.id,reactionTitle:e.title},e.id)}))}),void 0)}),void 0)}))},337386:(e,t,n)=>{n.d(t,{useReactionsMenuContext:()=>u,ReactionsMenuContextProvider:()=>l});var i=n(570655),o=n(785893),r=n(667294),a=n(239545),s=(0,r.createContext)({currentReactionId:void 0,likeObjectId:void 0,reactedUsers:a.REMOTE_RESOURCE_STATE_CONTEXT_STUB,reactedUsersCounts:void 0,titleVariant:void 0,triggerClose:function(){}}),u=function(){return(0,r.useContext)(s)},l=function(e){var t=e.value,n=e.children,r=(0,a.useRemoteResource)();return(0,o.jsx)(s.Provider,(0,i.__assign)({value:(0,i.__assign)((0,i.__assign)({},t),{reactedUsers:r})},{children:n}),void 0)}},859036:(e,t,n)=>{n.d(t,{ReactionsMenuReactedUsersPreview:()=>d});var i=n(570655),o=n(785893),r=n(667294),a=n(30389),s=n(442513),u=n(337386),l=n(661270),c=n(882824);function d(e){var t=e.parentClickContainerRef,n=e.reactionId,d=e.reactedUsersConfig,v=(0,u.useReactionsMenuContext)(),f=v.likeObjectId,p=v.triggerClose,m=(0,r.useCallback)((function(e){if(e.stopPropagation(),!f)throw new Error("ReactionTitle: unable to open reacted modal, missing object id");(null==d?void 0:d.hasSomeReactions)&&(p(),(0,a.showReactedModal)(n,f))}),[]);return(0,l.useEventListenerOnRef)(t,"click",m),(0,o.jsx)("div",(0,i.__assign)({className:"ReactionsMenuReactedUsersPreview"},{children:d&&d.userPhotos?(0,o.jsx)(s.ReactedUsersStack,{visibleCount:c.visibleCount,totalCount:d.totalPhotosCount,photos:d.userPhotos,size:"s"},void 0):null}),void 0)}},451858:(e,t,n)=>{n.d(t,{ReactionsMenuStateContainer:()=>a});var i=n(570655),o=n(785893),r=n(337386),a=function(e){var t=e.children,n=e.contextValue;return(0,o.jsx)(r.ReactionsMenuContextProvider,(0,i.__assign)({value:n},{children:t}),void 0)}},889323:(e,t,n)=>{n.d(t,{getUsersForReactionId:()=>o,isTitleVariantWithUsers:()=>r});var i=n(1925);function o(e,t){var n,i=null===(n=e.byReactionId)||void 0===n?void 0:n[t];if(void 0!==i)return i}function r(e){return e===i.TitleVariantWithLikedUsers}},882824:(e,t,n)=>{n.d(t,{visibleCount:()=>v,useReactedUsersConfig:()=>f});var i,o=n(570655),r=n(337386),a=n(442513),s=n(785480),u=n(1925),l=n(889323),c=n(517760),d=(i=(0,a.stackConfigForVisibleCount)(3)).stubItemsForPhotos,v=i.visibleCount;function f(e){var t,n=(0,r.useReactionsMenuContext)(),i=n.currentReactionId,v=n.reactedUsers.valueMaybeStale,f=function(e){var t=(0,r.useReactionsMenuContext)(),n=t.titleVariant,i=void 0===n?u.TITLE_VARIANT_DEFAULT:n,o=t.reactedUsers.valueMaybeStale,a=t.reactedUsersCounts;if(!(0,l.isTitleVariantWithUsers)(i))return;return function(e,t,n){var i=t?(0,l.getUsersForReactionId)(t,e):void 0;if(i)return{kind:"reacted_users",reactedUsersForReaction:i};var o=n?(0,c.counterForReactionId)(n,e):void 0;if(o&&o>0)return{kind:"count_only_stub",counter:o};return}(e,o,a)}(e),m=void 0,g=void 0;if(f&&"reacted_users"===f.kind&&f.reactedUsersForReaction.users){var _=f.reactedUsersForReaction,h=_.users,R=void 0===h?[]:h,E=_.totalCount;E=(y=(0,s.withCurrentUser)(R,E,e,i,null==v?void 0:v.currentUser)).totalCount,R=y.users,g=null!=E?E:R.length,m=R.map(p)}else if(f&&function(e){return"count_only_stub"===e.kind}(f)){var C=f.counter;C=(y=(0,s.withCurrentUser)([],C,e,i,null==v?void 0:v.currentUser)).totalCount;var b=y.users;C&&(g=C,m=(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(b.map(p))),(0,o.__read)(Array.from({length:d(C)},(function(){return a.userPhotoStub})))))}else{var y;g=(y=(0,s.withCurrentUserAddedOnly)(e,i,null==v?void 0:v.currentUser)).totalCount,m=y.users.map(p)}g=null!==(t=null!=g?g:null==m?void 0:m.length)&&void 0!==t?t:0;var w=Boolean(g&&g>0);return w?{shouldShowReactedUsers:!0,reactedUsersConfig:{hasSomeReactions:w,totalPhotosCount:g,userPhotos:m}}:{shouldShowReactedUsers:!1,reactedUsersConfig:void 0}}function p(e){return{kind:"profile",imageURL:e.ownerImageURL,title:e.ownerName}}},785480:(e,t,n)=>{n.d(t,{useReactedUsersPreview:()=>v,withCurrentUser:()=>m,withCurrentUserAddedOnly:()=>g});var i=n(570655),o=n(517760),r=n(541848),a=n(485207),s=n(889323),u=n(337386),l=n(738316),c=n(667294),d=n(853005);function v(e){var t=e.attemptRefetch,n=(0,u.useReactionsMenuContext)(),o=n.likeObjectId,d=n.titleVariant,v=n.reactedUsers,m=(0,l.useReactionsGlobalStateForObject)(o,{payloadIsSuitable:f}).counts,g=(0,i.__read)((0,c.useState)(!1),2),_=g[0],h=g[1];(0,c.useEffect)((function(){m&&h(!0)}),[m]),(0,c.useEffect)((function(){o&&(0,s.isTitleVariantWithUsers)(d)&&(t&&("initial"===v.resource.kind||"loading"!==v.resource.kind&&_)&&function(){(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,s,u;return(0,i.__generator)(this,(function(l){switch(l.label){case 0:if(!o)return[2];_&&h(!1),v.setLoading(!0),e=(0,r.requestGetReacted)(o),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.promise];case 2:return t=l.sent(),n=function(e){var t,n,o,r,a,s=e.reactedMenuStats;if(!s)return;var u=void 0,l=s.byReactionId;if(l){u={};try{for(var c=(0,i.__values)(Object.entries(l)),d=c.next();!d.done;d=c.next()){var v=(0,i.__read)(d.value,2),f=v[0],m=v[1];u[f]={totalCount:null!==(o=m.totalCount)&&void 0!==o?o:void 0,users:null!==(a=null===(r=m.users)||void 0===r?void 0:r.map((function(e){return p(e)})))&&void 0!==a?a:void 0}}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}}var g=s.currentUser?p(s.currentUser):s.currentUser;return{byReactionId:u,currentUser:g}}(t),n?(v.setLoaded(n),[3,4]):(s=new Error("useReactedUsersTooltip: failed to transform response"),(0,a.isDebugEnabled)()&&console.error(s),v.setFailed(s),[2]);case 3:return u=l.sent(),v.setFailed(u),[3,4];case 4:return[2]}}))}))}())}),[d,o,_,t])}function f(e){return"counts_only"===e.kind||!0===e.isQueueUpdate}function p(e){return(0,i.__assign)((0,i.__assign)({},e),{ownerName:e.ownerName?(0,d.stringWithHTMLEntitiesDecode)(e.ownerName):void 0})}function m(e,t,n,i,r){var a=null!=t?t:0,s=window.vk.id;if((0,o.isReactionIdSet)(i)&&i===n&&r){var u=function(e,t,n,i,o){if(o){var r=o.ownerImageURL,a=o.ownerName;if(r&&!n.find((function(t){return t.ownerId===e})))return{currentUser:{ownerId:e,ownerImageURL:r,ownerName:a},totalCount:i+1}}}(s,0,e,a,r);if(null==u?void 0:u.currentUser){var l={ownerId:u.currentUser.ownerId,ownerImageURL:u.currentUser.ownerImageURL,ownerName:u.currentUser.ownerName};return{totalCount:u.totalCount,users:[l].concat(e||[])}}}else if((0,o.isReactionIdUnset)(i)||i!==n){var c=function(e,t,n,i){var o=n&&n.filter((function(t){return t.ownerId!==e})),r=o&&n&&o.length<n.length;if(r)return{totalCount:r?i-1:i,users:o}}(s,0,e,a);if(c)return{totalCount:c.totalCount,users:c.users}}return{totalCount:a,users:e}}function g(e,t,n){return m([],0,e,t,n)}},546876:(e,t,n)=>{n.d(t,{useReactionAnimation:()=>s});var i=n(570655),o=n(667294),r=n(646346),a=n(819633),s=function(e){var t=e.animationElem,n=e.animationURL,s=e.play,u=void 0===s||s,l=e.loadAnimationParams,c=(0,o.useRef)(null),d=(0,i.__read)((0,o.useState)((function(){return n&&(0,r.animationItemHasData)(n)})),2),v=d[0],f=d[1];return(0,o.useEffect)((function(){if(n){if(t.current){c.current=(0,r.getAnimation)(n,t.current,{loadAnimationParams:l});var e=function(){f(!0)};return(0,a.onAnimationReady)(c.current,e),function(){var t,n;!c.current||!c.current._cbs||(null===(t=c.current)||void 0===t||t.removeEventListener("DOMLoaded",e),null===(n=c.current)||void 0===n||n.destroy()),f(!1),c.current=null}}console.error(new Error("Missing animation container"))}else c.current=null}),[n,t]),(0,o.useEffect)((function(){var e,t;v&&(u?null===(e=c.current)||void 0===e||e.play():null===(t=c.current)||void 0===t||t.stop())}),[u,v]),{isAnimationReady:v}}},239881:(e,t,n)=>{n.d(t,{useReactionMenuSet:()=>r});var i=n(667294),o=n(385667),r=function(e){return(0,i.useMemo)((function(){return(0,o.getReactionSet)(e)}),[e])}},738316:(e,t,n)=>{n.d(t,{useReactionsGlobalStateForObject:()=>l});var i=n(570655),o=n(667294),r=n(517760),a=n(453580),s=n(465864),u=n(740672);function l(e,t){var n=(void 0===t?{}:t).payloadIsSuitable,l=(0,i.__read)((0,o.useState)(void 0),2),c=l[0],d=l[1],v=(0,u.usePreviousRef)(c),f=(0,o.useCallback)((function(e){var t;n&&!n(e)||e.counts&&!(0,r.areCountersEqual)(e.counts,null!==(t=v.current)&&void 0!==t?t:void 0)&&d(e.counts)}),[e]);return function(e,t){!function(e){var t=e.onAnyPostCountsAnyUpdate;(0,o.useEffect)((function(){return(0,a.registerNonGlobalNonUniqueListener)(a.WallDataEvents.post_reactions_counts_update,t)}),[t])}({onAnyPostCountsAnyUpdate:(0,o.useCallback)((function(n){(0,s.likePostObjectId)(n.postFullId)===e&&t(n)}),[e])})}(e,f),{counts:c}}},239545:(e,t,n)=>{n.d(t,{REMOTE_RESOURCE_STATE_CONTEXT_STUB:()=>a,useRemoteResource:()=>l});var i=n(570655),o=n(667294),r={kind:"initial"},a={valueMaybeStale:void 0,value:void 0,reset:function(){},setFailed:function(){},setLoaded:function(){},setLoading:function(){},resource:r};function s(e){if("value"in e&&void 0!==e.value)return e.value}function u(e){var t=s(e);return void 0!==t?t:"staleValue"in e&&void 0!==e.staleValue?e.staleValue:void 0}function l(){var e=(0,i.__read)((0,o.useState)(r),2),t=e[0],n=e[1];return{valueMaybeStale:u(t),value:s(t),resource:t,setFailed:(0,o.useCallback)((function(e,t){void 0===t&&(t=!1),n((function(n){return{kind:"failed",error:e,staleValue:t?u(n):void 0}}))}),[]),setLoaded:(0,o.useCallback)((function(e){n({kind:"loaded",value:e})}),[]),setLoading:(0,o.useCallback)((function(e){void 0===e&&(e=!1),n((function(t){return{kind:"loading",staleValue:e?u(t):void 0}}))}),[]),reset:(0,o.useCallback)((function(){n((function(){return r}))}),[])}}},263630:(e,t,n)=>{n.d(t,{ReactionsMenuButton:()=>g});var i=n(570655),o=n(785893),r=n(667294),a=n(485207),s=n(803609),u=n(31711),l=n(640248),c=n(892239),d=n(339222),v=n(239881),f=n(706658),p=n(672544),m=n(451858),g=function(e){var t=e.objectId,n=e.onReactionChoose,g=e.reactionButtonContainerElem,_=e.reactionIdInitial,h=e.reactionSetId,R=e.reactionsCounts,E=e.styleVariant,C=e.triggerMouseenterOnInitial,b=e.titleVariant,y=(0,u.useTooltipVisibility)(),w=y.isAllowedReenter,P=y.tooltipVisibility,S=y.triggerClose,k=(0,i.__read)((0,r.useState)(_),2),T=k[0],x=k[1];(0,r.useEffect)((function(){var e=[(0,c.addReactionChooseListener)(t,(function(){S()})),(0,c.addDataUpdateListener)(t,(function(e){x(e.currentReactionId)}))];return function(){e.forEach((function(e){e()}))}}),[]);var I=(0,v.useReactionMenuSet)(h),O=(0,s.useReactionMenuConfig)(),U=(0,r.useMemo)((function(){var e;return null!==(e=null==I?void 0:I.items.map((function(e){return e.imageMenuURL})))&&void 0!==e?e:[]}),[null==I?void 0:I.id]);(0,r.useEffect)((function(){var e;I&&void 0!==T&&!(null===(e=I.items)||void 0===e?void 0:e.find((function(e){return e.id===T})))&&console.warn("Current reaction ID "+T+" is not found in set '"+h+"'")}),[I]);if(!I)return console.warn("ReactionsMenuButton init error, unavailable reaction set: "+h),null;var M={close:S,currentReactionId:T,onReactionChoose:function(e){(S(),e!==T)&&n(e)},reactionsOptions:I},L={currentReactionId:T,likeObjectId:t,reactedUsersCounts:R,titleVariant:b,triggerClose:S};return(0,o.jsxs)(m.ReactionsMenuStateContainer,(0,i.__assign)({contextValue:L},{children:[(0,o.jsx)(f.ReactionsMenuTooltip,{delayShow:null==O?void 0:O.menuShowDelay,getAttachElem:function(e){if(e){var t=(0,p.getClosestLikeBtnContainerElem)(e);return t||(0,a.isDebugEnabled)()&&console.warn("ReactionsMenuButton missing attach target:",e),t}},isAllowedReenter:w,popup:d.ReactionsMenu,popupProps:M,reactionButtonContainer:g,styleVariant:E,triggerMouseenterOnInitial:C,visibility:P},void 0),(0,o.jsx)(l.PreloadImages,{imageURLs:U},void 0)]}),void 0)}},706658:(e,t,n)=>{n.d(t,{ReactionsMenuTooltip:()=>m});var i=n(570655),o=n(785893),r=n(667294),a=n(508271),s=n(785480),u=n(740672),l=n(461157),c=n(46373),d=n(31711),v=n(126816),f=["--post-padding-lr"],p=function(){var e=document.createElement("div");return e.setAttribute("aria-hidden","true"),e},m=function(e){var t=e.getAttachElem,n=e.initialIsOpen,m=void 0!==n&&n,g=e.isAllowedReenter,_=e.reactionButtonContainer,h=e.popup,R=e.popupProps,E=e.delayHide,C=void 0===E?a.HIDE_TOOLTIP_TIMEOUT:E,b=e.delayShow,y=void 0===b?a.SHOW_TOOLTIP_TIMEOUT:b,w=e.onOpenStateChange,P=e.onPopperVisibilityChange,S=e.styleVariant,k=e.triggerMouseenterOnInitial,T=void 0===k||k,x=e.visibility,I=void 0===x?d.TooltipVisibility.uncontrolled:x,O=void 0!==t,U=(0,i.__read)((0,r.useState)(m),2),M=U[0],L=U[1],N=I!==d.TooltipVisibility.uncontrolled,j=(0,u.usePrevious)(I),V=(0,r.useRef)(null),A=(0,r.useRef)(null),B=(0,r.useRef)(null);(0,s.useReactedUsersPreview)({attemptRefetch:M});var D=(0,v.useCSSVarsPropagation)({elementWithPropsRef:A,properties:f}).style,F=(0,r.useMemo)((function(){var e;if(t)return t(null!==(e=B.current)&&void 0!==e?e:void 0)}),[t,B.current]),H=(0,r.useCallback)((function(e,t){!t&&N||L(e)}),[N]);(0,r.useEffect)((function(){null==w||w(M)}),[M]),(0,r.useEffect)((function(){M&&g&&(g.current=d.IS_ALLOWED_REENTER_DEFAULT)}),[M]);var W=(0,c.useTooltipTrigger)({afterHide:H,afterShow:H,cancelCloseOnContentHover:g,delayHide:C,delayShow:y,ignoreMouseTriggers:N,popperPopupRef:V,reactionButtonContainer:_,triggerMouseenterOnInitial:T});return(0,r.useEffect)((function(){if(N){var e=I===d.TooltipVisibility.opened;return e||W.cancelDelayedOpening(),void L(e)}M&&j===d.TooltipVisibility.opened&&L(!1)}),[I,N]),(0,o.jsx)(l.TransitionPopper,(0,i.__assign)({attachTarget:F,isOpen:M,content:h,contentProps:(0,i.__assign)((0,i.__assign)({},R),W.contentProps),mode:"side",onPopperVisibilityChange:P,position:"t",popperContentStyle:D,popperPopupRef:V,ref:O?B:A,renderNodeFactory:p,styleVariant:S},{children:(0,o.jsx)("div",{className:"ReactionsMenuButtonPopperReference"},void 0)}),void 0)}},461157:(e,t,n)=>{n.d(t,{TransitionPopper:()=>v});var i=n(570655),o=n(785893),r=n(667294),a=n(483295),s=n(429697),u=n(814217),l=n(840075),c=n(630810),d={appear:150,enter:150,exit:150},v=(0,r.forwardRef)((function(e,t){var n,v,f=e.attachTarget,p=e.isOpen,m=void 0!==p&&p,g=e.content,_=e.contentProps,h=e.onPopperVisibilityChange,R=e.popperContentStyle,E=e.popperPopupRef,C=e.styleVariant,b=(0,i.__rest)(e,["attachTarget","isOpen","content","contentProps","onPopperVisibilityChange","popperContentStyle","popperPopupRef","styleVariant"]),y=function(e){var t=(0,i.__read)((0,r.useState)(!!e),2),n=t[0],o=t[1];return{isVisible:!!e||n,onEnter:(0,r.useCallback)((function(){o(!0)}),[]),onHidden:(0,r.useCallback)((function(){o(!1)}),[])}}(m),w=y.isVisible,P=y.onEnter,S=y.onHidden,k=(0,r.useRef)(null),T=(0,c.useCombinedRefs)(t,k),x=(0,l.usePopperTopAutoPosition)(null!==(n=k.current)&&void 0!==n?n:void 0,146,w),I=(v=(0,r.useRef)(!0),(0,r.useEffect)((function(){v.current=!1}),[]),v.current);(0,r.useEffect)((function(){I||null==h||h(w)}),[w]);var O=(0,a.classNames)("ReactionsMenuPopper _ReactionsMenuPopperRoot",{"ReactionsMenuPopper--alignType-post":"post"===C,"ReactionsMenuPopper--popperBottom":x===l.PopperVerticalPosition.BOTTOM,"ReactionsMenuPopper--popperTop":x===l.PopperVerticalPosition.TOP}),U=(0,o.jsx)(g,(0,i.__assign)({},_,{position:x}),void 0),M=(0,o.jsx)(s.default,(0,i.__assign)({appear:!0,in:m,classNames:"ReactionsMenuPopperTransition",onEnter:P,onExited:S,timeout:d},{children:(0,o.jsx)("div",(0,i.__assign)({className:O,ref:E,style:R},{children:U}),void 0)}),void 0);return(0,o.jsx)(u.Popper,(0,i.__assign)({},b,{align:"left",attachTarget:f,content:M,open:w,position:x,ref:T}),void 0)}))},126816:(e,t,n)=>{n.d(t,{useCSSVarsPropagation:()=>o});var i=n(667294),o=function(e){var t=e.elementWithPropsRef,n=e.properties;return(0,i.useMemo)((function(){var e=t.current;if(!e)return{style:{}};var i=window.getComputedStyle(e),o={};return n.forEach((function(e){var t=i.getPropertyValue(e);t&&(o[e]=t)})),{style:o}}),[t.current,n])}},840075:(e,t,n)=>{n.d(t,{PopperVerticalPosition:()=>i,usePopperTopAutoPosition:()=>a});var i,o=n(667294),r=n(49030);!function(e){e.BOTTOM="b",e.TOP="t"}(i||(i={}));var a=function(e,t,n){return(0,o.useMemo)((function(){return function(e,t){var n=i.TOP;if(!e)return n;var o=(0,r.default)(e),a=window.pageYOffset||document.documentElement.scrollTop;return o.top-a<t?i.BOTTOM:n}(e,t)}),[e,t,n])}},803609:(e,t,n)=>{n.d(t,{useReactionMenuConfig:()=>r});var i=n(667294),o=n(385667),r=function(){return(0,i.useMemo)((function(){return(0,o.getReactionConfig)()}),[])}},46373:(e,t,n)=>{n.d(t,{useTooltipTrigger:()=>r});var i=n(569129),o=n(667294),r=function(e){var t=e.afterHide,n=e.afterShow,r=e.cancelCloseOnContentHover,a=e.delayHide,s=void 0===a?0:a,u=e.delayShow,l=void 0===u?0:u,c=e.ignoreMouseTriggers,d=void 0!==c&&c,v=e.reactionButtonContainer,f=e.popperPopupRef,p=e.triggerMouseenterOnInitial,m=(0,o.useRef)(null),g=(0,o.useRef)(void 0),_=(0,o.useRef)(void 0),h=(0,o.useCallback)((function(){var e;window.clearTimeout(null!==(e=g.current)&&void 0!==e?e:void 0)}),[]),R=(0,o.useCallback)((function(){h(),null==n||n(!1)}),[n]),E=(0,o.useCallback)((function(){h(),null==n||n(!0)}),[n]);(0,i.useOnClickOutside)(f,R),(0,o.useEffect)((function(){return function(){window.clearTimeout(g.current),window.clearTimeout(_.current)}}),[]);var C=(0,o.useCallback)((function(e){return window.setTimeout((function(){null==t||t(!1)}),null!=e?e:0)}),[t]),b=function(){var e,t;(window.clearTimeout(null!==(e=_.current)&&void 0!==e?e:void 0),d)||(g.current=(t=l,window.setTimeout((function(){E()}),null!=t?t:0)))},y=function(e){var t,n;if(window.clearTimeout(null!==(t=g.current)&&void 0!==t?t:void 0),!d){e.relatedTarget instanceof HTMLElement&&(null===(n=null==m?void 0:m.current)||void 0===n?void 0:n.contains(e.relatedTarget))||(_.current=C(s))}};(0,o.useEffect)((function(){p&&b()}),[]),(0,o.useEffect)((function(){return null==v||v.addEventListener("mouseenter",b,{passive:!0}),null==v||v.addEventListener("mouseleave",y,{passive:!0}),function(){null==v||v.removeEventListener("mouseenter",b),null==v||v.removeEventListener("mouseleave",y)}}),[v]);var w={cancelDelayedOpening:h,contentProps:{ref:m,onMouseEnter:(0,o.useCallback)((function(){var e;window.clearTimeout(null!==(e=_.current)&&void 0!==e?e:void 0),(null==r?void 0:r.current)&&E()}),[d,E]),onMouseLeave:(0,o.useCallback)((function(e){d||v&&e.target instanceof HTMLElement&&v.contains(e.target)||(_.current=C(s))}),[C,s,d,v])}};return w}},31711:(e,t,n)=>{n.d(t,{TooltipVisibility:()=>i,IS_ALLOWED_REENTER_DEFAULT:()=>a,useTooltipVisibility:()=>s});var i,o=n(570655),r=n(667294);!function(e){e.closed="closed",e.opened="opened",e.uncontrolled="uncontrolled"}(i||(i={}));var a=!0,s=function(){var e=(0,o.__read)((0,r.useState)(i.uncontrolled),2),t=e[0],n=e[1],s=(0,r.useRef)(a),u=(0,r.useCallback)((function(e){t!==i.closed&&(void 0!==e&&(s.current=e),n(i.closed),window.setTimeout((function(){n(i.uncontrolled)})))}),[]);return{isAllowedReenter:s,tooltipVisibility:t,setTooltipVisibility:n,triggerClose:u}}},908706:(e,t,n)=>{n.d(t,{isVariantInActionStatusBar:()=>o,isVariantHidden:()=>r,previewVisibilityUseCurrent:()=>a,isIntentPreviewInActionStatusBar:()=>s,isIntentPreviewHidden:()=>u,isIntentPreviewUseCurrent:()=>l,previewVisibilityIntentForVariant:()=>c,parsePreviewVariant:()=>d});var i=n(404608),o=function(e){return e===i.PreviewVariantActionStatusBar},r=function(e){return e===i.PreviewVariantHidden},a={kind:"useCurrent"},s=function(e){return e.kind===i.PreviewVariantActionStatusBar},u=function(e){return e.kind===i.PreviewVariantHidden},l=function(e){return"useCurrent"===e.kind},c=function(e){return e?{kind:e}:a},d=function(e){return i.PreviewVariants.includes(e)?e:void 0}},404608:(e,t,n)=>{n.d(t,{PreviewVariantActionStatusBar:()=>i,PreviewVariantHidden:()=>o,PreviewVariants:()=>r});var i="action_status_bar",o="hidden",r=[i,o]},95146:(e,t,n)=>{n.d(t,{SUPPORTED_OBJECT_TYPES:()=>i,SIZE_32:()=>o,SIZE_40:()=>r,SIZE_96:()=>a,SIZE_128:()=>s,REACTIONS_COUNTS_RESPONSE_FIELD:()=>u,WK_SECTION_PREFIX_REACTIONS:()=>l});var i={wall:"wall",wall_reply:"wall_reply"},o={width:32,height:32},r={width:40,height:40},a={width:96,height:96},s={width:128,height:128},u="reactions_counts",l="reactions"},661270:(e,t,n)=>{n.d(t,{useEventListenerOnRef:()=>o});var i=n(667294),o=function(e,t,n){(0,i.useLayoutEffect)((function(){var i=e.current;if(i)return i.addEventListener(t,n,{passive:!0}),function(){i.removeEventListener(t,n)}}),[e.current])}},287121:(e,t,n)=>{n.d(t,{reactionsButtonMount:()=>p});var i=n(785893),o=n(973935),r=n(30389),a=n(485207),s=n(301718),u=n(1925),l=n(263630),c=n(892239),d=n(54789),v=n(672544),f=d.ButtonStyleVariant.Post,p=function(e,t){var n,d;if(void 0===t&&(t={}),!("__isMounted"in e)){var p=(0,v.getMenuMount)(e),m=(0,s.reactionsElemPayload)(e);if(p&&(null==m?void 0:m.objectRaw)){var g=m.counts,_=m.csrfHash,h=m.objectRaw,R=m.reactionSetId,E=m.styleVariant,C=void 0===E?f:E,b=m.userReactionId,y=null!==(n=m.titleVariant)&&void 0!==n?n:u.TITLE_VARIANT_DEFAULT;null===_&&console.warn("Missing reactions csrf hash"),(0,a.isDebugEnabled)()&&console.log("Init reactions button",h,R);o.render((0,i.jsx)(l.ReactionsMenuButton,{objectId:h,onReactionChoose:function(t){var n=(0,s.reactionsElemPayload)(e);null!==_&&n&&((0,c.emitReactionChoose)(h),(0,r.reactionButtonSetReaction)(t,n.userReactionId,h,_,e))},reactionButtonContainerElem:e,reactionIdInitial:b,reactionSetId:R,reactionsCounts:g,styleVariant:C,titleVariant:y,triggerMouseenterOnInitial:!!t.isMouseenterEvent},void 0),p),null===(d=window.cur.destroy)||void 0===d||d.push((function(){p&&(o.unmountComponentAtNode(p),delete e.__isMounted)})),e.__isMounted=!0}else(0,a.isDebugEnabled)()&&console.error("Init reactions button failed",p,m)}}},30389:(e,t,n)=>{n.d(t,{reactionButtonSetReaction:()=>m,showReactedModal:()=>g});var i=n(570655),o=n(850167),r=n(714396),a=n(95146),s=n(908706),u=n(107337),l=n(928634),c=n(541848),d=n(485207),v=n(301718),f=n(740672),p=function(e,t){var n=t.counts,i=t.isFromWkLayer,o=t.isPrimaryLikeButtonClick,r=t.isUserAction,a=void 0!==r&&r,s=t.objectRaw,l=t.previewVisibility,c=t.reactionId;(0,u.triggerReactionsUpdate)(s,n,{id:c},{isFromWkLayer:i,isPrimaryLikeButtonClick:o,isUserAction:a,previewVisibility:l})},m=function(e,t,n,o,a,u){if((0,d.isDebugEnabled)()&&console.log("Change reaction for object "+n+": "+e),(0,f.isValidEnvironment)()){var m=(0,v.reactionsElemPayload)(a),g=null==m?void 0:m.counts,_=function(e,t,n){var o=(0,i.__assign)({},e);return void 0!==t&&(o[t]=(o[t]||0)+1),void 0!==n&&(o[n]=Math.max(0,(o[n]||0)-1)),o}((null==m?void 0:m.counts)||(0,r.reactionCountsBrandWrap)({}),e,t),h=null==u?void 0:u.isPrimaryLikeButtonClick,R=(0,l.isWkLayerWallPostOpen)(),E=(0,s.previewVisibilityIntentForVariant)(null==m?void 0:m.previewVariant);p(0,{counts:_,isFromWkLayer:R,isPrimaryLikeButtonClick:h,isUserAction:!0,objectRaw:n,previewVisibility:E,reactionId:e}),(0,c.requestPostReactionSet)(e,n,o).promise.then((function(e){var t=(0,c.validateLikesChangeResponse)(e),i=null==t?void 0:t.userReaction;t&&void 0!==i&&p(0,{counts:t.counts,isFromWkLayer:R,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:E,reactionId:i.id})}),(function(e){(null==e?void 0:e.isAborted)||p(0,{counts:g,isFromWkLayer:R,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:E,reactionId:t})}))}};function g(e,t){!function(e){(0,o.showWiki)({w:e},!1,void 0,{queue:1})}(a.WK_SECTION_PREFIX_REACTIONS+"_"+e+"/"+t)}},541848:(e,t,n)=>{n.d(t,{requestGetReacted:()=>i.requestGetReacted,requestPostReactionSet:()=>o.requestPostReactionSet,validateLikesChangeResponse:()=>o.validateLikesChangeResponse});var i=n(998429),o=n(353448)},998429:(e,t,n)=>{n.d(t,{requestGetReacted:()=>a});var i=n(570655),o=n(517760),r=n(293680),a=function(e){var t={act:"reactions_get_reacted",object:e};return{promise:new Promise((function(e,n){r.ajax.post("/like.php",t,{onDone:function(t){var r=function(e){var t=void 0;if(!(0,o.isUnknownObject)(e))return t;var n=e.reactedMenuStats;n&&(t||(t={}),t=(0,i.__assign)((0,i.__assign)({},t),{reactedMenuStats:n}));return t}(t);if(!r){var a=new Error("requestGetReacted: Invalid response");return console.error(a,t),void n(a)}e(r)},onFail:function(e){return n({err:e}),!1}})}))}}},853005:(e,t,n)=>{n.d(t,{stringWithHTMLEntitiesDecode:()=>r});var i=n(165594),o=n(495283),r=function(e){return(0,o.decodeHTMLEntities)((0,i.unwrap)(e))};i.unwrap},353448:(e,t,n)=>{n.d(t,{requestPostReactionSet:()=>d,validateLikesChangeResponse:()=>v});var i=n(690847),o=n(517760),r=n(293680),a=n(236783),s=n(486125),u=n(95146),l=n(576772),c=(0,i.makePendingRequestState)(),d=function(e,t,n,i){var o,u;(null===(o=null==i?void 0:i.abortPendingRequests)||void 0===o||o)&&c.cancel(t);var d={act:"a_set_reaction",object:t,reaction_id:e,hash:n,wall:2,from:null===(u=window.Likes)||void 0===u?void 0:u._getReference(t)},v=new a.AjaxCancellationToken,f=new Promise((function(e,t){var n=r.ajax.post("like.php",d,{cancellationToken:v,onDone:function(n){if(null==n?void 0:n.unauth_action_box)return l.UnauthActionBox.show(n.unauth_action_box),void t();(null==n?void 0:n.done_box)&&(0,s.showDoneBox)("",{},n.done_box),e(n)},onFail:function(e){var i=function(e){return"object"==typeof(t=e)&&null!==t&&"readyState"in t&&0===e.readyState;var t}(n);return t({err:e,isAborted:i}),!!i}})})),p=function(){v.cancel()},m=c.register(t,p);return f.catch((function(){})).finally((function(){m&&m()})),{abort:p,promise:f}},v=function(e){var t;if(void 0!==(null==e?void 0:e.reactions_my)){var n=null!==(t=null==e?void 0:e[u.REACTIONS_COUNTS_RESPONSE_FIELD])&&void 0!==t?t:void 0,i=e.reactions_my,r=void 0;return null===i?r={id:void 0}:(0,o.isValidReactionId)(i)&&(r={id:i}),{counts:n,userReaction:r}}console.warn("Invalid reaction change response format",e)}},434389:(e,t,n)=>{n.d(t,{init:()=>c,ReactionsEntryGlobal:()=>d});var i=n(49535),o=n(287121),r=n(964862),a=n(366220),s=n(498908),u=n(385667),l=n(130273),c=function(){(0,l.postRenderReactionsInit)(),(0,s.initResponseHandlers)()},d={onReactionKeyDown:function(e,t){(0,r.isEventFromMenu)(t)||[i.KEY.RETURN,i.KEY.SPACE].includes(t.keyCode)&&(t.stopPropagation(),(0,r.toggleReactionOnClick)(e))},onReactionMouseEnter:function(e,t){t.target===e&&(0,a.reactionsButtonInit)(e,{isMouseenterEvent:!0})},onReactionClick:function(e,t){(0,i.checkEvent)(t)||(0,r.isEventFromMenu)(t)||((0,r.toggleReactionOnClick)(e),(0,a.reactionsButtonInit)(e))},reactionsButtonMount:o.reactionsButtonMount,storageAddSets:u.storageAddSets,storageSetConfig:u.storageSetConfig}},964862:(e,t,n)=>{n.d(t,{isEventFromMenu:()=>s,toggleReactionOnClick:()=>u});var i=n(508271),o=n(30389),r=n(892239),a=n(301718),s=function(e){var t,n;return e.target instanceof HTMLElement&&(null===(n=(t=e.target).closest)||void 0===n?void 0:n.call(t,"._ReactionsMenuPopperRoot"))},u=function(e){var t=(0,a.reactionsElemPayload)(e);if(null==t?void 0:t.objectRaw){var n=t.csrfHash,s=t.objectRaw,u=t.userReactionId;if((0,r.emitReactionChoose)(s),null!==n){var l=void 0===u?i.REACTION_ID_DEFAULT:void 0;(0,o.reactionButtonSetReaction)(l,u,s,n,e,{isPrimaryLikeButtonClick:!0})}else console.warn("Missing reactions csrf hash",e)}else console.warn("Missing reactions object raw",e)}},366220:(e,t,n)=>{n.d(t,{reactionsButtonInit:()=>o});var i=n(570655),o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=window.Reactions;n?n.reactionsButtonMount.apply(n,(0,i.__spreadArray)([],(0,i.__read)(e))):window.stManager.add([window.jsc("web/reactions.js"),"reactions.css"]).then((function(){window.Reactions?o.apply(void 0,(0,i.__spreadArray)([],(0,i.__read)(e))):console.error("Reactions module is unavailable")}))}},498908:(e,t,n)=>{n.d(t,{initResponseHandlers:()=>u});var i=n(19834),o=n(385667),r=function(e){var t=null==e?void 0:e.reaction_sets;t&&(0,o.storageAddSets)(t)},a=function(e){e&&(0,o.storageSetConfig)(e)},s=!1,u=function(){s||((0,i.replaceExtraHandler)("reactionsConfig",a),(0,i.replaceExtraHandler)("reactions",r),s=!0)}},665872:(e,t,n)=>{n.d(t,{reactionsCountsUpdatePayload:()=>r,isReactionsFullUpdatePayload:()=>a,reactionsCountsOnlyUpdatePayload:()=>s});var i=n(570655),o=n(571904),r=function(e,t){return(0,i.__assign)((0,i.__assign)({kind:o.PayloadKindFull},e),{reactionIdState:{reactionId:t.id}})},a=function(e){return e.kind===o.PayloadKindFull},s=function(e){return(0,i.__assign)({kind:o.PayloadKindCountsOnly},e)}},571904:(e,t,n)=>{n.d(t,{PayloadKindCountsOnly:()=>i,PayloadKindFull:()=>o});var i="counts_only",o="counts_with_current_reaction"},107337:(e,t,n)=>{n.d(t,{triggerReactionsUpdate:()=>s});var i=n(465864),o=n(95146),r=n(453580),a=n(665872),s=function(e,t,n,s){var u=(0,i.parseLikeObjectId)(e);u&&u.objectType===o.SUPPORTED_OBJECT_TYPES.wall&&u.objectId?(0,r.emitEvent)(r.WallDataEvents.post_reactions_counts_update,function(e,t,n,i){var o={counts:e,isFromWkLayer:null==t?void 0:t.isFromWkLayer,isPrimaryLikeButtonClick:null==t?void 0:t.isPrimaryLikeButtonClick,isQueueUpdate:null==t?void 0:t.isQueueUpdate,isUserAction:t.isUserAction,postFullId:n.objectId,previewVisibility:t.previewVisibility,reactionIdState:i?{reactionId:i.id}:void 0};return i?(0,a.reactionsCountsUpdatePayload)(o,i):(0,a.reactionsCountsOnlyUpdatePayload)(o)}(t,s,u,n)):u&&u.objectType===o.SUPPORTED_OBJECT_TYPES.wall_reply&&u.objectId?(0,r.emitEvent)(r.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:u.objectId,reactionIdState:n?{reactionId:n.id}:void 0}):console.warn("Unsupported reactions object update",e)}},453580:(e,t,n)=>{n.d(t,{WallDataEvents:()=>a,registerUniqueListener:()=>l,registerNonGlobalNonUniqueListener:()=>c,emitEvent:()=>d});var i=n(570655),o=n(761508),r=n(469687),a={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update"},s=(0,r.makeSharedState)("wall-data",(function(){return{emitter:new o.default,keyedListeners:Object.create(null)}})),u=function(e,t,n){var o,r,a=s(),u=null===(r=null===(o=a.keyedListeners)||void 0===o?void 0:o[e])||void 0===r?void 0:r[t];return u&&a.emitter.removeListener(e,u),function(e,t,n){var o,r=s();return r.emitter.addListener(e,n),r.keyedListeners[e]=(0,i.__assign)((0,i.__assign)({},r.keyedListeners[e]),((o={})[t]=n,o)),function(){var i,o;r.emitter.removeListener(e,n),(null===(i=r.keyedListeners[e])||void 0===i?void 0:i[t])===n&&(null===(o=r.keyedListeners[e])||void 0===o||delete o[t])}}(e,t,n)},l=function(e,t,n){return u(t,e,n)},c=function(e,t){return function(e,t){var n=s();return n.emitter.addListener(e,t),function(){n.emitter.removeListener(e,t)}}(e,t)},d=function(e,t){s().emitter.emit(e,t)}}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return i[e].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=i,e=[],r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,i,o]=e[c],s=!0,u=0;u<n.length;u++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,o<a&&(a=o));if(s){e.splice(c--,1);var l=i();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var o=Object.create(null);r.r(o);var a={};t=t||[null,n({}),n([]),n(n)];for(var s=2&i&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,r.d(o,a),o},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.e=()=>Promise.resolve(),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={70724:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,s,u]=n,l=0;for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(u)var c=u(r);for(t&&t(n);l<a.length;l++)o=a[l],r.o(e,o)&&e[o]&&e[o][0](),e[a[l]]=0;return r.O(c)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[11216,24509,38288,68592,85820],(()=>r(52104)));a=r.O(a)})();