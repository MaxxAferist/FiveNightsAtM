(()=>{"use strict";var e,t,n,s={237432:(e,t,n)=>{n.d(t,{default:()=>s});const s=(0,n(379333).makeIcon)("Icon24CheckCircleOff","check_circle_off_24","0 0 24 24",'<symbol viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="check_circle_off_24"><path d="M12 0c6.629 0 12 5.373 12 12 0 6.629-5.373 12-12 12-6.629 0-12-5.373-12-12C0 5.371 5.373 0 12 0Zm0 1.5C6.2 1.5 1.5 6.2 1.5 12S6.2 22.5 12 22.5 22.5 17.8 22.5 12 17.8 1.5 12 1.5Z" fill="currentColor" /></symbol>',24,24)},482792:(e,t,n)=>{n.d(t,{default:()=>s});const s=(0,n(379333).makeIcon)("Icon24CheckCircleOn","check_circle_on_24","0 0 24 24",'<symbol viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="check_circle_on_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12Zm6.207-14.793a1 1 0 0 0-1.414-1.414L10 14.586l-2.793-2.793a1 1 0 0 0-1.414 1.414l3.5 3.5a1 1 0 0 0 1.414 0l7.5-7.5Z" fill="currentColor" /></symbol>',24,24)},495707:(e,t,n)=>{n.d(t,{default:()=>s});const s=(0,n(379333).makeIcon)("Icon24Done","done_24","0 0 24 24",'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="done_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="m9 16.2-3.5-3.5a.99.99 0 1 0-1.4 1.4l4.193 4.193a1 1 0 0 0 1.414 0L20.3 7.7a.99.99 0 0 0-1.4-1.4L9 16.2Z" fill="currentColor" /></g></symbol>',24,24)},383925:(e,t,n)=>{n.d(t,{default:()=>s});const s=(0,n(379333).makeIcon)("Icon28ChevronRightOutline","chevron_right_outline_28","0 0 28 28",'<symbol viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" id="chevron_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="m11 7.5 6.5 6.5-6.5 6.5" stroke="#8BC1FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" /><path d="m16.086 14-5.793 5.793a1 1 0 0 0 1.414 1.414l6.5-6.5a1 1 0 0 0 0-1.414l-6.5-6.5a1 1 0 0 0-1.414 1.414L16.086 14Z" fill="currentColor" fill-rule="nonzero" /></g></symbol>',28,28)},429449:(e,t,n)=>{function s(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="user_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="user_outline_20__Icons-20/user_outline_20"><g id="user_outline_20__user_outline_20"><path opacity=".1" d="M0 0h20v20H0z"/><path d="M12.5 5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0ZM14 5a4 4 0 1 1-8 0 4 4 0 0 1 8 0ZM4 15.5c0 .72.36 1 1 1h10c.64 0 1-.28 1-1 0-2.33-2.57-3.5-6-3.5s-6 1.17-6 3.5Zm-1.5 0c0-3.48 3.33-5 7.5-5s7.5 1.52 7.5 5c0 1.63-1.1 2.5-2.5 2.5H5c-1.4 0-2.5-.87-2.5-2.5Z" id="user_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"user_outline_20"}}n.d(t,{getIcon20UserOutline:()=>s})},323193:(e,t,n)=>{n.d(t,{BEST_FRIENDS_MAX_COUNT:()=>i,AUTOMATIC_BEST_FRIENDS_FROM_HINTS_COUNT:()=>r,BEST_FRIENDS_SELECT_MODE:()=>s});var s,i=100,r=10;!function(e){e.ADD="add",e.DELETE="delete"}(s||(s={}))},70162:(e,t,n)=>{n.d(t,{langNumeric:()=>i,langSex:()=>r,langStr:()=>o,langReplace:()=>a,langTag:()=>l});var s=n(40906);function i(e,t,n){var i,r=window.langConfig;if(!t||!r){if(!(0,s.isNumeric)(e)){var o=new Error("Non-numeric value passed to langNumeric");throw console.log(e,o),o}return String(e)}Array.isArray(t)?(i=t[1],e!=Math.floor(e)?i=t[r.numRules.float]:(r.numRules.int||[]).some((function(n){if("*"===n[0])return i=t[n[2]],!0;var s=n[0]?e%n[0]:e;return Array.isArray(n[1])&&n[1].includes(s)?(i=t[n[2]],!0):void 0}))):i=t;var a=String(e);if(n){for(var l=a.split("."),d=[],_=l[0].length-3;_>-3;_-=3)d.unshift(l[0].slice(_>0?_:0,_+3));l[0]=d.join(r.numDel),a=l.join(r.numDec)}return i=(i||"%s").replace("%s",a)}function r(e,t){if(!Array.isArray(t))return t;var n=t[1],s=window.langConfig;return s?(s.sexRules&&s.sexRules.some((function(s){return"*"===s[0]||Number(e)===Number(s[0])&&t[s[1]]?(n=t[s[1]],!0):void 0})),n):n}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var s=String(e),i=0;i<t.length;i+=2){var r=t[i];if(null!=r){var o=String(t[i]).startsWith("%")?t[i]:"{"+t[i]+"}";s=s.replace(o,t[i+1])}}return s}function a(e,t){for(var n in t)if(t.hasOwnProperty(n)){var s="{"+n+"}";e=e.replace(s,t[n])}return e}function l(e,t,n,s){return void 0===s&&(s="tag"),n=(n=n.replace("{"+s+"}",e)).replace("{/"+s+"}",t)}},539621:(e,t,n)=>{n.d(t,{BestFriendsConversationsBlock:()=>u});var s=n(570655),i=n(785893),r=n(667294),o=n(654857),a=n(787255),l=n(288420),d=n(919316),_=n(842194),c=n(41650),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.conversations,r=t.conversationsShownCount,l=t.showMoreConversations,u=t.onConversationClick,p=t.fromSearch,g=p?n:n.slice(0,r),f=Math.min(n.length-r,5),v=(0,c.getLang)("wall_best_friends_settings_box_conversation_more",f);return(0,i.jsxs)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__chats"},{children:[(0,i.jsx)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__header"},{children:(0,i.jsx)("span",(0,s.__assign)({className:"BestFriendsSettingsBox__sectionTitle"},{children:(0,c.getLang)("wall_best_friends_settings_box_title_chats")}),void 0)}),void 0),g.map((function(t,n){return(0,i.jsx)(a.default,(0,s.__assign)({aside:p?"":e.getButton(t),onClick:function(){return u(t.peerId,!e.isAllFriendsAdded(t)||p,p,p)}},{children:(0,i.jsx)(d.default,{size:"34",title:t.name,description:e.getDescription(t),photo:(0,i.jsx)(o.default,{photos:e.getAvatarImages(t)},void 0)},void 0)}),n)})),!p&&f>0&&(0,i.jsx)(_.ListMore,(0,s.__assign)({className:"BestFriendsSettingsBox__listMore",onClick:l},{children:v}),void 0)]}),void 0)},t.prototype.isAllFriendsAdded=function(e){var t=this;return e.userIds.every((function(e){return t.props.bestFriends.includes(e)}))},t.prototype.getAvatarImages=function(e){var t=this,n=[];return e.photoUrl?n.push(e.photoUrl):e.userIds.slice(0,4).forEach((function(e){var s=t.props.friends.find((function(t){return t.id===e}));s&&n.push(s.photoUrl)})),n},t.prototype.getButton=function(e){var t=(0,c.getLang)("wall_best_friends_settings_box_conversation_add"),n="secondary";return this.isAllFriendsAdded(e)&&(t=(0,c.getLang)("wall_best_friends_settings_box_conversation_cancel"),n="tertiary"),(0,i.jsx)(l.default,(0,s.__assign)({appearance:n,size:"s"},{children:t}),void 0)},t.prototype.getDescription=function(e){return(0,c.getLang)("wall_best_friends_settings_box_conversation_friends_count",e.userIds.length)},t}(r.Component)},763078:(e,t,n)=>{n.d(t,{BestFriendsFriendsBlock:()=>g});var s=n(570655),i=n(785893),r=n(667294),o=n(423985),a=n(814210),l=n(787255),d=n(919316),_=n(664891),c=n(41650),u=n(659397),p=n(323193),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.friendsList,r=t.fromSearch,a=t.clearFriends;return(0,i.jsxs)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__friends"},{children:[(0,i.jsxs)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__header"},{children:[(0,i.jsx)("span",(0,s.__assign)({className:"BestFriendsSettingsBox__sectionTitle"},{children:(0,c.getLang)("wall_best_friends_settings_box_title_friends")}),void 0),!r&&(0,i.jsx)(_.default,(0,s.__assign)({className:"BestFriendsSettingsBox__link",onClick:a},{children:(0,c.getLang)("wall_best_friends_settings_box_friends_clear")}),void 0)]}),void 0),(0,i.jsx)(o.default,(0,s.__assign)({className:"BestFriendsSettingsBox__list",loadMore:function(){},hasMore:!1},{children:n.map((function(t){return e.renderItem(t,r)}))}),void 0)]}),void 0)},t.prototype.renderItem=function(e,t){var n=this;void 0===t&&(t=!1);var r=this.props.isSelected(e.id),o=this.props.bestFriends.length>=p.BEST_FRIENDS_MAX_COUNT&&!r,_=t||o,c=(0,u.classNames)("BestFriendsSettingsBox__item",{"BestFriendsSettingsBox__item--disabled":o});return(0,i.jsx)(l.default,(0,s.__assign)({onClick:function(){return n.props.select(e.id,t,t?p.BEST_FRIENDS_SELECT_MODE.ADD:"",t)},aside:_?"":(0,i.jsx)(a.ListMultiSelectControl,{isSelected:r},void 0),className:c,canBeHovered:!o,selectable:!o},{children:(0,i.jsx)(d.default,{size:"34",title:e.name,photo:e.photoUrl},void 0)}),e.id)},t}(r.Component)},782163:(e,t,n)=>{n.d(t,{BestFriendsSettingsBox:()=>m});var s=n(570655),i=n(785893),r=n(667294),o=n(539621),a=n(763078),l=n(41929),d=n(878517),_=n(213984),c=n(288420),u=n(118690),p=n(41650),g=n(654612),f=n(486125),v=n(18149),h=n(386409),S=n(323193),F=n(880235),m=function(e){function t(t){var n=e.call(this,t)||this;n.onClickSave=function(){(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.saveBestFriendsList);var e=function(e){(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.updatePopupSave);var t=n.props.onSave;n.setState({isSaving:!0}),window.ajax.post("al_wall.php",{act:"edit_best_friends",batch:JSON.stringify(n.state.batchItems),hash:n.props.hash},{onDone:function(){var e;n.setState({isSaving:!1}),null===(e=(0,f.curBox)())||void 0===e||e.hide(),t&&t(n.state.bestFriends.length)},onFail:function(e){var t;return(0,g.showFastBox)((0,p.getLang)("global_error"),e||(0,p.getLang)("global_unknown_error")),n.setState({isSaving:!1}),null===(t=(0,f.curBox)())||void 0===t||t.hide(),!0},showProgress:function(){return(0,h.lockButton)(e)},hideProgress:function(){return(0,h.unlockButton)(e)}})};if(0===n.state.bestFriends.length)e(null);else{var t='\n        <div class="BestFriendsSettingsBoxConfirm">\n          <span class="BestFriendsSettingsBoxConfirm__title">'+(0,p.getLang)("wall_best_friends_settings_box_confirm_save")+'</span>\n          <span class="BestFriendsSettingsBoxConfirm__text">'+(0,p.getLang)("wall_best_friends_settings_box_confirm_save_text")+"</span>\n        </div>\n      ";(0,g.showFastBox)((0,p.getLang)("wall_best_friends_settings_box_confirm_title"),t,(0,p.getLang)("global_save"),e,(0,p.getLang)("global_cancel"),(function(){var e;null===(e=(0,f.curBox)())||void 0===e||e.hide(),(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.updatePopupCancel)}))}},n.showMoreConversations=function(){(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.moreChats),n.setState({conversationsShownCount:n.state.conversationsShownCount+5})},n.isSelected=function(e){return n.state.bestFriends.includes(e)},n.select=function(e,t,i,r){r&&(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.selectFriendFromSearch);var o=n.state,a=o.batchItems,l=o.friendsSorted,d=i===S.BEST_FRIENDS_SELECT_MODE.ADD;Array.isArray(e)||(e=[e]);var _=l.slice(),c=a.slice();e.forEach((function(e){var i=n.isSelected(e),r=n.getBestFriendsFromBatch(c).length;if(i||!(r>=S.BEST_FRIENDS_MAX_COUNT)){if(!d||!i){var o=c.findIndex((function(t){return t.user_id===e}));-1!==o?c.splice(o,1):c.push({op:i?S.BEST_FRIENDS_SELECT_MODE.DELETE:S.BEST_FRIENDS_SELECT_MODE.ADD,user_id:e})}if(t){var a=_.findIndex((function(t){return t.id===e}));_.unshift.apply(_,(0,s.__spreadArray)([],(0,s.__read)(_.splice(a,1))))}}})),n.setState({searchQuery:"",bestFriends:n.getBestFriendsFromBatch(c),batchItems:c,friendsSorted:_})},n.clearFriends=function(){n.select(n.state.bestFriends),(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.clear)},n.onConversationClick=function(e,t,i,r){var o=n.state.conversationsSorted,a=n.getConversationByPeerId(e);if(a){var l=o.slice(),d=n.state.conversationsShownCount;if(i){var _=l.map((function(e){return e.peerId})).indexOf(e);l.unshift.apply(l,(0,s.__spreadArray)([],(0,s.__read)(l.splice(_,1)))),_+1>d&&(d+=1)}t&&(r?(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.selectChatFromSearch):(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.addFriendsFromChat)),n.setState({conversationsSorted:l,conversationsShownCount:d},(function(){var e=t?S.BEST_FRIENDS_SELECT_MODE.ADD:S.BEST_FRIENDS_SELECT_MODE.DELETE;n.select(a.userIds,t,e)}))}};var i=t.conversations,r=t.bestFriends;return n.state={isSaving:!1,searchQuery:"",friendsSorted:n.getFilteredFriendsList(),conversationsSorted:i,conversationsShownCount:2,bestFriends:r,batchItems:[]},n.initIndexer(),n}return(0,s.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=e.friendsSorted;e.bestFriends.length||this.select(t.slice(0,S.AUTOMATIC_BEST_FRIENDS_FROM_HINTS_COUNT).map((function(e){return e.id})),!1,S.BEST_FRIENDS_SELECT_MODE.ADD)},t.prototype.render=function(){var e=this,t=this.state.searchQuery,n=this.getFilteredData(),r=n.friendsSorted,o=n.conversationsSorted,a=this.props,_=a.onClose,c=0===a.friends.length,u=t&&!r.length&&!o.length;return(0,i.jsxs)(l.BoxModal,(0,s.__assign)({className:"BestFriendsSettingsBox",appearance:"white",hasScroll:!1,title:this.getHeader(),actionButtons:this.getActionModalButtons(),hint:this.getHint(),onClose:_},{children:[(0,i.jsx)(d.BlockSearchInput,{className:"BestFriendsSettingsBox__search",onChange:function(t){return e.setState({searchQuery:t.target.value})},placeholder:(0,p.getLang)("wall_best_friends_settings_box_search_placeholder"),autoFocus:!0,value:t},"search"),c||u?this.renderNotFound(c):this.renderContent(r,o,Boolean(t))]}),void 0)},t.prototype.renderNotFound=function(e){var t=e?(0,p.getLang)("wall_best_friends_settings_no_friends"):(0,p.getLang)("wall_search_nothing_found");return(0,i.jsx)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__notFound"},{children:t}),void 0)},t.prototype.renderContent=function(e,t,n){return void 0===n&&(n=!1),(0,i.jsxs)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__inner"},{children:[Boolean(t.length)&&(0,i.jsx)(o.BestFriendsConversationsBlock,{conversations:t,conversationsShownCount:this.state.conversationsShownCount,showMoreConversations:this.showMoreConversations,onConversationClick:this.onConversationClick,fromSearch:n,bestFriends:this.state.bestFriends,friends:this.state.friendsSorted},void 0),Boolean(e.length)&&(0,i.jsx)(a.BestFriendsFriendsBlock,{bestFriends:this.state.bestFriends,fromSearch:n,friendsList:e,select:this.select,isSelected:this.isSelected,clearFriends:this.clearFriends},void 0)]}),void 0)},t.prototype.initIndexer=function(){var e=this.props,t=e.friends,n=e.conversations;this.indexedFriends=new v.vkIndexer(t,(function(e){return[e.name,e.domain].filter(Boolean).join(" ")})),this.indexedConversations=new v.vkIndexer(n,(function(e){return e.name}))},t.prototype.getFilteredFriendsList=function(){var e=this.props,t=e.friends,n=e.bestFriends;return(0,s.__spreadArray)((0,s.__spreadArray)([],(0,s.__read)(n.map((function(e){return t.find((function(t){return t.id===e}))})))),(0,s.__read)(t.filter((function(e){return!n.includes(e.id)}))))},t.prototype.getFilteredData=function(){var e=this.state,t=e.searchQuery,n=e.friendsSorted,s=e.conversationsSorted;return t&&(n=this.indexedFriends.search(t),s=this.indexedConversations.search(t)),{friendsSorted:n,conversationsSorted:s}},t.prototype.getHeader=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",(0,s.__assign)({className:"BestFriendsSettingsBox__title"},{children:(0,p.getLang)("wall_best_friends_settings_box_title")}),void 0),(0,i.jsx)("span",(0,s.__assign)({className:"BestFriendsSettingsBox__subtitle"},{children:(0,i.jsx)(_.default,{children:(0,p.getLang)("wall_best_friends_settings_box_subtitle")},void 0)}),void 0)]},void 0)},t.prototype.getActionModalButtons=function(){var e=this.props.onClose,t=this.state.isSaving;return[(0,i.jsx)(c.default,(0,s.__assign)({appearance:"tertiary",onClick:function(){return e()}},{children:(0,p.getLang)("global_cancel")}),"close"),(0,i.jsx)(u.default,(0,s.__assign)({appearance:"primary",onClick:this.onClickSave,loading:t,disabled:this.compareBestFriendsList()},{children:(0,p.getLang)("global_save")}),"publish")]},t.prototype.getHint=function(){var e=this.state.bestFriends;return e.length?(0,p.getLang)("wall_best_friends_settings_box_friends_count",e.length):""},t.prototype.compareBestFriendsList=function(){var e=this.props.bestFriends,t=this.state.bestFriends;return e.length===t.length&&e.every((function(e){return t.includes(e)}))},t.prototype.getConversationByPeerId=function(e){return this.state.conversationsSorted.find((function(t){return t.peerId===e}))},t.prototype.getBestFriendsFromBatch=function(e){var t=this.props.bestFriends.slice();return e.forEach((function(e){e.op===S.BEST_FRIENDS_SELECT_MODE.DELETE?t.splice(t.indexOf(e.user_id),1):t.push(e.user_id)})),t},t}(r.Component)},393797:(e,t,n)=>{n.d(t,{bestFriendsBoxSettings:()=>_});var s=n(785893),i=n(782163),r=n(481117),o=n(41650),a=n(654612),l=n(66433),d=n(486125),_=function(e){window.ajax.post("al_wall.php",{act:"get_best_friends_box_data"},{loader:!0,onDone:function(t,n,a,l){(0,r.showComponentInBox)((0,s.jsx)(i.BestFriendsSettingsBox,{friends:t,bestFriends:n,conversations:a,hash:l,onClose:function(){var e;return null===(e=(0,d.curBox)())||void 0===e?void 0:e.hide()},onSave:function(t){var n;e&&e(t);var s=(0,o.getLang)("wall_best_friends_settings_box_saved"),i=(0,o.getLang)("wall_best_friends_settings_box_saved_text");0===t&&(s=(0,o.getLang)("wall_best_friends_settings_box_saved_empty"),i=(0,o.getLang)("wall_best_friends_settings_box_saved_empty_text")),(0,d.showDoneBox)('<div class="top_result_header">'+s+"</div>"+i),null===(n=(0,d.curBox)())||void 0===n||n.hide()}},void 0),{width:450,onDestroy:function(e){(0,r.destroyComponentInBox)(e)}})},onFail:function(e){return(0,a.showFastBox)((0,o.getLang)("global_error"),e||(0,o.getLang)("global_unknown_error")),(0,l.logError)(new Error("get_best_friends_box_data error"+(e?": "+e:""))),!0}})}},781119:(e,t,n)=>{var s=n(874687);window.openPostPrivacyModal=s.openPostPrivacyModal;try{window.stManager.done(window.jsc("web/post_privacy_modal.js"))}catch(e){}},398630:(e,t,n)=>{n.d(t,{PRIVACY_MODAL_MODES:()=>f,PrivacyModal:()=>F});var s=n(570655),i=n(785893),r=n(880235),o=n(393797),a=n(213984),l=n(288420),d=n(375617),_=n(371066),c=n(695724),u=n(41650),p=n(786067),g=n(733024),f={BEST_FRIENDS_ENTRYPOINT:"bestFriendsEntrypoint",CHOOSE_BEST_FRIENDS:"chooseBestFriends",CREATE_POST_FOR_BEST_FRIENDS:"createPostForBestFriends",CREATE_POST_FOR_FRIENDS:"createPostForFriends",OWN_POST_FOR_BEST_FRIENDS:"ownPostForBestFriends",OWN_POST_FOR_BEST_FRIENDS_EMPTY:"ownPostForBestFriendsEmpty",OWN_POST_FOR_FRIENDS:"ownPostForFriends"},v="best_friends_only",h="friends_only",S=function(e){var t=new URLSearchParams({post_privacy:e,own:1,new_post:1}).toString();return"/wall"+window.vk.id+"?"+t},F=function(e){var t=e.mode,n=e.name,F=e.sex,m=e.onClose,y=function(e,t,n,s){var i="",a="",l="",g=function(){},F=function(e){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.editBestFriendsFromPopup),s(),(0,o.bestFriendsBoxSettings)((function(t){if(0!==t)if(e)window.open(S(v));else{var n=document.getElementById("best_friends_only");if(n){var s=(0,u.getLang)("wall_best_friends_settings_box_conversation_friends_count",t);n.innerHTML=(0,c.getTemplate)("visibility_access_best_friends_only_option",{html:(0,c.getTemplate)("visibility_access_best_friends_only_item",{count_text:s}),count:t}),d.default.showEditPost(),d.default.togglePostVisibilityAccess(n,_.VISIBILITY_ACCESS_OPTIONS.ONLY_BEST_FRIENDS,"",!0);var i=document.querySelector(".BestFriendsSettingsEntrypoint");null==i||i.remove()}}}))};switch(e){case f.BEST_FRIENDS_ENTRYPOINT:i=(0,u.getLang)("wall_privacy_modal_best_friends_own_title"),a=(0,u.getLang)("wall_privacy_modal_best_friends_own_text"),l=(0,u.getLang)("wall_privacy_modal_choose_best_friends_button"),g=F;break;case f.CHOOSE_BEST_FRIENDS:i=(0,p.langSex)(n,(0,u.getLang)("wall_privacy_modal_best_friends_title","raw")).replace("{name}",t),a=(0,u.getLang)("wall_privacy_modal_choose_best_friends_text"),l=(0,u.getLang)("wall_privacy_modal_choose_best_friends_button"),g=function(){return F(!0)};break;case f.CREATE_POST_FOR_BEST_FRIENDS:i=(0,p.langSex)(n,(0,u.getLang)("wall_privacy_modal_best_friends_title","raw")).replace("{name}",t),a=(0,u.getLang)("wall_privacy_modal_best_friends_text"),l=(0,u.getLang)("wall_privacy_modal_create_post_button"),g=function(){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupBest),window.open(S(v)),s()};break;case f.CREATE_POST_FOR_FRIENDS:i=(0,p.langSex)(n,(0,u.getLang)("wall_privacy_modal_friends_title","raw")).replace("{name}",t),a=(0,u.getLang)("wall_privacy_modal_friends_text"),l=(0,u.getLang)("wall_privacy_modal_create_post_button"),g=function(){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupFriends),window.open(S(h)),s()};break;case f.OWN_POST_FOR_BEST_FRIENDS:i=(0,u.getLang)("wall_privacy_modal_own_post_for_best_friends_title"),a=(0,u.getLang)("wall_privacy_modal_own_post_for_best_friends_text"),l=(0,u.getLang)("wall_privacy_modal_create_post_more_button"),g=function(){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupBest),window.open(S(v)),s()};break;case f.OWN_POST_FOR_BEST_FRIENDS_EMPTY:i=(0,u.getLang)("wall_privacy_modal_own_post_for_best_friends_empty_title"),a=(0,u.getLang)("wall_privacy_modal_own_post_for_best_friends_empty_text"),l=(0,u.getLang)("wall_privacy_modal_choose_best_friends_button"),g=function(){return F(!0)};break;case f.OWN_POST_FOR_FRIENDS:i=(0,u.getLang)("wall_privacy_modal_own_post_for_friends_title"),a=(0,u.getLang)("wall_privacy_modal_own_post_for_friends_text"),l=(0,u.getLang)("wall_privacy_modal_create_post_more_button"),g=function(){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupFriends),window.open(S(h)),s()}}return{title:i,text:a,buttonText:l,action:g}}(t,n,F,m),B=y.title,E=y.text,w=y.buttonText,x=y.action;return(0,i.jsxs)("div",(0,s.__assign)({className:"PrivacyModal__box"},{children:[(0,i.jsx)("span",(0,s.__assign)({className:"PrivacyModal__close",onClick:m},{children:(0,i.jsx)(g.default,{},void 0)}),void 0),(0,i.jsx)("h3",(0,s.__assign)({className:"PrivacyModal__title"},{children:B}),void 0),(0,i.jsx)(a.default,(0,s.__assign)({element:"div",className:"PrivacyModal__text"},{children:E}),void 0),(0,i.jsx)(l.default,(0,s.__assign)({className:"PrivacyModal__button",size:"m",onClick:function(){return x()}},{children:w}),void 0)]}),void 0)}},874687:(e,t,n)=>{n.d(t,{openPostPrivacyModal:()=>a});var s=n(785893),i=n(880235),r=n(481117),o=n(398630),a=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=0);var a=[o.PRIVACY_MODAL_MODES.CHOOSE_BEST_FRIENDS,o.PRIVACY_MODAL_MODES.CREATE_POST_FOR_BEST_FRIENDS,o.PRIVACY_MODAL_MODES.OWN_POST_FOR_BEST_FRIENDS,o.PRIVACY_MODAL_MODES.OWN_POST_FOR_BEST_FRIENDS_EMPTY].includes(e),l=[o.PRIVACY_MODAL_MODES.CREATE_POST_FOR_FRIENDS,o.PRIVACY_MODAL_MODES.OWN_POST_FOR_FRIENDS].includes(e);a?(0,i.sendBestFriendsAnalytic)(i.BestFriendsEventType.clickToLockBestFriends):l?(0,i.sendBestFriendsAnalytic)(i.BestFriendsEventType.clickToLockFriends):e===o.PRIVACY_MODAL_MODES.BEST_FRIENDS_ENTRYPOINT&&(0,i.sendBestFriendsAnalytic)(i.BestFriendsEventType.clickToBestFriendsEntrypoint);var d={containerClass:"PrivacyModal",width:450,onDestroy:function(e){(0,r.destroyComponentInBox)(e)}};(0,r.showComponentInBox)((0,s.jsx)(o.PrivacyModal,{mode:e,name:t,sex:n,onClose:function(){(0,r.destroyComponentInBox)(!0)}},void 0),d)}},175382:(e,t,n)=>{n.d(t,{floatingButtonCollapseAllRepliesHide:()=>r,floatingButtonCollapseAllRepliesShow:()=>o,loadRepliesLinkShow:()=>a,loadRepliesLinkIsVisible:()=>l,highlightUpdatedReply:()=>d,highlightUpdatedReplyContent:()=>_});var s=n(830104),i=n(315544),r=function(e){e instanceof HTMLElement&&e.classList.contains("replies_side")&&e.classList.add("replies_side_hidden")},o=function(e){e instanceof HTMLElement&&e.classList.contains("replies_side")&&e.classList.remove("replies_side_hidden")},a=function(e){e instanceof HTMLElement&&e.classList.contains("replies_next")&&e.classList.add("replies_next_shown")},l=function(e){return!!(e instanceof HTMLElement&&e.classList.contains("replies_next"))&&(e.classList.contains("replies_next_shown")||(0,i.isVisible)(e))},d=function(e){(0,s.triggerAnimationClass)(e,"reply_highlight_updated",3e3)},_=function(e){(0,s.triggerAnimationClass)(e,"reply_highlight_updated_content",3e3)}}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return s[e].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=s,e=[],r.O=(t,n,s,i)=>{if(!n){var o=1/0;for(_=0;_<e.length;_++){for(var[n,s,i]=e[_],a=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(a=!1,i<o&&(o=i));if(a){e.splice(_--,1);var d=s();void 0!==d&&(t=d)}}return t}i=i||0;for(var _=e.length;_>0&&e[_-1][2]>i;_--)e[_]=e[_-1];e[_]=[n,s,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var i=Object.create(null);r.r(i);var o={};t=t||[null,n({}),n([]),n(n)];for(var a=2&s&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,r.d(i,o),i},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.e=()=>Promise.resolve(),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={2884:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[o,a,l]=n,d=0;for(s in a)r.o(a,s)&&(r.m[s]=a[s]);if(l)var _=l(r);for(t&&t(n);d<o.length;d++)i=o[d],r.o(e,i)&&e[i]&&e[i][0](),e[o[d]]=0;return r.O(_)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[11216,24509,38288,68592,40917,10311,45346,17592,59302,85820,83063],(()=>r(781119)));o=r.O(o)})();