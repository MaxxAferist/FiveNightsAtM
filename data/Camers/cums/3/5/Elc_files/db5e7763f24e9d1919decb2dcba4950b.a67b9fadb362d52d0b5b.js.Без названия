(self.webpackChunkvk=self.webpackChunkvk||[]).push([[34240],{793047:(e,t,o)=>{"use strict";o.d(t,{jsonpManager:()=>w,Upload:()=>x});o(446964),o(66108),o(296253),o(21466),o(283946),o(59357),o(751876);var i=o(315544),a=o(49535),n=o(654612),l=o(40906),s=o(695724),r=o(171516),d=o(479957),p=o(124041),u=o(635429),c=o(726271),h=o(520820),f=o(786067),g=o(26330),m=o(668040),_=o(486125),v=o(787481),b=o(676821),w={c:1,h:{},reg:function(e){return w.h[w.c]=(0,l.isFunction)(e)?e:function(){},w.c++}},x={init:function(e,t,o,a){window.uploadInterface=void 0!==window.uploadInterface?window.uploadInterface+1:0;var n=window.uploadInterface;return(0,l.each)(["obj","dropbox","options","vars","types","uploadUrls","callbacks","checks","dragTimer"],(function(e,t){x[t]||(x[t]={})})),this.obj[n]=(0,i.ge)(e),a.dropbox&&(this.dropbox[n]=(0,i.ge)(a.dropbox)),this.vars[n]=o,a.file_input=(0,i.ge)(a.file_input),this.options[n]=a,a.clear&&cur.destroy.push(x.deinit.pbind(n)),this.uploadUrls[n]=t,!a.flash_lite||c.browser.flash||this.checkFileApi()?a.customShowProgress?a.customShowProgress():"INPUT"!==this.obj[n].tagName||this.checkFileApi()?a.flash_lite||(this.obj[n].innerHTML='<div class="upload_check loading">'+(0,u.getProgressHtml)("","pr_medium upload_pr")+"</div>"):this.obj[n]=(0,i.ge)(a.fieldEl)||this.obj[n].parentNode.firstChild:this.obj[n]=(0,i.ge)(a.fieldEl)||this.obj[n].parentNode.firstChild,a.noCheck?this.embed(n):this.check(n),n},deinit:function(e){if(x.obj[e]){var t=(x.options[e]||{}).dragEvObj,o=x.obj[e];if(t&&((0,a.removeEvent)(t,"dragenter"),(0,a.removeEvent)(t,"dragover"),(0,a.removeEvent)(t,"dragleave")),o.innerHTML="",(0,l.each)(["obj","dropbox","options","vars","types","uploadUrls","callbacks"],(function(t,o){x[o]&&delete x[o][e]})),x.callbacks){var i=["oncheck","ondone","onfail"];(0,l.each)(x.flashCallbacks(),(function(e,t){i.push(e)})),(0,l.each)(i,(function(t,o){delete x.callbacks[o+e]}))}clearTimeout(x.checks["timer"+e]),clearTimeout(x.dragTimer[e]),delete x.dragTimer[e]}},check:function(e){var t=this.obj[e],o=this.vars[e],a=this.options[e],n=a.check_url?a.check_url:this.uploadUrls[e],l={};if(a.signed){if(!n)return x.onCheckComplete(e);(0,s.extend)(l,{_jsonp:w.reg((function(t){x.onCheckComplete(e,t)}))})}else{if(!a.check_hash&&!a.server)return x.onCheckComplete(e);if(a.use_go_uploader)return x.onCheckComplete(e);this.callbacks["oncheck"+e]=x.onCheckComplete.pbind(e);var r=["mid","aid","gid","hash","rhash"];for(var d in r)r.hasOwnProperty(d)&&(l[r[d]]=o[r[d]]);a.check_aid&&(l.aid=a.check_aid),a.check_gid&&(l.gid=a.check_gid),a.check_hash&&(l.hash=a.check_hash),a.check_rhash&&(l.rhash=a.check_rhash),o.https_resp&&(l.https_resp=o.https_resp),(0,s.extend)(l,{al:1,act:"check_upload",type:a.type,ondone:"Upload.callbacks.oncheck"+e})}var p='<form action="'+n+'" enctype="multipart/form-data" method="post" id="check_upload_form'+e+'" target="check_iframe'+e+'">';for(var u in l)l.hasOwnProperty(u)&&(p+='<input type="hidden" name="'+u+'" value="'+l[u]+'" />');p+='</form><iframe style="visibility: hidden; width: 1px; height: 1px;" id="check_iframe'+e+'" name="check_iframe'+e+'"></iframe>';var c=(0,i.ce)("div",{id:"check_upload_"+e,innerHTML:p,className:a.checkClass||""},{display:"none"});(0,i.ge)("check_upload_"+e)&&(0,i.re)("check_upload_"+e),t.appendChild(c);var h=(0,i.ge)("check_upload_form"+e);if(h)try{h&&h.submit(),clearTimeout(x.checks["timer"+e]),this.checks["timer"+e]=setTimeout(x.serverFail.pbind(e),1e4)}catch(e){(0,v.debugLog)(e)}},onCheckComplete:function(e,t){clearTimeout(x.checks["timer"+e]),delete x.checks["timer"+e];var o={},i=x.options[e],a=t;if(i.signed)o=(0,h.parseJSON)(t||"{}");else{for(var n in t=(t=t||"").split("&"))if(t.hasOwnProperty(n)){var l=t[n].split("=");o[l[0]]=l[1]}a=o}i.customHideProgress&&i.customHideProgress(),o.error||o.fail?x.serverFail(e,a):(i.noCheck=1,i.onCheckComplete?i.onCheckComplete(e):i.flash_lite&&c.browser.flash?x.initFlash(e,x.obj[e]):x.embed(e),x.serverSuccess(e,a))},serverFail:function(e,t){var o=x.obj[e],i=x.options[e],a=x.vars[e];if(o&&(i.signed||i.server))if(x.fails||(x.fails={}),x.fails[e]=x.fails[e]?x.fails[e]+1:1,i.signed){var l=x.uploadUrls[e].split("?"),r=(0,m.fromQueryString)(l[1]),d=(0,s.extend)({act:"check_result",_resign:r._query||l[1]},t?{_query:t}:{_check:i.check_url.split("?")[1]});window.ajax.post("upload_fails.php",d,{onDone:function(t,a,l,r){x.fails[e]<i.max_attempts?(x.uploadUrls[e]=t,(0,s.extend)(x.options[e],{check_url:a,base_url:l,static_url:r}),x.check(e)):(o.innerHTML="",i.lang&&i.lang.cannot_upload_title&&i.lang.cannot_upload_text&&(0,n.showFastBox)({title:i.lang.cannot_upload_title,width:430,dark:1,bodyStyle:"padding: 20px; line-height: 160%;"},i.lang.cannot_upload_text))}})}else{var p=(0,s.extend)({act:"fail",role:i.type,mid:a.mid,oid:a.oid,gid:a.gid,aid:a.aid,server:i.server,st2_server:i.st2_server,error:i.error,hash:i.error_hash,hash_extra:a.hash_extra},t);i.custom_hash&&(0,s.extend)(p,{custom_hash:i.custom_hash,photo_hash:a.photo_hash,size:a.size,fid:a.fid,vid:a.vid,tag:a.tag}),a.transform_entry&&(0,s.extend)(p,{transform_entry:a.transform_entry,transform_hash:a.transform_hash,security_hash:a.security_hash}),window.ajax.post("upload_fails.php",p,{onDone:function(t,a,l){x.fails[e]<i.max_attempts?(x.uploadUrls[e]=t,(0,s.extend)(x.options[e],l),(0,s.extend)(x.vars[e],a),x.check(e)):(o.innerHTML="",i.lang&&i.lang.cannot_upload_title&&i.lang.cannot_upload_text&&(0,n.showFastBox)({title:i.lang.cannot_upload_title,width:430,dark:1,bodyStyle:"padding: 20px; line-height: 160%;"},i.lang.cannot_upload_text))}})}},serverSuccess:function(e,t){var o=x.options[e],i=x.vars[e];if(x.checked=x.checked||{},x.checked[e]=1,o.signed)window.ajax.post("upload_fails.php",{act:"check_result",_query:t});else if(o.server||o.error_hash){var a=(0,s.extend)({act:"success",mid:i.mid,oid:i.oid,gid:i.gid,aid:i.aid,server:o.server,error:o.error,hash:o.error_hash},t);window.ajax.post("upload_fails.php",a)}},embed:function(e){var t=null!=e.num?e.num:e,o=this.obj[t],a=this.dropbox[t],n=this.options[t];n.noEmbed?(0,i.re)("check_upload_"+e):n.noCheck&&(c.browser.flash>9&&n.forceFlash?this.initFlash(t,o):this.checkFileApi()&&!n.flash_lite?this.initFileApi(t,o,a):c.browser.flash>9&&!n.noFlash?this.initFlash(t,o):n.noForm||this.initForm(t,o))},checkFileApi:function(){return(window.XMLHttpRequest||window.XDomainRequest)&&(window.FormData||window.FileReader&&(window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary||window.ArrayBuffer&&window.Uint8Array&&(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder)))},initFlash:function(e,t){var o=[],a=x.vars[e],n=x.options[e],r={url:n.flashPath||"/swf/uploader_lite.swf",id:"uploader_lite"+e,preventhide:!0,width:"100%",height:c.browser.safari||c.browser.msie||c.browser.chrome&&(0,l.intval)(c.browser.version)<17?n.flashHeight?n.flashHeight+"px":cur.flash_lite&&!(0,i.isVisible)("photos_flash_add_button")?"67px":"25px":"100%"},d={swliveconnect:"true",allowscriptaccess:"always",wmode:c.browser.msie?"opaque":"transparent"};for(var p in x.types[e]="flash",a)a.hasOwnProperty(p)&&o.push(p+"="+a[p]);n.signed||a.ajx||o.push("ajx=1");var u=this.flashCallbacks(),h={};this.callbacks=this.callbacks||{},(0,l.each)(u,(function(t,o){x.callbacks[t+e]=o.pbind(e),h[t]="Upload.callbacks."+t+e}));var f=(0,s.clone)(a);if((0,s.extend)(f,h,{upload_url:x.uploadUrls[e],file_size_limit:n.file_size_limit,file_types_description:n.file_types_description,file_types:n.file_types,file_name:n.file_name,post_data:escape(o.join("&"))}),n.flash_lite?t.innerHTML='<div class="lite_upload" id="lite_upload'+e+'" style="z-index:10000; width: 100%; height: 100%; cursor: pointer;"></div>':(n.lang.button_browse||(n.lang.button_browse="Выбрать файл"),n.flat_button?t.innerHTML='<div id="uploader'+e+'" style="position: relative;"><div id="lite_upload'+e+'" style="position: absolute; height: 100%; width: 100%; z-index: 10000; cursor: pointer;"></div><button class="flat_button button_big button_big_width">'+n.lang.button_browse+"</button></div>":t.innerHTML='<button id="uploader'+e+'" class="flat_button upload_btn '+(n.buttonClass||"")+'" style="position: relative;"><div id="lite_upload'+e+'" style="position: absolute; height: 100%; width: 100%; z-index: 10000; cursor: pointer;"></div>'+n.lang.button_browse+"</button>"),(0,b.renderFlash)((0,i.ge)("lite_upload"+e),r,d,f),c.browser.msie&&(0,i.setStyle)((0,i.ge)("lite_upload"+e),{opacity:0,cursor:"pointer"}),n.lang.switch_mode){var g=n.lang.switch_mode.replace("{link}",'<a onclick="Upload.switchMode('+e+');">');g=g.replace("{/link}","</a>"),t.appendChild((0,i.ce)("div",{innerHTML:g,align:"left",className:"upload_switch_mode"},{marginTop:"15px"}))}},initForm:function(e,t){var o=e,a=this.vars[o],n=this.options[o];this.types[o]="form";var l='<form action="'+this.uploadUrls[o]+'" enctype="multipart/form-data" method="post" id="file_uploader_form'+o+'" target="upload_iframe'+o+'" style="text-align: center; width: 100%;">';if(n.signed)(0,s.extend)(a,{_jsonp:w.reg((function(e){x.onUploadComplete(o,e)}))});else{var r=x.onUploadComplete.pbind(o),d=x.onUploadError.pbind(o);this.callbacks["ondone"+o]=function(){var e=r.pbind.apply(r,arguments);setTimeout((function(){e()}),1)},this.callbacks["onfail"+o]=function(){var e=d.pbind.apply(d,arguments);setTimeout((function(){e()}),1)},(0,s.extend)(a,{al:1,ondone:"Upload.callbacks.ondone"+o,onfail:"Upload.callbacks.onfail"+o})}for(var p in a)a.hasOwnProperty(p)&&(l+='<input type="hidden" name="'+p+'" value="'+a[p]+'" />');var u='<input type="file" class="file" size="28" onchange="'+(n.uploadButton?"Upload.onUploadFileSelected("+o+")":"Upload.onUploadStart("+o+");")+'" name="'+n.file_name+'" style="cursor: pointer;"'+(n.accept?' accept="'+n.accept+'"':"")+'/></form><iframe style="position: absolute; visibility: hidden; width: 1px; height: 1px;" id="upload_iframe'+o+'" name="upload_iframe'+o+'"></iframe>';n.label?l+=n.label.split("{file}").join(u):l+=u,t.innerHTML=l;var c=n.file_input,h=(0,i.geByClass1)("file",t,"input");delete n.file_input,c&&h&&(h.parentNode.replaceChild(c,h),c.onchange=function(){x.onUploadStart(o)},(0,i.data)(c,"changed")&&((0,i.data)(c,"changed",!1),c.onchange())),n.uploadButton&&n.setUploadAction?n.setUploadAction(e,(function(){x.onUploadStart(o)})):n.uploadButton&&!0!==n.uploadButton&&((0,i.ge)(n.uploadButton).onclick=function(){x.onUploadStart(o)})},buttonOver:function(e){var t=x.options[e];t.flash_lite?t.hoverEl?(0,i.addClass)(t.hoverEl,"hover"):(0,i.isVisible)("photos_flash_add_button")?(0,i.addClass)((0,i.ge)("photos_flash_add_button"),"hover"):(0,i.addClass)((0,i.ge)("photos_upload_area"),"hover"):(0,i.addClass)((0,i.ge)("lite_upload"+e).nextSibling,"hover")},buttonOut:function(e){var t=x.options[e];t.flash_lite?t.hoverEl?(0,i.removeClass)(t.hoverEl,"hover"):(0,i.isVisible)("photos_flash_add_button")?((0,i.removeClass)((0,i.ge)("photos_flash_add_button"),"hover"),(0,i.removeClass)((0,i.ge)("photos_flash_add_button"),"active")):(0,i.removeClass)((0,i.ge)("photos_upload_area"),"hover"):((0,i.removeClass)((0,i.ge)("lite_upload"+e).nextSibling,"hover"),(0,i.removeClass)((0,i.ge)("lite_upload"+e).nextSibling,"active"))},buttonDown:function(e){x.options[e].flash_lite?(0,i.isVisible)("photos_flash_add_button")&&(0,i.addClass)((0,i.ge)("photos_flash_add_button"),"active"):(0,i.addClass)((0,i.ge)("lite_upload"+e).nextSibling,"active")},buttonUp:function(e){x.options[e].flash_lite?(0,i.isVisible)("photos_flash_add_button")&&(0,i.removeClass)((0,i.ge)("photos_flash_add_button"),"active"):(0,i.removeClass)((0,i.ge)("lite_upload"+e).nextSibling,"active")},initFileApi:function(e,t,o){var n,l=this.options[e],s=l&&l.dragEl||window.boxLayerWrap;if(o&&s&&(x.addedDocEvent||((0,a.addEvent)(document,"drop",x.drop),x.addedDocEvent=!0),l.dragEvObj=s,(0,a.addEvent)(s,"dragenter",x.dragEnter.pbind(e)),(0,a.addEvent)(s,"dragover",x.dragOver.pbind(e)),(0,a.addEvent)(s,"dragleave",x.dragOut.pbind(e))),this.types[e]="fileApi",l.chooseBox)n='<input class="file" type="file" size="28" onchange="Upload.onFileApiSend('+e+', this.files);"'+(l.multiple?' multiple="true"':"")+(l.accept?' accept="'+l.accept+'"':"")+' name="'+l.file_name+'" style="cursor: pointer;"/>';else if(l.uploadButton)l.lang.button_browse||(l.lang.button_browse="Выбрать файл"),n='<button class="flat_button upload_btn fl_l '+(l.buttonClass||"")+'" onclick="this.nextSibling.nextSibling.click()">'+l.lang.button_browse+'</button><div class="upload_selected fl_l" style="padding: 4px 0 0 10px;"></div><input class="file" type="file" size="28" onchange="geByClass1(\'upload_selected\', this.parentNode).innerHTML = Upload.getFilesNames('+e+", this.files); Upload.onUploadFileSelected("+e+')"'+(l.multiple?' multiple="true"':"")+(l.accept?' accept="'+l.accept+'"':"")+' name="'+l.file_name+'" style="visibility: hidden; position: absolute;"/><br class="clear" />';else if(l.lang.button_browse||(l.lang.button_browse="Выбрать файл"),l.flat_button){var r=p.FlatButton.render({className:"upload_btn"+(l.buttonClass||""),appearance:p.FlatButtonAppearance.PRIMARY,size:p.FlatButtonSize.M,children:l.lang.button_browse,restAttrs:{onclick:"document.querySelector('.flat_button_file').click()"}}),d=`<input class="file flat_button_file" type="file" size="28"\n                     onchange="Upload.onFileApiSend('${e}', this.files);" ${l.multiple?' multiple="true"':""} ${l.accept?' accept="'+l.accept+'"':""} name="${l.file_name}" style="visibility: hidden; position: absolute;"/>\n                `,u=document.createElement("div");u.appendChild(r),u.insertAdjacentHTML("beforeend",d),n=u.innerHTML}else n='<button class="flat_button upload_btn '+(l.buttonClass||"")+'" onclick="this.nextSibling.click()">'+l.lang.button_browse+'</button><input class="file" type="file" size="28" onchange="Upload.onFileApiSend('+e+', this.files);"'+(l.multiple?' multiple="true"':"")+(l.accept?' accept="'+l.accept+'"':"")+' name="'+l.file_name+'" style="visibility: hidden; position: absolute;"/>';l.label&&!l.flat_button?t.innerHTML=l.label.split("{file}").join(n):t.innerHTML=n;var c=l.file_input,h=(0,i.geByClass1)("file",t,"input");c&&h&&(h.parentNode.replaceChild(c,h),c.onchange=function(){x.onFileApiSend(e,this.files)},(0,i.data)(c,"changed")&&((0,i.data)(c,"changed",!1),setTimeout(c.onchange.bind(c),0))),l.uploadButton&&l.setUploadAction?l.setUploadAction(e,(function(){x.onFileApiSend(e,(0,i.geByTag1)("input",t).files)})):l.uploadButton&&!0!==l.uploadButton&&((0,i.ge)(l.uploadButton).onclick=function(){x.onFileApiSend(e,(0,i.geByTag1)("input",t).files)})},switchMode:function(e){x.options[e].noFlash=x.options[e].noCheck=1,x.embed(e)},onUploadFileSelected:function(e){x.options[e].onUploadFileSelected&&x.options[e].onUploadFileSelected()},onUploadStart:function(e,t){cur.fileApiUploadStarted=!0;var o=void 0!==e.ind?e.ind:e;"form"==x.types[o]&&((0,i.ge)("file_uploader_form"+o).submit(),(0,i.geByClass1)("file",x.obj[o]).disabled=!0);var a=x.options[o];a.onUploadStart&&a.onUploadStart(e,t)},getErrorAdditional:function(e){return e.error&&void 0!==e.server&&void 0!==e.bwact?(-1!==e.error.indexOf(":")?",":":")+" from upl_"+(0,l.intval)(e.server)+"?act="+e.bwact.replace(/[^a-zA-Z_0-9]/g,""):""},onUploadComplete:function(e,t,o){var a,n=void 0!==e.ind?e.ind:e,l=x.options[n];(void 0!==o&&n===e&&(e=o),"object"==typeof e&&(e.ind=n),"form"==x.types[n])&&((0,i.geByClass1)("file",x.obj[n]).disabled=!1);if(l.onUploadComplete){var s="";l.signed&&((a=t?(0,h.parseJSON)(t):"")?s=x.getErrorAdditional(a):t='{"error":"ERR_CLIENT_UPLOAD_FAIL: upload request bad result, url \\"'+x.uploadUrls[n]+'\\""}'),l.onUploadComplete(e,t,s)}"form"==x.types[n]&&x.onUploadCompleteAll(e,t),"video"===l.type?(0,d.statlogsValueEvent)("upload_video_fails",1,l.server,"success"):"photo"===l.type?(0,d.statlogsValueEvent)("upload_photo_fails",1,l.server,"success"):"doc"===l.type&&(0,d.statlogsValueEvent)("upload_doc_fails",1,l.server,"success")},onUploadCompleteAll:function(e,t,o){var a=void 0!==e.ind?e.ind:e,n=x.options[a];if(void 0!==o&&a===e&&(e=o),"fileApi"===x.types[a]){var l=(0,i.geByClass1)("file",x.obj[a],"input");l&&(l.value="")}var s={duration:Date.now()-n.uploadStartedTs,type:n.type,total_size:n.filesTotalSize};"subtitles"!==n.type&&this.sendUploadStat(a,s),n.onUploadCompleteAll&&n.onUploadCompleteAll(e,t)},onUploadError:function(e,t){var o=void 0!==e.ind?e.ind:e,a=x.options[o];"form"===x.types[o]&&((0,i.geByClass1)("file",x.obj[o]).disabled=!1);a.signed?a.onUploadComplete&&a.onUploadComplete(e,'{"error":"ERR_CLIENT_UPLOAD_FAIL: upload request fail, code \\"'+t.replace(/([\\\"])/g,"\\$1").replace(/\n/g,"\\n")+'\\", url \\"'+x.uploadUrls[o]+'\\""}'):a.onUploadError&&a.onUploadError(e,t)},onConnectionLost:function(e){var t=void 0!==e.ind?e.ind:e,o=x.options[t];o.onConnectionLost&&o.onConnectionLost(e)},onUploadProgress:function(e,t,o){var i=void 0!==e.ind?e.ind:e,a=x.options[i];a.onUploadProgress&&a.onUploadProgress(e,t,o)},onDebug:function(e,t){var o=void 0!==e.ind?e.ind:e,i=x.options[o];i.onDebug&&i.onDebug(e,t)},onSelectClick:function(e,t){var o=void 0!==e.ind?e.ind:e,i=x.options[o];i.onSelectClick&&i.onSelectClick(e,t)},getFilesNames:function(e,t){if(t&&t.length){var o=this.options[e];return o.multiple?(o.lang.selected_num_files||(o.lang.selected_num_files=["","%s файл","%s файла","%s файлов"]),(0,f.langNumeric)(t.length,o.lang.selected_num_files)):t[0].name.replace(/[&<>"']/g,"")}},checkFileType:function(e,t,o){var i=!1;if(o&&""!==o){var a=!0;if((0,l.each)(o.split(";"),(function(t,o){if(o=o.substr(1).toLowerCase(),e.substr(-o.length).toLowerCase()==o)return a=!1,!1})),!a)return!1}return(0,l.each)(t.split(";"),(function(t,o){if(o=o.substr(1).toLowerCase(),e.substr(-o.length).toLowerCase()==o||".*"==o)return i=!0,!1})),i},checkFilesSizes:function(e,t){var o=this.options[e];if(o.file_size_limit)for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];if(a.size&&a.size>o.file_size_limit){var s=o.lang.filesize_error;return s&&s.indexOf("{count}")>=0&&(s=o.file_size_limit>=1048576?s.replace("{count}",(0,l.intval)(o.file_size_limit/1048576)):s.replace("{count}",(0,l.intval)(o.file_size_limit/1024))),s&&(0,n.showFastBox)({title:(0,f.getLang)("global_error"),width:430,dark:1,bodyStyle:"padding: 20px; line-height: 160%;",onHide:function(){x.embed(e),delete cur.notStarted}},s,(0,f.getLang)("global_cancel")),!1}}return!0},onFileApiSend:function(e,t,o){if(t&&t.length){var i=this.options[e];if(i.file_types){var a=[];if((0,l.each)(t,(function(e,t){x.checkFileType(t.name,i.file_types,i.file_disallowed_types)&&a.push(t)})),!a.length)return void(i.onNoFilteredCallback&&i.onNoFilteredCallback(t));t=a}if((!i.filterCallback||(t=i.filterCallback(e,t)).length)&&(i.reverse_files&&(t=Array.prototype.slice.call(t).reverse()),!i.multiple&&t.length>1&&(t=[t[0]]),this.checkFilesSizes(e,t))){if(i.photoBox&&!o)return x.onPhotoAdd(e,t);if(!i.withoutAutoUpload||o){i.beforeUpload&&i.beforeUpload(e),cur.notStarted=cur.fileApiUploadStarted=!0,i.multi_progress||this.onUploadStart({ind:e,fileName:(t[0].fileName||t[0].name||"").replace(/[&<>"']/g,"")});var s=t.length;if(i.max_files){var r=cur.attachCount;if(!r&&cur.addMedia){var d=-1;for(var p in cur.addMedia)p>d&&(d=p);d>=0&&cur.addMedia[d]&&cur.addMedia[d].attachCount&&(r=cur.addMedia[d].attachCount)}var u=r?r():0,c=(i.max_files_warning||(0,f.getLang)("global_attach_max_n_files",i.max_files)).replace("{count}",i.max_files);i.max_files-u<t.length?(s=i.max_files-u,(0,n.showFastBox)({title:(0,f.getLang)("global_error"),width:430,dark:1,bodyStyle:"padding: 20px; line-height: 160%;",onHide:function(){x.embed(e),delete cur.notStarted,i.onMaxCount&&i.onMaxCount()}},c,(0,f.getLang)("global_continue"),(function(){x.uploadFiles(e,t,s),i.max_files_hide_last?(0,_.curBox)().hide():(0,_.getBoxQueue)().hideAll()}),(0,f.getLang)("global_cancel"))):(i.force_max_files&&(s=Math.min(s,i.max_files-(cur.savedPhotos||[]).length)),this.uploadFiles(e,t,s))}else this.uploadFiles(e,t,s)}else i.onFilesSelected&&i.onFilesSelected(e,t)}}},onPhotoAdd:function(e,t){var o=0,a=0;x.fileList=x.fileList||{},x.fileList[e]||(x.fileList[e]=[],x.options[e].onPhotoBox&&(o=!0)),(0,l.each)(t,(function(t,o){a++;var n=x.options[e].photoBox,l=new RegExp("image.*");o.type.match(l),cur.uploaderPhotoId=(cur.uploaderPhotoId||0)+1;var s=cur.uploaderPhotoId;x.fileList[e][s]=o;var r=(0,i.ce)("img"),d=(0,i.ce)("div",{id:"photos_add_item"+s,className:"photos_add_item",innerHTML:'<span class="photos_add_img photos_add_wait" id="photos_add_cont'+s+'" onmouseover="PhotosAdd.thumbOver('+s+', this);" onmouseout="PhotosAdd.thumbOut('+s+');"><span class="photos_add_s" id="photos_add_s'+s+'">&nbsp;</span></span><span class="bg">&nbsp;</span>'});n.appendChild(d);var p=new FileReader;p.onload=function(e){r.src=e.target.result,r.onload=function(){r.onload=!1;var e,t,o={w:r.width,h:r.height};o.w>130&&(e=130/o.w,o.w=130,o.h=parseInt(o.h*e)),o.h>130&&(t=130/o.h,o.h=130,o.w=parseInt(o.w*t));var a=(0,i.ce)("canvas",{width:o.w,height:o.h});a.getContext("2d").drawImage(r,0,0,o.w,o.h);var n=a.toDataURL("image/jpeg");r.src=n;var l=(0,i.ge)("photos_add_s"+s),d=Math.max(o.w,80),p=Math.min(o.h,98);(0,i.setStyle)(l,{width:d,height:p,marginLeft:Math.ceil((130-d)/2)}),l.innerHTML="",l.appendChild(r),r.onload=function(){setTimeout((function(){l.parentNode.className="photos_add_img"}),0),r.onload=!1},x.finishTask()}},x.taskToQ((function(){p.readAsDataURL(o)}))})),o&&a&&x.options[e].onPhotoBox(),x.options[e].onPhotoAdd&&a&&x.options[e].onPhotoAdd()},uploadPhotos:function(e){var t=[],o=x.fileList[e];for(var i in o)o[i]&&t.push((0,s.extend)(o[i],{fileRef:i}));return x.options[e].onUploadStart&&x.options[e].onUploadStart(),!!t.length&&(cur.uploadCount=Math.min(500,t.length),x.uploadFiles(e,t,cur.uploadCount),!0)},taskToQ:function(e){if(x.previewFileQ||(x.previewFileQ=[]),e&&x.previewFileQ.push(e),!x.doingQ){var t=x.previewFileQ.shift();t&&(x.doingQ=!0,t())}},finishTask:function(){setTimeout((function(){x.doingQ=!1,x.taskToQ()}),100)},uploadFiles:function(e,t,o){if(!(o<=0)){var i,a=this.options[e],n=a.signed?this.vars[e]:(0,s.extend)(this.vars[e],{ajx:1}),l=0,r=0,d=0,p=0,u=[];a.uploading&&(l=a.filesTotalSize||0,r=a.filesTotalCount||0,p=a.filesLoadedCount||0,d=a.filesLoadedSize||0,u=a.filesQueue),a.file_match&&(i=new RegExp(a.file_match,"i"));for(var c=!1,h=0;h<o;h++){var f=(t[h].fileName||t[h].name||"").replace(/[&<>"']/g,"");!a.file_match||f.match(i)?(a.multi_progress&&!a.multi_sequence&&this.onUploadStart({ind:e,fileName:f}),l+=t[h].size,r+=1,u.push(t[h])):c=!0}if(u.reverse(),(0,s.extend)(a,{filesQueue:u,filesTotalSize:l,filesLoadedSize:d,filesLoadedCount:p,filesTotalCount:r,uploadStartedTs:Date.now()}),u.length>0)if(void 0!==cur.multiProgressIndex)cur.nextQueues||(cur.nextQueues=[]),cur.nextQueues.push(e);else{var g=(0,m.toQueryString)(n),_=this.uploadUrls[e]?this.uploadUrls[e]+(this.uploadUrls[e].match(/\?/)?"&":"?")+g:"";a.use_go_uploader&&(_=this.uploadUrls[e]),this.uploadFile(e,u.pop(),_),a.multi_progress&&(cur.multiProgressIndex=e)}else c&&x.onUploadError(e,"file type not supported")}},getFileInfo:function(e,t,o){return t.multi_progress?{ind:e,fileName:o?(o.fileName||o.name||"").replace(/[&<>"']/g,""):"",num:t.filesLoadedCount,totalSize:t.filesTotalSize,loadedSize:t.filesLoadedSize,totalCount:t.filesTotalCount,file:o}:e},supportsChunkedUpload:function(){return!!Blob&&!!(Blob.prototype.webkitSlice||Blob.prototype.mozSlice||Blob.prototype.slice)&&!!FileReader},uploadFileChunked:function(e,t,o){var i=this.options[e],a=x.getFileInfo(e,i,t);i.multi_sequence&&this.onUploadStart(a);var n={file:t,fileName:(t.name||t.fileName).replace(/[&<>"']/g,""),fileSize:t.size,fileMime:t.type,retryCount:0,timeouts:[],activeRequests:[],requestsProgress:{},pointer:0,isUvUpload:Boolean(this.isUvUpload||i.isUvUpload),state:{url:o,started:Date.now(),loaded:null,chunkSize:i.chunkSize||4194304,sessionId:(1e17*Math.random()).toString(16)}};n.abort=function(e){(0,l.each)(e.timeouts,(function(e,t){clearTimeout(t)})),(0,l.each)(e.activeRequests,(function(e,t){t.abort()})),e.timeouts=[],e.activeRequests=[]}.bind(null,n),n.chunksNum=Math.ceil(n.fileSize/n.state.chunkSize),n.chunksLeft=n.chunksNum;var r=function(e){n.storageKey=["upload",e,n.fileSize].join("_"),i.uploading=!0,i.chunkedUpload=n;var t=g.default.get(n.storageKey);t&&(Date.now()-t.started<864e5?(n.state=t,o=t.url):g.default.remove(n.storageKey));try{console.log("%c Warning: if devtools is logging network requests it may cause high memory usage during file upload","font-size:16px;color:orange;")}catch(e){}u()};if(i.isUvUpload){var d=x.vars[e];window.ajax.post("al_video.php?act=get_upload_url",{file_size:t.size?t.size:0,user_agent:window.navigator.userAgent,owner_id:d.oid,tag:d.tag,from:d.from,extra_upload_options:i.extraUploadOptions},{onDone:function(l){n.state.url=l.upload_url,o=n.state.url,x.uploadUrls[e]=o,p(t,r),i.onUploadedVideoIdReceived&&i.onUploadedVideoIdReceived(a,l.video_id)},onFail:function(){x.terminateUpload(e,t.name)}})}else p(t,r);function p(e,t){var o=1048576,i=Math.floor(e.size/2)-524288,a=[e.slice(0,o),e.slice(i,i+o),e.slice(e.size-o,e.size)];!function e(o){var i=a.shift();if(i){var n=new FileReader;n.addEventListener("loadend",(function(t){var i=new Uint8Array(t.target.result),a=function(){var e=65535,t=65535;return{append:o,result:i};function o(o){for(var i=o.length,a=0;i;){var n=i>359?359:i;i-=n;do{t+=e+=o[a++]}while(--n);e=((65535&e)>>>0)+(e>>>16),t=((65535&t)>>>0)+(t>>>16)}}function i(){return((t=((65535&t)>>>0)+(t>>>16))<<16>>>0|(e=((65535&e)>>>0)+(e>>>16)))>>>0}}();a.append(i),o+=a.result().toString(16),e(o)})),n.readAsArrayBuffer(i)}else t(o)}("")}function u(){for(n.pointer=0,n.chunksLeft=n.chunksNum;n.activeRequests.length<4&&n.pointer<n.fileSize;)c()}function c(){var e=n.pointer,t=Math.min(e+n.state.chunkSize,n.fileSize)-1;if(!(e>=n.fileSize)){var o=!1;n.state.loaded&&(0,l.each)(n.state.loaded.split(","),(function(i,a){var l=a.match(/^(\d+)-(\d+)\/\d+$/),s=parseInt(l[1]),r=parseInt(l[2]);if(e>=s&&t<=r)return o=!0,n.chunksLeft-=Math.ceil((r+1-e)/n.state.chunkSize),n.pointer=r+1,!1})),o?(f(),c()):(h(e,t),n.pointer+=n.state.chunkSize)}}function h(l,r){var d=(t.slice||t.webkitSlice||t.mozSlice).call(t,l,r+1),p=new XMLHttpRequest;p.open("POST",o,!0),p.upload.onprogress=function(e){p.readyState!==XMLHttpRequest.DONE&&(e.lengthComputable&&(n.requestsProgress[l]=e.loaded),f())},p.onload=function(d){var p;n.activeRequests.splice((0,s.indexOf)(n.activeRequests,d.target),1),n.retryCount=0,--n.chunksLeft,201==d.target.status?(n.chunksLeft?(n.state.loaded=d.target.responseText,g.default.set(n.storageKey,n.state),c()):(n.state.loaded=d.target.responseText,g.default.set(n.storageKey,n.state),u()),delete n.requestsProgress[l],f()):200==d.target.status?(g.default.remove(n.storageKey),p=d.target.responseText,(0,s.extend)(a,x.getFileInfo(e,i,t)),x.options[e].filesLoadedSize+=n.fileSize,x.options[e].filesLoadedCount+=1,x.onUploadComplete(a,p),x.options[e].filesQueue&&x.options[e].filesQueue.length>0?x.uploadFile(e,x.options[e].filesQueue.pop(),o):(x.startNextQueue(e),x.onUploadCompleteAll(a,p),i.uploading=!1)):(g.default.remove(n.storageKey),n.abort(),x.onUploadError(a),x.options[e].filesQueue.length||(x.startNextQueue(e),x.onUploadCompleteAll(a,d.target.responseText),i.uploading=!1),m(d.target.status,d.target.responseText,l+"-"+r))},p.onerror=function(e){if(n.activeRequests.splice((0,s.indexOf)(n.activeRequests,e.target),1),++n.retryCount<=50){var t=setTimeout(h.bind(null,l,r),300*n.retryCount);n.timeouts.push(t)}else n.abort(),x.onConnectionLost(a);f(),m(e.target.status,e.target.responseText,l+"-"+r)},n.isUvUpload&&p.setRequestHeader("X-Uploading-Mode","parallel"),p.setRequestHeader("Content-Disposition",'attachment, filename="'+encodeURI(n.fileName)+'"'),p.setRequestHeader("Content-Type",n.fileMime||"application/octet-stream"),p.setRequestHeader("Content-Range","bytes "+l+"-"+r+"/"+n.fileSize),p.setRequestHeader("Session-ID",n.state.sessionId),p.send(d),d=null,n.activeRequests.push(p)}function f(){var o=n.fileSize,r=(n.chunksNum-n.chunksLeft)*n.state.chunkSize;(0,l.each)(n.requestsProgress,(function(e,t){r+=t})),(0,s.extend)(a,x.getFileInfo(e,i,t)),i.multi_progress?x.onUploadProgress(a,r,o):x.onUploadProgress(e,Math.min(r+i.filesLoadedSize,i.filesTotalSize),i.filesTotalSize)}function m(e,t,i){window.ajax.post("al_video.php",{act:"uploadVideoFailStat",url:o,error:e+","+t,range:i,sessionId:n.state.sessionId,chunksLeft:n.chunksLeft,loaded:n.state.loaded})}},resumeUpload:function(e){var t=this.options[e].chunkedUpload;x.uploadFileChunked(e,t.file,t.state.url)},isNeedRequestUrl:function(e){var t=this.options[e];return t.requestOptionsForFile&&"video"===t.type},getUploadOptions:function(e,t){var o=this.options[e],i=cur.gid||0;cur.oid<0&&(0,s.inArray)(cur.module,["public","groups","ads","app"])&&(0,s.inArray)(o.from,["article","post","ads"])&&(i=-cur.oid),x.options[e].uploadOptionsXhr=window.ajax.post("al_video.php?act=get_upload_params",{gid:i,from:o.from},{onDone:function(o){var i=(0,m.toQueryString)(o.vars),a=o.options.url+(o.options.url.match(/\?/)?"&":"?")+i;(0,s.extend)(x.options[e],o.options),(0,s.extend)(x.vars[e],o.vars),x.uploadUrls[e]=a,x.check(e),x.uploadFile(e,t,a,!0)},onFail:function(){x.terminateUpload(e,t.name)}})},uploadFile:function(e,t,o,i){var a=this.options[e];if(!x.isNeedRequestUrl(e)||i)if(a.chunked&&x.supportsChunkedUpload()&&(Boolean(a.isUvUpload)||t.size>4194304))x.uploadFileChunked.apply(x,arguments);else{var n=c.browser.msie&&(0,l.intval)(c.browser.version)<10?window.XDomainRequest:window.XMLHttpRequest,d=x.getFileInfo(e,a,t);a.multi_sequence&&this.onUploadStart(d),a.uploading=!0;var p=null;if(window.FormData){var u=new FormData;t instanceof File?u.append(a.file_name,t):u.append(a.file_name,t,t.filename.replace(/[&<>"']/g,"")),p=new n;p.open("POST",o,!0),p.onload=function(i){(0,s.extend)(d,x.getFileInfo(e,a,t)),x.options[e].filesLoadedSize+=t.size,x.options[e].filesLoadedCount+=1,x.onUploadComplete(d,i.target.responseText),x.options[e].filesQueue&&x.options[e].filesQueue.length>0?x.uploadFile(e,x.options[e].filesQueue.pop(),o):(x.startNextQueue(e),x.onUploadCompleteAll(d,i.target.responseText),a.uploading=!1)},p.onerror=function(i){(0,s.extend)(d,x.getFileInfo(e,a,t)),x.options[e].filesTotalSize-=t.size,x.options[e].filesTotalCount-=1,x.onUploadError(d,i.target.responseText),x.options[e].filesQueue.length>0?x.uploadFile(e,x.options[e].filesQueue.pop(),o):(x.startNextQueue(e),x.onUploadCompleteAll(d,i.target.responseText),a.uploading=!1)},p.upload.onprogress=function(o){p.readyState!==XMLHttpRequest.DONE&&(!1,(0,s.extend)(d,x.getFileInfo(e,a,t)),o.lengthComputable&&(a.multi_progress?x.onUploadProgress(d,o.loaded,o.total):x.onUploadProgress(e,Math.min(o.loaded+a.filesLoadedSize,a.filesTotalSize),a.filesTotalSize)))},p.send(u)}else{(0,r.saveStatlogEvents)({name:"upload_tmp_stat",value:1,keys:["window_formdata_not_exists"]});try{if(n&&!n.prototype.sendAsBinary&&window.ArrayBuffer&&window.Uint8Array){var h=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;h&&(n.prototype.sendAsBinary=function(e){for(var t=new window.ArrayBuffer(e.length),o=new Uint8Array(t,0),i=0;i<e.length;i++)o[i]=255&e.charCodeAt(i);var a=new h;a.append(t);var n=a.getBlob();this.send(n)})}var f=new FileReader;f.onload=function(){(p=new n).onload=function(i){(0,s.extend)(d,x.getFileInfo(e,a,t)),x.options[e].filesLoadedSize+=t.size,x.options[e].filesLoadedCount+=1,x.onUploadComplete(d,i.target.responseText),x.options[e].filesQueue.length>0?x.uploadFile(e,x.options[e].filesQueue.pop(),o):(x.startNextQueue(e),x.onUploadCompleteAll(d,i.target.responseText))},p.onerror=function(i){(0,s.extend)(d,x.getFileInfo(e,a,t)),x.options[e].filesTotalSize-=t.size,x.options[e].filesTotalCount-=1,x.onUploadError(d,i.target.responseText),x.options[e].filesQueue.length>0?x.uploadFile(e,x.options[e].filesQueue.pop(),o):(x.startNextQueue(e),x.onUploadCompleteAll(d,i.target.responseText),a.uploading=!1)},p.upload.onprogress=function(o){(0,s.extend)(d,x.getFileInfo(e,a,t)),o.lengthComputable&&(a.multi_progress?(x.onUploadProgress(d,o.loaded,o.total),a.uploading=!1):x.onUploadProgress(e,Math.min(o.loaded+a.filesLoadedSize,a.filesTotalSize),a.filesTotalSize))},p.open("POST",o,!0);var i="---------"+(0,l.irand)(1111111111,9999999999);p.setRequestHeader("Content-Type","multipart/form-data, boundary="+i);var r="--"+i+"\r\n";r+="Content-Disposition: form-data; name='"+a.file_name+"'; filename='"+t.name.replace(/[&<>"']/g,"")+"'\r\n",r+="Content-Type: application/octet-stream\r\n\r\n",r+=f.result+"\r\n",r+="--"+i+"--",p.sendAsBinary(r)},f.readAsBinaryString(t)}catch(e){try{console.error(e)}catch(e){}}}x.options[e].xhr=p}else x.getUploadOptions(e,t)},terminateUpload:function(e,t,o){try{var a=x.vars[e],n=x.options[e],l=(0,m.toQueryString)(a),s=n.filesQueue,r=!1,d=n.multi_progress?{ind:e,fileName:null==t?void 0:t.replace(/[&<>"']/g,"")}:e,p=t?e+"_"+t:e;for(var u in s)if(t==(s[u].fileName||s[u].name||"").replace(/[&<>"']/g,"")){s.splice(u,1),r=!0;break}o&&o.tt&&o.tt.destroy&&o.tt.destroy(),(0,i.re)("upload"+p+"_progress_wrap"),x.onUploadComplete(d,'{"error":"ERR_UPLOAD_TERMINATED: upload request was terminated"}'),!r&&n.xhr&&n.xhr.abort(),!r&&n.chunkedUpload&&n.chunkedUpload.abort();var c=this.uploadUrls[e]+(this.uploadUrls[e].match(/\?/)?"&":"?")+l;r||(s.length>0?x.uploadFile(e,s.pop(),c):(x.startNextQueue(e),x.onUploadCompleteAll(d,"")))}catch(e){try{console.error(e)}catch(e){}}},terminateAllUploads:function(){this.checked&&(0,l.each)(this.checked,(e=>{if(e=+e,x.isSomethingUploading(e)){var t=x.options[e];if(t){var o="";t.filesQueue&&t.filesQueue.length&&(t.filesQueue=[]),t.xhr&&4!==t.xhr.readyState&&0!==t.xhr.readyState&&(o=t.file_name),t.chunked&&t.chunkedUpload&&t.chunkedUpload.activeRequests.length&&(o=t.chunkedUpload.fileName,this.terminateUpload(e,o)),o&&this.terminateUpload(e,o)}}}))},startNextQueue:function(e){if(void 0===cur.multiProgressIndex&&setTimeout((function(){delete cur.fileApiUploadStarted}),1e3),e==cur.multiProgressIndex)if(this.options[e].multi_progress&&cur.nextQueues&&cur.nextQueues.length){var t=cur.nextQueues[0],o=x.options[t].filesQueue;for(cur.nextQueues.splice(0,1);0==o.length&&cur.nextQueues.length>0;)t=cur.nextQueues[0],cur.nextQueues.splice(0,1),o=x.options[t].filesQueue;if(o.length>0){var i=x.vars[t],a=(0,m.toQueryString)(i),n=x.uploadUrls[t]+(x.uploadUrls[t].match(/\?/)?"&":"?")+a;x.uploadFile(t,o.pop(),n),cur.multiProgressIndex=t}else delete cur.multiProgressIndex,setTimeout((function(){delete cur.fileApiUploadStarted}),1e3)}else delete cur.multiProgressIndex,setTimeout((function(){delete cur.fileApiUploadStarted}),1e3)},isFileDrag:function(e){if(!e||e.target&&("IMG"==e.target.tagName||"A"==e.target.tagName))return!1;if(!e.dataTransfer.types)return!0;for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"==e.dataTransfer.types[t])return!0;return!1},dragEnter:function(e,t){cur.uploadDragStarted&&1!=cur.uploadDragStarted||(cur.uploadDragStarted=x.isFileDrag(t)?2:1),1!=cur.uploadDragStarted&&x.dropbox[e]?(setTimeout((function(){clearTimeout(x.dragTimer[e]),delete x.dragTimer[e]}),0),x.options[e].onDragEnter&&x.options[e].onDragEnter(t),(0,i.show)(x.dropbox[e]),(0,a.cancelEvent)(t)):(0,a.cancelEvent)(t)},dragOut:function(e,t){if(1!=cur.uploadDragStarted&&x.dropbox[e]){x.dragTimer[e]&&(clearTimeout(x.dragTimer[e]),delete x.dragTimer[e]);var o=function(){var t=x.options[e],o=x.dropbox[e];t.visibleDropbox||(0,i.hide)(o),t.onDragOut&&t.onDragOut(),(0,i.removeClass)(o,"dropbox_over")};!t.clientX&&!t.clientY?o():x.dragTimer[e]=setTimeout(o,100),(0,a.cancelEvent)(t)}else(0,a.cancelEvent)(t)},dragOver:function(e,t){if(1!=cur.uploadDragStarted&&x.dropbox[e]){var o=x.insideDropbox(e,t);t.dataTransfer&&"copy"!==t.dataTransfer.dropEffect&&(t.dataTransfer.dropEffect=o?"copy":"none"),(0,i.toggleClass)(x.dropbox[e],"dropbox_over",o),(0,a.cancelEvent)(t)}else(0,a.cancelEvent)(t)},drop:function(e){return(0,l.each)(x.dropbox,(function(t,o){o&&(x.insideDropbox(t,e)&&x.onFileApiSend(t,e.dataTransfer.files),x.options[t].visibleDropbox||(0,i.hide)(o),x.options[t].onDrop&&x.options[t].onDrop(),(0,i.removeClass)(o,"dropbox_over"))})),delete cur.uploadDragStarted,(0,a.cancelEvent)(e),!1},insideDropbox:function(e,t){for(var o=t.target;o.parentNode;){if(o==x.dropbox[e])return!0;o=o.parentNode}return!1},isSomethingUploading:function(e){var t=x.options[e];return!!t&&(!(!t.filesQueue||!t.filesQueue.length)||(!(!t.xhr||4===t.xhr.readyState||0===t.xhr.readyState)||(!(!t.uploadOptionsXhr||4===t.uploadOptionsXhr.readyState||0===t.uploadOptionsXhr.readyState)||!!(t.chunked&&t.chunkedUpload&&t.chunkedUpload.activeRequests.length))))},flashCallbacks:function(){return{onUploadStart:x.onUploadStart,onUploadProgress:x.onUploadProgress,onUploadSuccess:x.onUploadComplete,onUploadComplete:x.onUploadCompleteAll,onUploadError:x.onUploadError,onDebug:x.onDebug,onMouseDown:x.buttonDown,onMouseUp:x.buttonUp,onMouseOver:x.buttonOver,onMouseOut:x.buttonOut,onSelectClick:x.onSelectClick}},sendUploadStat:function(e,t){var o=x.options[e],i=x.vars[e];if(!o.signed&&o.error_hash){var a=(0,s.extend)({act:"stat",mid:i.mid,oid:i.oid,gid:i.gid,aid:i.aid,server:o.server,error:o.error,hash:o.error_hash},t);window.ajax.post("upload_fails.php",a)}}}}}]);try{stManager.done("dist/db5e7763f24e9d1919decb2dcba4950b.a67b9fadb362d52d0b5b.js")}catch(e){}