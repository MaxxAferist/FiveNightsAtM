(()=>{"use strict";var __webpack_modules__={72958:(e,t,o)=>{o.d(t,{memoizeFirstTruthy:()=>i});var i=e=>((e,t)=>{var o,i=!1;return function(){return!0===i||(o=e(...arguments),i=t(o)),o}})(e,(e=>!!e))},364904:(e,t,o)=>{o.d(t,{cutTextToHighlight:()=>s});var i="cutTextToHighlight",r=15;function s(e){var t=null;document.querySelectorAll(`${e}:not(.cutTextToHighlight)`).forEach((e=>{if(e.classList.add(i),null===t){var o=getComputedStyle(e).font;t=function(e){var t=document.createElement("canvas").getContext("2d");function o(e){var o=t.measureText(e).width;return Math.ceil(o)}return t.font=e,o}(o)}e.innerHTML=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",i=e.querySelector(".highlight");if(!i)return e.innerHTML;var s=e.innerHTML.indexOf('<em class="highlight">');if(i.offsetLeft+i.offsetWidth<=e.offsetWidth-r)return e.innerHTML;if(i.offsetWidth<e.offsetWidth-r){for(var n=0,a="",_=s;_>0&&n+i.offsetWidth<=e.offsetWidth;){var c=e.innerHTML.lastIndexOf(" ",_-1);if(-1===c&&(c=0),!((n=t(o+(a=e.innerHTML.substring(c,_)+a).trim()))+i.offsetWidth<=e.offsetWidth-r))break;_=c}s=_}if(s>0)return o+e.innerHTML.substring(s).trim();return e.innerHTML}(e,t)}))}},580693:(e,t,o)=>{o.d(t,{Feed:()=>F});o(175115),o(940851),o(296253),o(820075),o(976142),o(59357),o(21466),o(751876);var i=o(19331),r=o(635429),s=o(447215),n=o(850167),a=o(486125),_=o(376567),c=o(49535),l=o(803834),d=o(47612),u=o(315544),h=o(434010),p=o(100416),f=o(386409),g=o(654612),m=o(376852),v=o(460615),E=o(695724),w=o(16850),b=o(901677),P=o(173801),C=o(507794),y=o(148298),T=o(124041),O=o(609720),M=o(40906),D=o(780223),L=o(329979),k=o(175382),R=o(905998),I=o(41189),A=o(801681),B=o(761635),S=o(533304),U=o(652745),W=o(749140),x=o(377782),K=o(909456),N=o(348230);function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},H.apply(this,arguments)}var F={sectionUpdateExceptions:["search","notifications","photos_search","mentions","articles","articles_search","likes","recommended","live","topics"],blockHideReason:function e(t,o){if(e.progress)return!1;e.progress=!0;var i="block_"+t,r=(0,u.ge)(i);delete cur.feedEntriesHTML[i],ajax.post("al_feed.php",{act:"a_block_hide_reason",block_id:t,reason:0|o,hash:(0,u.attr)(r,"data-hash"),ref:F.getModuleRef(),pos:(0,u.attr)(r,"data-pos")},{onDone:function(t){e.progress=!1,t?(0,u.val)(r,t):(0,u.hide)(r)},hideProgress:function(){e.progress=!1}})},blockRestore:function(e){var t="block_"+e,o=(0,u.ge)(t);cur.feedEntriesHTML[t]&&(0,u.val)(t,cur.feedEntriesHTML[t]),ajax.post("al_feed.php",{act:"a_block_restore",block_id:e,hash:(0,u.attr)(o,"data-hash"),ref:F.getModuleRef(),pos:(0,u.attr)(o,"data-pos")})},blockHide:function(e,t){if(!(0,f.actionsMenuItemLocked)(t)){(0,f.lockActionsMenuItem)(t);var o="block_"+e,i=(0,u.ge)(o),r=(0,u.geByClass1)("ui_actions_menu_wrap",i);ajax.post("al_feed.php",{act:"a_block_hide",block_id:e,hash:(0,u.attr)(i,"data-hash"),ref:F.getModuleRef(),pos:(0,u.attr)(i,"data-pos")},{onDone:function(e){uiActionsMenu.toggle(r,!1),cur.feedEntriesHTML[o]=(0,u.val)(i),(0,u.val)(i,e)},hideProgress:f.unlockActionsMenuItem.pbind(t)})}},videoRecomsBlockHideCancel:function(){ajax.post("/al_feed.php",{act:"a_video_recom_hide_cancel"}),F.restorePost("video_recoms")},videoRecomsBlockHideReason:function(e,t){(0,u.re)((0,u.geByClass1)("feed_rb_video_reason_wrap")),(0,u.show)((0,u.geByClass1)("feed_rb_video_reason_thankyou")),ajax.post("/al_feed.php",{act:"a_video_recom_hide_reason",reason:t,reason_hash:e})},expandVideosPost:function(e,t){var o=(0,u.geByClass1)("page_post_sized_thumbs",(0,u.domPN)(t)),i=0;(0,E.each)(o.children,(function(){if(!(0,u.isVisible)(this)&&((0,u.show)(this),++i>5))return!1})),(0,u.toggle)(t,!(0,u.isVisible)(o.children[o.children.length-1]))},closeVideoBlock:function(e){ajax.post("al_feed.php",{act:"a_close_video_block",hash:e});var t=(0,u.ge)("feed_recommends");(0,u.setStyle)(t,{height:(0,u.getSize)(t)[1],opacity:1}),setTimeout((function(){(0,u.addClass)(t,"recoms_hidden")}))},update:function(e){if(!cur.feedUpdateLoading&&!(window.Notifier&&cur.add_queues&&cur.add_queues.length&&(cur.add_queues.forEach((function(e){Notifier.addKey(e,F.updated)})),"news"!=cur.section)||"feed"!==cur.module||"top"==cur.subsection||inArray(cur.section,F.sectionUpdateExceptions)||cur.isDisabledFeedAutoupdate)){var t=Math.random();if(!("news"!=cur.section&&"comments"!=cur.section&&t>.3||"news"==cur.section&&(e||t>.05))){cur.feedUpdateLoading=!0;var o=F.getSectionParams(cur.section);(0,E.extend)(o,cur.navParams),ajax.post("al_feed.php?au_"+cur.section,(0,E.extend)(o,{timestamp:cur.timestamp,posted:e?1:"",queue:cur.add_feed_queue?1:0}),{onDone:function(t,o,i){if(cur.feedUpdateLoading=!1,1!=e||o&&-1!=o.indexOf(vk.id+"")){if(!("feed"!==cur.module||t.section!=cur.section||t.timestamp<cur.timestamp||i<cur.timestamp)){(0,v.statlogsValueEvent)("feed_check_update",!!o),t.count+=cur.count;var r,s,n,a,_=cur.rowsCont,c=(0,u.ce)("div"),d=0;if("news"==cur.section){if(a=(0,l.scrollGetY)(),o){for(c.innerHTML=o;c.lastChild;)r=c.lastChild,_.insertBefore(r,_.firstChild),F.onPostLoaded(r,!0);(0,E.each)((0,u.geByClass)("ts"+i,_),(function(e,t){var o;d+=this.offsetHeight;var i=null==t||null===(o=t.querySelector)||void 0===o?void 0:o.call(t,".post");i&&(0,L.highlightUpdatedPost)(i),cur.feedUnreadCount++}))}d&&a>100&&(0,l.scrollToY)(a+d,0,!1,!0)}else if(o)for(c.innerHTML=o;r=c.lastChild;)if("DIV"==r.tagName)if("podcasts_recommended_block"!==r.id)if((n=r.firstChild.id.substr(4))&&cur.wallLayer==n)c.removeChild(r);else if(s=(0,u.ge)("post"+n)){var h=function(){if(!(0,u.hasClass)(s.parentNode,"feed_row"))return{v:void 0};var e=(0,u.ge)("replies"+n),t=e.nextSibling,o=0;if((0,E.each)([].slice.call((0,u.geByClass)("reply",r,"div")),(function(){(0,u.ge)(this.id)||((0,u.addClass)(this,"new_reply"),e.appendChild(this),o++)})),o){var i=s.parentNode.offsetHeight,a=(0,u.geByClass)("new_reply",e,"div").length;t&&"replies_open"==t.className||(t=(0,u.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(n),role:"button",tabIndex:0}),e.parentNode.insertBefore(t,e.nextSibling)),t.innerHTML=getLang("wall_x_new_replies_more",Math.min(100,a)),t.newCnt=a;var d=(0,l.scrollGetY)(),h=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight,p=(0,u.getXY)(t)[1],f=s.parentNode.offsetHeight;i=f-i,inArray(n,cur.feedUnread)||cur.feedUnread.unshift(n),!cur.idleManager.isIdle&&p>d+100&&p<d+h+100?(_.insertBefore((0,u.ge)("post_ph"+n)||(0,u.ce)("div",{id:"post_ph"+n}),_.firstChild),inArray(n,cur.feedToSort)||cur.feedToSort.push(n)):((0,u.re)(s.parentNode),_.insertBefore(s.parentNode,_.firstChild),p>d+h+100&&(i=f),i&&(0,l.scrollToY)((0,l.scrollGetY)()+i,0,!1,!0)),cur.feedUnreadCount+=o}c.removeChild(r)}();if("object"==typeof h)return h.v}else a=(0,l.scrollGetY)(),_.insertBefore(r,_.firstChild),F.onPostLoaded(r,!0),d=r.offsetHeight,a>100&&(0,l.scrollToY)(a+d,0,!1,!0);else c.removeChild(r);else c.removeChild(r);F.applyOptions(t),F.updateTitle()}}else setTimeout(F.update.pbind(2),2e3)},onFail:function(){return cur.feedUpdateLoading=!1,!1},showProgress:function(){cur.feedUpdateLoading=!0},hideProgress:function(){cur.feedUpdateLoading=!1}})}}},getNewQKey:function(e){var t={act:"a_get_key",only_update:cur.add_feed_queue?1:0,need_ignore:(0,M.isArray)(cur.ignore_owners)?0:1},o={onDone:function(o,r,s){if(cur.section!=i)return;if(cur.add_feed_queue=s,o)cur.add_queues=o,setTimeout(F.update.pbind(0),0);else if(!t.only_update){var n=r;return void(cur.timestamp=(n||(0,M.vkNow)()/1e3)-e)}(0,M.isArray)(r)&&(cur.ignore_owners=r)},local:1},i=cur.section;ajax.post("al_feed.php",H({},F.getSectionParams(cur.section),{},t,{queue:1}),o)},updated:function(e,t){cur.queueTO=cur.queueTO||irand(0,5e3),setTimeout(F.handleQueueEvent.pbind(e,t),cur.queueTO)},handleQueueEvent:function(e,t){if(("search"==cur.section||"news"==cur.section||!cur.section)&&(0,M.isArray)(cur.add_queues)){var o=cur.add_queues.find((t=>(0,w.subscriptionObjectStableId)(t)===e));if(o){if(t.failed){cur.add_queues=!1,cur.add_feed_queue=null;var i=curNotifier.error_timeout||1;return clearTimeout(cur.lp_error_to),void(cur.lp_error_to=setTimeout(F.getNewQKey.bind(F).pbind(i),1e3*i))}if((0,M.isArray)(t.events)&&t.events.length){o.ts=t.ts,t.key&&(o.key=t.key);var r=(0,l.scrollGetY)(),s=0;(0,E.each)(t.events,(function(){if((0,M.isObject)(this))return Wall.processQueueEvent(this);s+=F.pushEvent(this.split("<!>"),r+(0,u.getSize)("page_header_cont")[1])}));var n=(0,l.scrollGetY)();s&&Math.abs(r-n)<100&&(cur.leftMenuDelta=s,(0,l.scrollToY)(n+s,0,!1,!0)),F.updateTitle(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()}}}},needScrollPost:function(e,t){return e+80>(0,u.getXY)(t)[1]||cur.storyLayer||window.mvcur&&mvcur.mvShown||window.pvcur&&cur.pvShown},pushEvent:function(e,t){var o=e[0],i=e[1],r=e[2],s=(0,u.ge)("post"+r),n=cur.section,a="search"!=n?(0,E.intval)(e.pop()):0,_=0,c=function(e){return(0,E.intval)((0,u.getStyle)((0,u.domByClass)(e,"page_block"),"marginTop"))||(0,E.intval)((0,u.getStyle)((0,u.domByClass)((0,u.domNS)(e),"page_block"),"marginTop"))||15};if(!cur.options||o!=cur.options.qversion)return 0;switch((Wall.isArchiveWall()?"archive_post"===i:"reveal_post"===i)&&(i="res_post"),(Wall.isArchiveWall()?"reveal_post"===i:"archive_post"===i)&&(i="del_post"),i){case"new_post":if(s)break;var l=constants.Groups.GROUPS_ADMIN_LEVEL_USER;if((0,E.intval)(e[11])&&(0,E.intval)(e[11])!=vk.id)return ajax.post("al_feed.php",{act:"a_need_own_reply",oid:(0,E.intval)(e[11])},{onDone:function(o){o&&(e[11]=0,F.pushEvent(e,t))}}),0;if("search"!=n){var d=r.split("_")[0];e[8]=(0,E.intval)(e[8])>0&&4==(4&a)?"1":"0",d<0&&(l=8&a?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&a?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER)}"search"==n&&(0,v.statlogsValueEvent)("feed_switch",0,"search_update",cur.options.q&&"#"==cur.options.q.charAt(0)?"hashtag":"");var h=cur.rowsCont,p=h.childNodes,f=Wall.getNewPostHTML(e,l,F.feedPostRepl);if(!f)break;var g,m,w,b,P,y,O=e[12],M="search"!=n&&(window._wf<=0||(0,u.hasClass)(cur.feedEls.wrap,"feed_has_new")||F.needScrollPost(t,h)),D=cur.storyLayer;D&&(M=!0);var R=!1,I=f;if(M&&(f=Wall.updatePostImages(f)),O){if(cur.ignore_owners.length&&inArray((0,E.intval)(O),cur.ignore_owners))break;if(m=(0,u.geByClass1)("feed_reposts_wrap"+O,h,"div"))w=(0,u.geByClass1)("feed_reposts_first",m,"div").firstChild,b=(0,u.geByClass1)("feed_reposts_group",m,"div"),P=(0,u.geByClass1)("feed_reposts_more_link",m),F.needScrollPost(t,w)&&(_-=w.offsetHeight+c(w)),w.parentNode.replaceChild(g=(0,u.se)(I),w),b.insertBefore(w,b.firstChild),(0,u.isVisible)(b)||T.FlatButton.setLabel(P,getLang("news_show_X_reposts",b.childNodes.length)),m=m.parentNode,h.firstChild!=m&&h.insertBefore(m,h.firstChild),F.needScrollPost(t,m)&&(_+=m.offsetHeight+c(m)),m.bits=0;else if((y=(0,u.geByClass)("feed_repost"+O,h,"div"))&&y.length){f=(0,u.rs)(cur.wallTpl.grouped_posts,{place:O,random:irand(1e8,2e8),first:f,other:"",label:getLang("news_show_X_reposts",y.length)});var A=(0,u.se)('<div class="feed_row'+(M?"_unshown":"")+'">'+f+"</div>");h.insertBefore(A,h.firstChild),!M&&F.needScrollPost(t,A)&&(_+=A.offsetHeight+c(A)),R=!0,m=A.firstChild,g=(0,u.geByClass1)("feed_reposts_first",m,"div"),b=(0,u.geByClass1)("feed_reposts_group",m,"div"),(0,E.each)((0,E.clone)(y),(function(){F.needScrollPost(t,this)&&(_-=this.offsetHeight+c(this)),(0,u.re)(this.parentNode),b.appendChild(this.firstChild)}))}else g=(0,u.se)('<div class="feed_row'+(M?"_unshown":"")+'"><div class="feed_repost'+O+'">'+f+"</div></div>"),h.insertBefore(g,h.firstChild),R=!0,!M&&F.needScrollPost(t,g)&&(_+=g.offsetHeight+c(g))}else g=(0,u.se)('<div class="feed_row'+(M?"_unshown":"")+'">'+f+"</div>"),h.insertBefore(g,h.firstChild),R=!0,!M&&F.needScrollPost(t,g)&&(_+=g.offsetHeight+c(g));var B=(0,u.geByClass1)("post",g);0==e[8]&&(0,u.addClass)(B,"closed_comments"),cur.deepRepliesActive&&(0,u.addClass)(B,"deep_active"),M&&R&&(cur.newPostsCount=cur.newPostsCount?cur.newPostsCount+1:1,cur.feedEls.newPosts.innerHTML=getLang("news_new_posts",cur.newPostsCount),(0,u.addClass)(cur.feedEls.wrap,"feed_has_new"),1==cur.newPostsCount&&F.needScrollPost(t,cur.feedEls.newPosts)&&!D&&(_+=(0,u.getSize)(cur.feedEls.newPosts)[1])),AudioUtils.updateQueueReceivedPost(g),(0,U.updateNarrativeSnippetsFromQueueByPost)(g),(0,W.updateArticleSnippetsFromQueueByPost)(g),cur.feedUnreadCount++,"search"!=n&&B&&(0,L.highlightUpdatedPost)(B),p.length>300?h.removeChild(p[300]):p.length<=1&&(0,u.removeClass)(cur.feedEls.wrap,"feed_is_empty"),Wall.updateMentionsIndex();break;case"new_post_reply":if(s)break;var S=cur.rowsCont,x=S.childNodes,K=Wall.getNewPostHTML(e,!1,F.feedPostRepl);if(!K)break;var q=(0,u.se)('<div class="feed_row">'+K+"</div>");S.insertBefore(q,S.firstChild),F.needScrollPost(t,q)&&(_+=q.offsetHeight+c(q)),(0,U.updateNarrativeSnippetsFromQueueByPost)(q),(0,W.updateArticleSnippetsFromQueueByPost)(q),(0,N.updateStickersFromQueue)(q),cur.feedUnreadCount++,x.length>300?S.removeChild(x[300]):x.length<=1&&(0,u.removeClass)(cur.feedEls.wrap,"feed_is_empty");break;case"edit_post":var j,V=(0,u.ge)("wpt"+r);if(!(0,u.isVisible)(s)||!V)break;var G=(0,u.geByClass1)("wall_post_more",V);G&&(G=(0,u.isVisible)((0,u.domNS)(G))),(j=F.needScrollPost(t,V))&&(_-=V.offsetHeight);var z=(0,u.rs)(e[3],{poll_hash:cur.wallTpl.poll_hash}),Q=(0,u.ge)("post"+r);Q&&!(0,u.isVisible)(Q.parentNode)&&(z=Wall.updatePostImages(z)),(0,u.val)(V,z),G&&(G=(0,u.geByClass1)("wall_post_more",V))&&G.onclick(),j&&(_+=V.offsetHeight),(0,U.updateNarrativeSnippetsFromQueueByPost)(V),(0,W.updateArticleSnippetsFromQueueByPost)(V),(0,L.highlightUpdatedPostContent)(V),window.Wall&&Wall.updatePostAuthorData(r);break;case"edit_reply":var Y=e[3],$=(0,u.ge)("wpt"+Y);if(!(0,u.isVisible)("post"+Y)||!$)break;var Z=(0,u.geByClass1)("wall_reply_more",$);Z&&(Z=(0,u.isVisible)((0,u.domNS)(Z)));var J=e[4];(0,u.val)($,J),Z&&(Z=(0,u.geByClass1)("wall_reply_more",$))&&Z.onclick(),(0,U.updateNarrativeSnippetsFromQueueByPost)($),(0,W.updateArticleSnippetsFromQueueByPost)($),(0,N.updateStickersFromQueue)($),(0,k.highlightUpdatedReplyContent)($);break;case"post_parsed_link":if(!s)break;var X=(0,u.geByClass1)("wall_postlink_preview_btn_disabled",s);if(!X)break;var ee=e[3];if("1"===ee)(0,u.removeClass)(X,"wall_postlink_preview_btn_disabled");else if("0"===ee)(0,u.re)(X);else if(ee){(0,u.removeClass)(X,"wall_postlink_preview_btn_disabled");var te=(0,u.geByClass1)("flat_button",X);te&&(te.setAttribute("href",e[3]),te.removeAttribute("onclick"))}break;case"del_post":if(s){var oe=(0,u.domClosest)("feed_row",s)||(0,u.domClosest)("feed_row_unshown",s)||s;cur.wallMyDeleted[r]||(F.needScrollPost(t,s)&&(_-=s.offsetHeight+c(s)),revertLastInlineVideo(s),(0,u.re)(oe)),cur.options.offset--,(0,u.hasClass)(cur.feedEls.wrap,"feed_has_new")&&!(0,u.isVisible)(oe)&&(cur.newPostsCount--,cur.newPostsCount?cur.feedEls.newPosts.innerHTML=getLang("news_new_posts",cur.newPostsCount):(0,u.removeClass)(cur.feedEls.wrap,"feed_has_new"))}break;case"res_post":s&&cur.options.offset++;break;case"new_reply":if(!s||cur.wallMyReplied[r]||(0,u.ge)("post"+e[3]))break;if((0,u.hasClass)((0,u.ge)("post"+r),"deep_active")){var ie=Wall.addNewReply(e);_+=ie[0];break}var re=(0,u.ge)("replies"+r),se=(0,u.ge)("replies_wrap"+r),ne=s.offsetHeight,ae=r.split("_")[0]<0?8&a?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&a?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,_e=Wall.getNewReplyHTML(e,ae);if(!_e)break;var ce,le=!1,de=!1;if((0,u.isVisible)(re)&&(0,u.isVisible)(se)&&!(0,u.isVisible)("reply_link"+r)){ce=re.nextSibling;var ue=(0,u.geByClass)("new_reply",re,"div").length+1;if(cur.wallMyOpened[r]){ce&&"replies_open"==ce.className&&(0,u.re)(ce),de=!0;var he=(0,u.geByClass1)("wr_header",re,"a"),pe=(0,u.geByClass)("reply",re,"div").length+1,fe=pe;he&&(fe=(0,E.intval)(he.getAttribute("offs").split("/")[1])+1),(fe>5||pe<fe)&&(he||re.insertBefore(he=(0,u.ce)("a",{className:"wr_header"}),re.firstChild),Wall.updateRepliesHeader(r,he,pe,fe))}else _e=Wall.updatePostImages(_e),le=(0,u.se)(_e),(0,u.addClass)(le,"new_reply"),ce&&"replies_open"==ce.className||(ce=(0,u.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(r),role:"button",tabIndex:0}),re.parentNode.insertBefore(ce,re.nextSibling)),ce.innerHTML=getLang("wall_x_new_replies_more",Math.min(100,ue)),ce.newCnt=ue}else(0,u.re)("reply_link"+r),(0,u.show)(se,re),de=!0;r.split("_")[0]==vk.id&&cur.feedUnreadCount++,le||(le=(0,u.se)(_e)),re.appendChild(le),F.needScrollPost(t,de?le:ce)&&(_+=s.offsetHeight-ne),le instanceof HTMLElement&&((0,U.updateNarrativeSnippetsFromQueueByPost)(le),(0,W.updateArticleSnippetsFromQueueByPost)(le),(0,N.updateStickersFromQueue)(le)),de&&(0,k.highlightUpdatedReply)(le),Wall.repliesSideSetup(r),Wall.updateMentionsIndex(),Likes.update("wall"+r,{comment_num:e[13]});break;case"del_reply":if(!cur.wallMyDeleted[r]&&s){if((0,u.hasClass)((0,u.gpeByClass)("post",s),"deep_active")){var ge=Wall.removeDeepReply(e);_+=ge[0];break}F.needScrollPost(t,s)&&(_-=s.offsetHeight);var me=s.parentNode.id.match(/replies(-?\d+_\d+)/);revertLastInlineVideo(s),(0,u.re)(s),me&&Wall.repliesSideSetup(me[1])}break;case"view_post":Likes.update("wall"+r,{views_num:Wall.formatCount((0,E.intval)(e[3]))});break;case"like_post":case"like_reply":if(!s)break;var ve="like_reply"==i?"wall_reply"+r:r,Ee=s&&(0,u.domByClass)(s,"_like_wrap"),we=s&&(0,u.domByClass)(s,"_share_wrap"),be=(0,C.likeDataReactionsFields)(e);Wall.likeFullUpdate(Ee,ve,H({isQueueUpdate:!0,like_my:Ee&&(0,u.hasClass)(Ee,"my_like"),like_num:e[3],like_title:!1,share_my:we&&(0,u.hasClass)(we,"my_share"),share_num:e[4],share_title:!1},be))}return _},feedPostRepl:function(e,t){e.replies=cur.wallTpl.post_replies;var o={full_id:t[2],item_id:"wall_"+t[2],sec_name:stripHTML(t[3]),date:Wall.getNowRelTime(),del:cur.wallTpl.spam};if("search"==cur.section&&cur.q){var i,r,s,n=e.text||"",a=cur.q.toLowerCase().split(/[\s.,:;!?()]/),_=[],c=(n=n.replace(/<(.|\n)+?>/g,(function(e){return _.push(e),""}))).toLowerCase();for(i=a.length-1;i>=0;i--)if(s=a[i],(0,E.trim)(s))for(r=0;-1!=(r=c.indexOf(s,r));)n.charAt(r-1)!=String.fromCharCode(2)?(n=n.substr(0,r)+""+i+""+n.substr(r+s.length),c=c.substr(0,r)+""+i+""+c.substr(r+s.length)):r+=2;n=n.replace(/\x02(\d+)\x02/g,(function(e,t){return'<span class="highlight">'+a[t]+"</span>"})),n=n.replace(/\x01/g,(function(){return _.shift()||""})),o.text=n,"new_post_reply"==t[1]&&(o.date_postfix=t[7])}return o},reSortItems:function(){cur.feedToSort&&cur.feedToSort.length&&((0,E.each)(cur.feedToSort,(function(e,t){var o=(0,u.ge)("post_ph"+t),i=(0,u.ge)("post"+t).parentNode;o&&i&&(o.parentNode.insertBefore(i,o),(0,u.re)(o))})),cur.feedToSort=[],(0,l.scrollToY)(0,0))},showNewPosts:function(){(0,u.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0;var e=(0,u.ge)("feed_rows");Wall.loadPostImages(e),(0,E.each)((0,u.geByClass)("feed_row_unshown",e,"div"),(function(){(0,u.replaceClass)(this,"feed_row_unshown","feed_row")}))},updateTitle:function(){cur.idleManager&&(cur.idleManager.isIdle||(cur.feedUnreadCount=0),(0,u.setDocumentTitle)((cur.feedUnreadCount?"("+cur.feedUnreadCount+") ":"")+cur.feedInitialTitle))},toggleTabsMenuTab:function(e,t){var o=(0,u.geByClass1)("feed_section_"+e,cur.feedEls.rmenu);o&&(0,u.toggleClass)(o,"ui_rmenu_item_hidden",!t)},toggleTabsMenu:function(e,t){var o=(0,u.ge)("feed_add_list_icon");return void 0===t&&(t=!(0,u.hasClass)(o,"shown")),browser.mozilla&&(0,u.setStyle)("page_body",{overflow:t?"visible":""}),uiActionsMenu.toggle(o,t),t&&(0,c.addEvent)(document,"mousedown",(function e(t){F.toggleTabsMenu(!1,0),(0,c.removeEvent)(document,"mousedown",e)})),e&&(0,c.cancelEvent)(e)},checkTabsFilter:function(e,t){var o,i,r,s=t==cur.section,n=cur.my_feed_types.tabs;switch(t){case"news":return!1;case"newlist":return F.addList();default:if(r=t.match(/list(\d+)/))return F.editList(r[1])}o=-1!=(i=indexOf(n,t)),(0,u.toggleClass)(e,"checked",!o),o?(n.splice(i,1),s&&(cur.onSaveTabs=function(e,t){F.toggleTabsMenu(null,!1),F.switchSection("news")}.pbind(t,o))):n.push(t),cur.my_feed_types.tabs=n,F.toggleTabsMenuTab(t,!o||s),uiRightMenu.fixScroller((0,u.ge)("ui_rmenu_"+cur.section+(cur.list||""))),clearTimeout(cur.saveTabsTO),cur.saveTabsTO=setTimeout(F.saveTabs,500)},hasSearchParams:function(e){var t=!1;return(0,E.each)(e,(function(e,o){if((!e.indexOf("c[")&&"c[section]"!==e||"q"==e)&&o)return t=!0,!1})),t},getSectionParams:function(e){var t={section:e};switch(e){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"podcasts":case"articles":void 0===(t.subsection=cur.subsections[e])&&delete t.subsection;break;case"owner":(t.owner=cur.owner)||delete t.section;break;case"source":case"notifications":(t.source=cur.source)||delete t.source;break;case"list":void 0===(t.subsection=cur.subsections["list"+cur.list])&&delete t.subsection,(t.list=cur.list)||delete t.list;break;case"search":var o=(0,u.ge)("search_filters_form");if(o){var i=(0,E.serializeForm)(o)||{};for(var r in i)i[r]&&"0"!=i[r]||delete i[r];(0,E.extend)(t,i)}t["c[q]"]=(0,E.trim)((0,u.val)(cur.feedEls.search));break;case"photos_search":(t.q=(0,E.trim)((0,u.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,E.intval)(cur.search_sort_value))||delete t.sort;break;case"trends_search":window.nav.objLoc.trend_id&&(t.trend_id=window.nav.objLoc.trend_id),(t.q=(0,E.trim)((0,u.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,E.intval)(cur.search_sort_value))||delete t.sort;break;case"articles_search":(t.q=(0,E.trim)((0,u.val)(cur.feedEls.search)))||(t.section="articles");break;case"comments":cur.reposts&&(t.reposts=cur.reposts);break;case"mentions":var s=new URLSearchParams(location.search);s.delete("ref"),history.replaceState(null,"","?"+s+location.hash),cur.mentionObj&&cur.mentionObj!=vk.id&&(t.obj=cur.mentionObj)}return t},switchNotifyList:function(e,t){uiRightMenu.go((0,u.geByClass1)("feed_section_"+e),!1,!1),F.go(t)},switchSubSection:function(e,t,o){if(t&&(0,c.checkEvent)(t))return!0;var i=cur.section;"list"===cur.section&&(i="list"+cur.list),cur.subsection=cur.subsections[i]=e;var r=F.getSectionParams(cur.section);r.hash=o,delete cur.feedUpdateLoading,delete cur.isFeedLoading,nav.go((0,E.extend)(r||{},{0:"feed"})),uiRightMenu.showProgress(cur.feedEls.rmenu)},switchSection:function(e,t,o){if(t&&(0,c.checkEvent)(t))return!0;if((0,u.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,"photos_search"==e&&!(0,E.trim)((0,u.val)(cur.feedEls.search))){if("photos_search"!=cur.section)return!1;e="photos"}"comments"==e&&(cur.reposts=cur.options.reposts=""),(0,v.statlogsValueEvent)("feed_switch",0,e),F.setSection(e,1);var i=F.getSectionParams(e||"news");delete cur.feedUpdateLoading,delete cur.isFeedLoading;var r=!o&&(0,E.extend)(i||{},{0:"feed"});return uiRightMenu.go((0,u.geByClass1)("feed_section_"+e),!1,r),!1},setSection:function(e,t,o){if(t=t||0,cur.prevSection=cur.section,!(e==cur.section&&t<2)&&e){if(uiRightMenu.hideProgress(cur.feedEls.rmenu),cur.feedEls.search&&uiSearch.hideProgress(cur.feedEls.search),t>1){Page.playVkFestBanner&&Page.playVkFestBanner(),(0,u.toggleClass)(cur.feedEls.wrap,"feed_submit_shown",inArray(e,cur.options.feed_types.tabs.concat(["list","likes"]))),(0,u.toggleClass)(cur.feedEls.wrap,"feed_submit_only_shown",~["recommended","search","updates","comments"].indexOf(e));var i=inArray(e,["articles_search","articles","search","photos_search","photos","trends","trends_search"]);(0,u.toggleClass)(cur.feedEls.wrap,"feed_search_shown",i),i&&(0,u.elfocus)(cur.feedEls.search),"search"===e&&o.stories_block_show?(0,u.addClass)(cur.feedEls.wrap,"feed_submit_shown_stories"):(0,u.removeClass)(cur.feedEls.wrap,"feed_submit_shown_stories"),cur.section&&(0,u.val)(cur.feedEls.search,"")}2==t&&window.Stories&&Stories.updateFeedStories(e,o),cur.my_feed_types&&(~indexOf(cur.my_feed_types.optional_tabs,cur.section)&&!~indexOf(cur.my_feed_types.tabs,cur.section)&&F.toggleTabsMenuTab(cur.section,!1),~indexOf(cur.my_feed_types.optional_tabs,e)&&!~indexOf(cur.my_feed_types.tabs,e)&&F.toggleTabsMenuTab(e,!0)),cur.section=e,4!=t?(cur.editingHide=("notifications"==e||"replies"==e)&&F.notifyCheckHideReply,cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()):F.searchUpdate()}},applyOptions:function(e,t){t=t||0,e.no_left_ads&&(cur.no_left_ads=!0),e.owner&&(cur.owner=e.owner),cur.subsection=e.subsection||"",F.setSection(e.section,t,e),cur.options||(cur.options={reply_names:{}}),(0,E.extend)(cur.options.reply_names,e.reply_names),delete e.reply_names,(0,E.extend)(cur,e);var o=cur.section;if("list"===cur.section&&(o="list"+e.list),cur.subsections[o]=cur.subsection,e.loc&&2==t&&nav.setLoc(e.loc),e.section&&"news"==e.section&&e.subsection&&"top"==e.subsection&&(0,v.statlogsValueEvent)("feed_switch",0,"top_news",t),void 0!==e.filters){var i=(0,u.ge)("search_filters_minimized"),r=i&&(0,u.hasClass)(i,"ui_rmenu_item_expanded"),s=!!i;(0,u.val)("feed_filters",e.filters),window.searcher&&s&&y.searcher.toggleMinimizedFilters((0,u.ge)("search_filters_minimized"),r,!0)}if(e.script&&(0,h.evalWithLogging)(e.script),e.htitle&&(cur.feedInitialTitle=document.title=(0,M.replaceEntities)(stripHTML(e.htitle))),void 0!==e.add_feed_queue&&null!==e.add_feed_queue?(cur.add_feed_queue=!1,e.add_feed_queue=!1,F.getNewQKey(0),!0!==e.add_queue&&(cur.add_queue=e.add_queue)&&setTimeout(F.update.pbind(0),0)):t&&"search"!=cur.section&&"news"!=cur.section&&cur.section&&(cur.add_feed_queue=!1,e.add_feed_queue=!1),e.add_queues&&(cur.add_queues=e.add_queues,setTimeout(F.update.pbind(0),0)),e.q){(0,u.val)(cur.feedEls.search,(0,M.replaceEntities)(e.q));var n=e.q;n.length>30&&(n=(0,E.trim)(n.substr(0,30))+"...")}e.last_view&&(cur.options.last_view=e.last_view),void 0!==e.feedback_list&&(cur.options.feedback_list=e.feedback_list),F.searchUpdate(),"comments"!=cur.section||cur.reposts||(0,u.toggle)("comments_filters",!cur.reposts),(0,M.isString)(cur.all_shown_text)&&(0,u.val)("all_shown",cur.all_shown_text),(0,M.isString)(cur.show_more_text)&&(0,u.val)("show_more_link",cur.show_more_text),cur.empty_text&&(0,u.val)("feed_empty",cur.empty_text),cur.count>=0&&(0,u.re)("feed_error_wrap");var a=!((0,u.geByClass1)("feed_row",cur.rowsCont,"div")||!1),_=(0,u.ge)("feed_rows_next");if(a?((0,u.toggleClass)(cur.feedEls.wrap,"feed_is_empty",!(0,u.isVisible)("feed_error_wrap")),(0,u.hide)("all_shown"),(0,u.toggle)("show_more_link",cur.count>0&&!cur.all_shown)):!cur.all_shown||_&&_.firstChild?((0,u.hide)("all_shown"),(0,u.show)("show_more_link"),(0,u.removeClass)(cur.feedEls.wrap,"feed_is_empty")):((0,u.hide)("show_more_link"),(0,u.show)("all_shown"),(0,u.removeClass)(cur.feedEls.wrap,"feed_is_empty"),(0,u.re)(_)),e.playlistsData&&(e.playlistsData=JSON.parse(e.playlistsData),cur.pageVideosList=(0,E.extend)(cur.pageVideosList||{},e.playlistsData)),("notifications"==cur.section||"replies"==cur.section)&&cur.notify){var c=(0,u.ge)("feedback_row"+cur.notify);c&&c.onclick&&(setTimeout((function(){c.onclick(),(0,l.scrollToY)((0,u.getXY)(c)[1],0)}),browser.msie?100:0),delete cur.notify)}cur.feedSection&&cur.feedSection(e.section,e.subsection)},showMore:function(){if(!cur.isFeedLoading){cur.disableAutoMore=!1;var e,t=(0,u.ge)("feed_rows_next");if(t){if(t.firstChild)for(;t.firstChild;)e=t.firstChild,cur.rowsCont.insertBefore(e,t),F.onPostLoaded(e,!0);(0,u.re)(t)}"live"==cur.section&&(cur.all_shown=!0);var o=(0,u.ge)("show_more_link");if(cur.all_shown&&((0,u.hide)(o),(0,u.show)("all_shown")),"live"!=cur.section){var r=!1,s=function(e){e.keyCode==c.KEY.ESC&&(r=!0)};(0,c.addEvent)(document,"keyup",s);var n=F.getSectionParams(cur.section||"news");(0,E.extend)(n,{offset:cur.offset,from:cur.from,part:1,more:1,last_view:cur.options.last_view}),(0,E.extend)(n,cur.navParams),cur.options.feedback_list&&(n.list=cur.options.feedback_list),nav.objLoc.situational_suggest_id&&(n.situational_suggest_id=nav.objLoc.situational_suggest_id);var a=cur.section;ajax.post("al_feed.php?sm_"+cur.section,n,{onDone:function(e,t){if((0,c.removeEvent)(document,"keyup",s),a==cur.section)if(r)cur.disableAutoMore=!0;else{if(t){var o,n=(0,u.ce)("div");for(n.innerHTML=t;o=n.firstElementChild;){var _,l=(0,K.shouldFilterPaginatedRow)({row:o});if(l.shouldFilter)console.info("Feed: skipping loaded row",o),n.removeChild(o),(0,i.randEnabled)(null!==(_=window.cur.feed_pagination_filtering_log_prob)&&void 0!==_?_:.01)&&(0,x.feedLogFilteredRow)({filterReason:l.filterReason,ref:F.getModuleRef(),row:o,rowsContainer:cur.rowsCont,section:cur.section});else cur.rowsCont.appendChild(o),F.onPostLoaded(o,!0)}}shortCurrency(),F.applyOptions(e),setTimeout(F.scrollCheck,200)}},showProgress:function(){(0,f.lockButton)(o),cur.isFeedLoading=!0},hideProgress:function(){if((0,f.unlockButton)(o),cur.isFeedLoading=!1,o.seen){var e=Math.ceil((Date.now()-o.seen)/1e3),t=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,v.statlogsValueEvent)("feed_load_more_seen_time",e,t),o.seen=!1}},cache:1})}}},showMoreFriends:function(e,t){(0,c.checkEvent)(t)||((0,f.lockButton)(e),cur._back.show.push((function(){(0,f.unlockButton)(e)})),nav.go("/friends?act=find"))},showMorePublics:function(e,t){(0,c.checkEvent)(t)||((0,f.lockButton)(e),cur._back.show.push((function(){(0,f.unlockButton)(e)})),nav.go("/groups?act=catalog&c%5Bcategory%5D=0 "))},getTypesSection:function(){return"owner"===cur.section?cur.owner>0?"person":"group":cur.section},checkFilter:function(e,t){var o,i=F.getTypesSection(),r=cur.my_feed_types[i],s=cur.feed_types[i];"notifications"!=i?(!0===r&&(r=(0,E.clone)(s)),-1!=(o=indexOf(r,t))?r.splice(o,1):(r.push(t),r.length==s.length&&(r=!0)),checkbox(e),cur.my_feed_types[i]=r,F.updateTypesCookie(),F.setFiltersUpdatePage(),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)):F.setNotifyFilter(e,t)},setFilter:function(e,t){var o=F.getTypesSection(),i=(0,u.ge)(o+"_type_filter"),r=!0;"notifications"!=o&&((0,E.each)((0,u.geByClass)("_feed_filter_row",i,"div"),(function(){if(isChecked(this)&&this!=e)return r=!1})),r?(cur.my_feed_types[o]=!0,(0,E.each)((0,u.geByClass)("_feed_filter_row",i,"div"),(function(){checkbox(this,!0)}))):((0,E.each)((0,u.geByClass)("_feed_filter_row",i,"div"),(function(){checkbox(this,!1)})),cur.my_feed_types[o]=[t],checkbox(e,!0)),F.updateTypesCookie(),F.setFiltersUpdatePage({force_expand_filters:1}),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu))},setFiltersUpdatePage:function(e){e=e||{};var t=nav.strLoc;if("updates"===cur.section){t.match(/\&filters\_expanded\=1/)||(0,u.ge)("updates_show_all_filters")&&!e.force_expand_filters||(t+="&filters_expanded=1"),t=t.replace(/\&filters\_shown\=([a-z\,]+)/,"");for(var o=(0,u.geByClass)("_feed_filter_row","feed_filters"),i=[],r=0;r<o.length;r++)(0,u.hasClass)(o[r],"hide")||i.push(o[r].id.replace("filter_updates",""));t+="&filters_shown="+i.join(",")}nav.go(t)},setNotifyFilter:function(e,t){checkbox(e),cur.notifyPrefs||(cur.notifyPrefs={}),cur.notifyPrefs[t]=isChecked(e),clearTimeout(cur.saveNotifyPrefsTO),cur.saveNotifyPrefsTO=setTimeout((function(){var e=[];(0,E.each)(cur.notifyPrefs,(function(t,o){e.push((o?"":"-")+t)})),e=e.join(","),ajax.post("/al_feed.php",{act:"a_set_notify_prefs",prefs:e,feed:1,hash:cur.topNotifyHash},{onDone:function(e){addTemplates({top_notify_prefs:e}),(0,u.toggleClass)("top_notify_pref_"+t,"checked",cur.notifyPrefs[t]),cur.notifyPrefs={},window.TopNotifier&&TopNotifier.invalidate(),nav.go(nav.strLoc),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)}})}),500)},updateTypesCookie:function(){var e=[];(0,E.each)(cur.my_feed_types,(function(t,o){"tabs"!=t&&e.push(!0===o?"*":o.join(","))})),(0,_.setCookie)("remixfeed",e.join("."),365)},toggleFeedTop:function(e,t,o){var i=(0,u.geByClass1)("_ui_toggler",e),r="top";switch((0,u.toggleClass)(i,"on"),cur.section){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"list":r=(0,u.hasClass)(i,"on")?"top":"recent";break;case"articles":r=(0,u.hasClass)(i,"on")?"suggested":"top";break;case"podcasts":r=(0,u.hasClass)(i,"on")?"recent":"top"}F.switchSubSection(r,t,o)},switchList:function(e){cur.prevList=cur.list,cur.list=e,F.setSection("list",1),uiRightMenu.go((0,u.geByClass1)("feed_section_list"+e),!1,!1),F.go(F.getSectionParams(cur.section))},setSearchSort:function(e){cur.search_sort_value=e,F.submitSearch()},_activateReplyBox:function(e,t,o){(t||{}).cancelBubble=!0;var i=(0,u.ge)("reply_box"+e);if(cur.editing&&cur.editing!=e&&cur.notifyReplyData&&cur.notifyReplyData[cur.editing].disabled&&F.notifyCheckHideReply(cur.editing,(window.event||{}).target),i&&(0,u.isVisible)(i))F.notifyCheckHideReply(e,!1);else if(void 0===cur.notifyReplyData&&(cur.notifyReplyData={}),cur.notifyReplyData[e]=o,o.disabled){i?(0,u.show)(i):(0,u.ge)("feedback_row"+e).appendChild((0,u.se)((0,u.rs)(cur.options.feedback_dis,{item:e,text:o.disabled}))),setTimeout((function(){cur.editing=e}),0)}else{(0,u.show)(i),Wall.showEditReply(e,t);var r=(0,u.ge)("reply_field"+e);r.setAttribute("placeholder",o.ph),window.Emoji&&Emoji.val(r,o.greet.replace(/ $/,"&nbsp;")),(0,u.data)(r,"send",F.notifySendReply),(0,u.removeClass)("reply_box"+e,"clear_fix")}},notifyClick:function(e,t,o){var i=(0,u.ge)("feedback_row"+e);Wall.checkPostClick(i,t)&&F._activateReplyBox(e,t,o)},blindNotifyReply:function(e,t,o){F._activateReplyBox(e,t,o)},notifySendReply:function(e,t,o){var i=cur.notifyReplyData[e];if(i&&!i.sending){var r,s=(0,u.ge)("reply_field"+e),n=(0,u.ge)("reply_button"+e),_=(0,u.ge)("feedback_row"+e),c=s&&(0,u.data)(s,"composer");if(o.stickerId)r={message:"",attach1_type:"sticker",attach1:o.stickerId};else{if((r=c?Composer.getSendParams(c,F.notifySendReply.pbind(e)):{message:(0,E.trim)(Emoji.editableVal(s))}).delayed)return;if(!r.attach1_type&&(!r.message||i.greet&&!i.greet.indexOf(r.message)))return void Emoji.editableFocus(s,!1,!0)}(0,E.extend)(r,{act:"post",from:"feedback",item:e},i.params||{});var l=(0,u.ge)("reply_as_group"+e);l&&(0,u.isVisible)((0,u.domPN)(l))&&(r.from_oid=(0,u.domData)((0,u.domClosest)("_submit_post_box",l),"from-oid")),i.sending=1,ajax.post("al_wall.php",Wall.fixPostParams(r),{onDone:function(t,o){if(delete i.sending,c?Composer.reset(c):window.Emoji&&Emoji.val(s,""),s.autosize&&s.autosize.update(),F.notifyHideReply(e),o){var r=(0,u.geByClass1)("_answer_wrap",_);(0,u.val)(r,o),(0,u.show)(r)}else t&&(0,a.showDoneBox)(t)},onFail:function(){delete i.sending},showProgress:f.lockButton.pbind(n),hideProgress:f.unlockButton.pbind(n)})}},notifyCheckHideReply:function(e,t){var o=cur.notifyReplyData&&cur.notifyReplyData[e];if(o&&!o.sending&&(0,u.isVisible)("reply_box"+e)){if(cur.editing=!1,!o.disabled){var i=(0,u.ge)("reply_field"+e),r=(0,E.trim)(window.Emoji?Emoji.editableVal(i):""),s=Wall.hasComposerMedia(i);if(!i||s||r&&!o.greet||o.greet.indexOf(r))return}F.notifyHideReply(e)}},notifyHideReply:function(e){cur.editing==e&&(cur.editing=!1);var t=(0,u.ge)("feedback_row"+e);(0,u.removeClass)(t,"reply_box_open"),(0,u.hide)("reply_box"+e);var o=cur.replySubmitSettings;o&&o.tt&&o.tt.el&&o.tt.destroy()},notifyPostTooltip:function(e,t,o,i){var r=(o||{}).reply,s="al_wall.php";t.indexOf("topic_comment")?t=t.replace("wall_reply","").replace("wall",""):(s="al_board.php",t=t.replace("topic_comment","")),i=i||{},(0,m.showTooltip)(e,(0,E.extend)({url:s,params:(0,E.extend)({act:"post_tt",post:t,self:1,from:"feedback"},o||{}),slide:15,shift:[!r||r%2?27:329,6],ajaxdt:100,showdt:400,hidedt:800,dir:"auto",className:"rich wall_tt wall_module _feed_notification feed_notification",appendParentCls:"scroll_fix_wrap"},i))},getModuleRef:function(){var e=cur.module||"feed_other";return"feed"==cur.module&&(e="news"==cur.section?cur.subsection?"feed_news_"+cur.subsection:"feed_news":"podcasts"===cur.section?e+"_"+cur.section+("recent"===cur.subsection?"_my":""):cur.section?e+"_"+cur.section:"feed_other"),e},ignoreItem:function(e,t,o,i,r){var s,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";switch(e){case I.BlockTypeIds.VideosForYou:case I.BlockTypeIds.VideoPostcard:case I.BlockTypeIds.PhotoRecognize:case I.BlockTypeIds.RecommendedNarratives:case I.BlockTypeIds.YoulaRecommendationsCarousel:case I.BlockTypeIds.AliExpressRecommendationsCarousel:s=(0,u.ge)(e);break;default:s=(0,u.ge)("post"+e)}if(s){var _=s.getAttribute("data-ad"),c=(0,u.geByClass1)("ui_actions_menu_wrap",s),l=F.getModuleRef();return c&&uiActionsMenu.toggle(c,!1),revertLastInlineVideo(s),t.includes("caption")?cur.feedEntriesHTML[e+"_ignored"]=(0,u.val)(s):cur.feedEntriesHTML[e]=(0,u.val)(s),new Promise(((c,d)=>{ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:e,feed_raw:t,caption_type:i,uids:r,hash:o,ad_data:_,ref:l,session_id:cur.feed_session_id,module:F.getModuleRef(),position:indexOf((0,u.domPN)((0,u.domPN)(s)).children,(0,u.domPN)(s)),reason_id:n,track_code:a},{onDone:function(e,t){F.destroyPhotoCarouselByPost(s),(0,u.val)(s,e),(0,h.evalWithLogging)(t),c()},onFail:()=>(d(),!0),stat:[window.jsc("web/privacy.js"),"privacy.css"]})}))}},unignoreItem:function(e,t,o,i){var r=F.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_item",post_raw:e,feed_raw:t,hash:o,ref:r},{onDone:function(){t.includes("caption")?(0,u.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):F.restorePost(e)},showProgress:i&&f.lockButton.pbind(i),hideProgress:i&&f.unlockButton.pbind(i)})},reportIgnoredItem:function(e,t){ajax.post("al_wall.php",{act:"spam",post:e,hash:t},{onDone:function(t){var o=(0,u.ge)("post"+e),i=o&&(0,u.geByClass1)("feed_post_report",o,"div");(0,u.val)(i,t)}})},ignoreOwner:function(e,t,o,i,r){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,u.val)("post"+e));var s="list"==cur.section&&cur.list||0,n=F.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,type:o,hash:i,list:s,ref:n},{onDone:function(o){(0,u.val)("post"+e,o),(0,E.each)((0,u.geByClass)("post",cur.rowsCont),(function(o,i){var r=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);r&&r[1]!=e&&(!r[4]&&r[2]==t||r[4]&&r[3]==t)&&(revertLastInlineVideo(this),(0,u.hide)(this.parentNode))}))},showProgress:()=>T.FlatButton.lock(r),hideProgress:()=>T.FlatButton.unlock(r)})},unignoreOwner:function(e,t,o,i){var r="list"==cur.section&&cur.list||0,s=F.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,hash:o,list:r,ref:s},{onDone:function(o){e?(0,u.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,u.val)("ignore_row"+t,o),(0,E.each)((0,u.geByClass)("post",cur.rowsCont),(function(e,o){var i=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);i&&(!i[4]&&i[2]==t||i[4]&&i[3]==t)&&(0,u.show)(this.parentNode)}))},showProgress:()=>T.FlatButton.lock(i),hideProgress:()=>T.FlatButton.unlock(i)})},ignoreGroupWall:function(e,t,o,i){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,u.val)("post"+e));var r=F.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,ignore_type:"group_wall",hash:o,ref:r},{onDone:function(t){(0,u.val)("post"+e,t)},showProgress:()=>T.FlatButton.lock(i),hideProgress:()=>T.FlatButton.unlock(i)})},unignoreGroupWall:function(e,t,o,i){var r=F.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,ignore_type:"group_wall",hash:o,ref:r},{onDone:function(o){e?(0,u.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,u.val)("ignore_row"+t,o)},showProgress:()=>T.FlatButton.lock(i),hideProgress:()=>T.FlatButton.unlock(i)})},ignoreLiveOwner:function(e,t,o,i){var r=(0,u.ge)("post"+e),s=(0,u.geByClass1)("ui_actions_menu_wrap",r);s&&uiActionsMenu.toggle(s,!1),revertLastInlineVideo(r),cur.feedEntriesHTML[e+"_ignored"]=(0,u.val)("post"+e),ajax.post("al_feed.php?act=a_ignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,u.val)("post"+e,t)},showProgress:i&&f.lockButton.pbind(i),hideProgress:i&&f.unlockButton.pbind(i)})},unignoreLiveOwner:function(e,t,o,i){ajax.post("al_feed.php?act=a_unignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,u.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"])},showProgress:i&&f.lockButton.pbind(i),hideProgress:i&&f.unlockButton.pbind(i)})},unsubscribe:function(e,t,o){(0,c.triggerEvent)((0,u.ge)("post_delete"+e),"mouseout"),cur.feedEntriesHTML[e]=(0,u.ge)("post"+e).innerHTML;var i=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);i&&ajax.post("al_feed.php",{act:"unsubscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[i[2]],owner_id:i[1],place_id:i[3],hash:t,feed:1},{onDone:function(t){(0,u.ge)("post"+e).innerHTML=t.replace("%post_raw%",e)},showProgress:o&&f.lockButton.pbind(o),hideProgress:o&&f.unlockButton.pbind(o)})},subscribe:function(e,t,o){var i=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);i&&ajax.post("al_feed.php",{act:"subscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[i[2]],owner_id:i[1],place_id:i[3],hash:t,feed:1},{onDone:F.restorePost.pbind(e),showProgress:o&&f.lockButton.pbind(o),hideProgress:o&&f.unlockButton.pbind(o)})},restorePost:function(e){var t;if(e===I.BlockTypeIds.PhotoRecognize)t=(0,u.ge)(e);else t=(0,u.ge)("post"+e);if(t){t.innerHTML=cur.feedEntriesHTML[e],F.initPhotoCarouselInPost(t);var o=(0,u.geByClass1)("input_back",t,"div"),i=(0,u.geByTag1)("textarea",t);i&&(i.placeholder=o.innerHTML,o.parentNode.removeChild(o),(0,p.placeholderSetup)(i))}},toggleReposts:function(e,t,o,i){if((0,c.checkEvent)(i))return!0;var r=(0,u.ge)("feed_reposts_more"+t+"_"+o),s=(0,u.ge)("feed_reposts"+t+"_"+o),n=0,a=(0,l.scrollGetY)(),_=(0,u.isVisible)(s);if(s)return _?n-=s.offsetHeight+(0,E.intval)((0,u.getStyle)(e,"marginTop")):((0,u.domPN)((0,u.domPN)(s))||{}).bits=0,(0,u.toggle)(s,!_),T.FlatButton.setLabel(r,_?getLang("news_show_X_reposts",s.childNodes.length):getLang("news_hide_reposts")),n&&(0,l.scrollToY)(a+n+(0,u.getSize)("page_header")[1],0),!1;r&&(0,u.re)(r.parentNode.parentNode)},editHidden:function(){return(0,g.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")]}),cur.onOListSave=F.onHiddenSave,!1},onHiddenSave:function(e,t,o,i){var r=(0,a.curBox)(),s={act:"a_ignore_olist",no_reposts:(0,u.ge)("feed_list_reposts")&&!isChecked("feed_list_reposts")?1:0,hash:i.hash};return e.length<t.length?s.White=e.join(","):s.Black=t.join(","),ajax.post("al_feed.php",s,{onDone:function(e,t){r.hide(),F.switchSection("photos"==cur.section?"photos":"news")},showProgress:f.lockButton.pbind(r.btns.ok[0]),hideProgress:f.unlockButton.pbind(r.btns.ok[0])}),!1},addList:function(){return F.editList(-1)},editList:function(e){return F.toggleTabsMenu(!1,0),(0,g.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",list_id:e,height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")],onFail:function(e){return setTimeout((0,g.showFastBox)({title:getLang("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},e,getLang("global_close")).hide,4500),!0}}),cur.onOListSave=F.onListSave.pbind(e),!1},onListSave:function(e,t,o,i,r){var s=(0,u.val)("feed_list_name");if(!(0,E.trim)(s))return(0,f.notaBene)("feed_list_name"),!1;if(!t.length)return!1;var n=(0,a.curBox)();return ajax.post("al_feed.php",{act:"a_save_list",hash:cur.tabs_hash,White:t.join(","),title:s,list_id:e,no_reposts:(0,u.ge)("feed_list_reposts")&&!isChecked("feed_list_reposts")?1:0},{onDone:function(t){var o=(0,u.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu),i=(0,u.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu);(0,u.val)(o,(0,E.clean)(s)),(0,u.val)((0,u.geByClass1)("ui_actions_menu_item_label",i),(0,E.clean)(s)),n.hide(),e>0?F.switchList(e):nav.go({0:"feed",section:"list",list:t},null,{nocur:!0})},onFail:function(e){return(0,u.val)("feed_list_error",e),(0,u.show)("feed_list_error_wrap"),!0},showProgress:f.lockButton.pbind(n.btns.ok[0]),hideProgress:f.unlockButton.pbind(n.btns.ok[0])}),!1},deleteList:function(e,t,o,i){if(i&&(0,c.cancelEvent)(i),e<=0)return!1;if(o){var r=(0,a.curBox)();ajax.post("al_feed.php",(0,E.extend)({act:"a_delete_list",list_id:e,hash:cur.tabs_hash}),{onDone:function(){(0,u.re)((0,u.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu)),(0,u.re)((0,u.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu)),boxQueue.hideAll(),"list"==cur.section&&cur.list==e&&F.switchSection("news")},showProgress:f.lockButton.pbind(r.btns.ok[0]),hideProgress:f.unlockButton.pbind(r.btns.ok[0])})}else{F.toggleTabsMenu(!1,0);var s=(0,g.showFastBox)({title:getLang("news_delete_list_sure_title"),bodyStyle:"padding: 20px; line-height: 160%;"},getLang("news_delete_list_sure").replace("{list}",t),getLang("global_delete"),(function(){F.deleteList(e,t,!0)}),getLang("global_cancel"),(function(){s.hide()}))}},saveTabs:function(){ajax.post("al_feed.php",{act:"a_save_tabs",hash:cur.tabs_hash,tabs:cur.my_feed_types.tabs.join(",")},{hideProgress:function(){(0,M.isFunction)(cur.onSaveTabs)&&cur.onSaveTabs(),cur.onSaveTabs=null}})},statsShow:function(e,t){return(0,n.showWiki)({w:"stats"+(cur.source||"")},!1,e)},editLiveBlacklist:function(e){(0,c.cancelEvent)(e),(0,g.showBox)("al_video.php?act=live_blacklist_box",{},{onDone:function(e,t){D.default.init(e,t)},stat:["videoview.js","videoview.css",window.jsc("web/indexer.js")]})},scrollCheck:(0,O.debounce)((function(e){if("scroll"==(e=e||{}).type||cur.idleManager&&!cur.idleManager.isIdle){var t,o,i,r,s,n,a=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight,_=(0,l.scrollGetY)(),c=0,h=[];if(!cur.isFeedLoading&&!cur.disableAutoMore){var p=(0,u.ge)("show_more_link");(0,u.isVisible)(p)&&_+a+1e3>p.offsetTop&&F.showMore()}if((0,u.domPN)(cur.topRow)==cur.rowsCont&&"feed_rows_next"!=(cur.topRow||{}).id||(cur.topRow=(0,u.domFC)(cur.rowsCont)),vk.id&&cur.topRow&&"feed_rows_next"!=cur.topRow.id&&(!((window.curNotifier||{}).idle_manager||{}).is_idle||"init"==e.type)){var g=[];for(r=(0,u.domPS)(cur.topRow);r;r=(0,u.domPS)(r))cur.topRow.offsetTop>_&&(cur.topRow=r),r.unseen||(r.unseen=!0,g.push((0,R.postsGetRaws)(r)),(0,R.isAdWithShowOff)(r)&&Wall.triggerAdStat((0,u.domFC)(r),"show_off"));for(Page.postsUnseen(g),r=cur.topRow;r&&!((t=c||r.offsetTop)>=_+a);r=s)if("feed_rows_next"==((s=(0,u.domNS)(r))||{}).id&&(s=null),(c=s?s.offsetTop:t+r.offsetHeight)<_&&s&&(cur.topRow=s),LongView&&LongView.register(r,"feed"),A.longView.registerElement(r),!((n=r.bits||0)>=3)){var m,E;if(cur.feedSeenPostHeight>0)cur.feedPostHeaderHeight=cur.feedPostHeaderHeight||(0,u.getH)(null===(m=r)||void 0===m||null===(E=m.querySelector)||void 0===E?void 0:E.call(m,".post_header, .js-PostHeader")),i=(o=t+cur.feedPostHeaderHeight)+cur.feedSeenPostHeight,r.postBottom||(r.postBottom=o+(0,u.getH)((0,u.geByClass1)("wall_text",r))),n|=(o>=_&&o<_+a?1:0)|((i=Math.min(i,r.postBottom))>=_&&i<_+a?2:0);else n|=(t>=_&&t<_+a?1:0)|(c>=_&&c<_+a?2:0);if(n&&(r.bits=n,3==n)){var w=(0,R.postsGetRaws)(r);if((0,R.isAdWithLongImpressionOnly)(r)||(0,R.isAutoplayAd)(r)?Wall.triggerAdStat((0,u.domFC)(r),"impression"):h.push(w),(0,u.hasClass)(r,"feed_to_recomm"))(0,v.statlogsValueEvent)("promo_button_view_blocks",w.index,w.module);else if((0,u.geByClass1)("VideosForYouGallery",r)){var C;null===(C=window.FeedVideosForYou)||void 0===C||C.viewBlock()}else if((0,u.geByClass1)("FeedVideoPostcard",r)){var y;null===(y=window.FeedVideoPostcard)||void 0===y||y.viewBlock()}else(0,u.geByClass1)("feed_friends_recomm",r)?function(){var e=(0,u.geByClass1)("ui_gallery",r),t=(0,u.domData)(e,"from"),o=(0,u.domData)(e,"code")||"";(0,b.friendsRecommLogSave)(["view_block",t,w.index,(0,M.vkNow)(),w.module,o],!0);var i=(0,d.uiGetGallery)(e);i&&i.getVisibleItems().forEach((function(e){(0,b.onViewFriendRecomm)(e[0],e[1],t)})),e.visible=!0}():(0,u.geByClass1)("js-feed_groups_recomm",r)?(0,P.feedInitialViewRecommendedGroupsTrigger)(r):r.querySelector("#feed_mini_apps_recomm")&&window.RecommendedMiniApps.viewBlock()}}h=h.concat(A.longView.process(_,a)),LongView&&LongView.onScroll(_,a),Page.postsSeen(h);var T=(0,u.ge)("show_more_link"),O=T.offsetTop;if(!T.seen&&O>=_&&O<_+a){T.seen=Date.now();var D=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,v.statlogsValueEvent)("feed_load_more_seen",(0,f.isButtonLocked)(T),D)}}}}),20),searchUpdate:function(){var e;cur.feedEls.search&&getLang("news_search")&&(e=cur.section.indexOf("photos")?cur.section.indexOf("articles")?getLang("news_search"):getLang("news_articles_search"):getLang("news_photo_search"),cur.feedEls.search.setAttribute("placeholder",(0,E.clean)((0,M.unclean)(e))),(0,p.placeholderInit)(cur.feedEls.search,{reload:!0}))},go:function(e,t,o){if(e=e||{},cur._back_local){var i=cur._back_local;i.back?(0,s.showBackLink)(i.back[0],i.back[1],i.back[2]):(0,s.showBackLink)(!1),cur._back_local=!1}if(cur.feedReq)try{cur.feedReq.abort()}catch(e){debugLog(e)}cur.feedReqObj=null;var n=1,a=function(){cur.isFeedLoading=!1};(browser.msie||o)&&(n=!1,a=cur.onFrameBlocksDone),cur.wasScroll=!!o&&(0,l.scrollGetY)();var _=window.event&&window.event.target;if(_&&"search"===e.section&&!e._post){var c=nav.getPostParams(_);if(c.post_id&&c.post_click_type){function t(t,o){t&&!e[o]&&(e[o]=t)}t(c.post_id,"_post"),t(c.post_click_type,"_post_click_type"),t(c.post_click_url,"_post_click_url"),t(c.post_click_mention_id,"_post_click_mention_id"),t(c.post_click_cc_key,"_post_click_cc_key"),t(c.ad_data,"_post_ad_data"),t(c.ad_block_unique_id,"_post_ad_block_unique_id")}}var d=cur.feedReqObj={},p={},f=0,g=()=>{if(cur.feedReqObj&&cur.feedReqObj===d&&!(++f>500)){var e=!0,t={};(0,E.each)(p,(function(o){var i=(0,u.ge)(o);if(i&&(0,u.hasClass)(i,"feed_row"))return i.firstChild?void F.onPostLoaded(i,!0):(t[o]=!0,void(e=!1))})),e||(p=t,setTimeout(g,100))}},m=+new Date;cur.feedReq=ajax.post("al_feed.php",(0,E.extend)(e,{part:1}),{onDone:function(o,i,s,a,_){if(revertLastInlineVideo(),(0,u.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,window.tooltips&&tooltips.destroyAll((0,u.ge)("feed_rows")),boxQueue.hideAll(),layers.fullhide&&!cur.storyLayer&&layers.fullhide(!0),n&&ajax._framenext(),window.wall&&Wall.cancelEdit(),boxQueue.hideAll(),t?t(i||""):(0,u.val)(cur.rowsCont,i||""),F.applyOptions(o,2),!e.norecom&&"notifications"!==e.section){(0,u.val)("feed_recommends",o.recommends||""),(0,u.toggle)("feed_recommends",!!o.recommends);var c="/al_feed.php#"+AjaxConvert.toQueryString({act:"recom"});ajaxCache[c]&&delete ajaxCache[c],(0,u.toggleClass)(cur.feedEls.wrap,"feed_asc_shown",(0,u.geByClass1)("feed_asc_block","feed_recommends"))}var d;if(s&&(0,h.evalWithLogging)(s),(0,r.checkPageBlocks)(),(0,l.scrollToTop)(0),shortCurrency(),cur.feedEls.wall)switch(d="clear_fix",cur.section){case"updates":d+=" page_block feed_updates";break;case"photos_search":d+=" page_block feed_found_photos";break;case"notifications":d+=" page_block feed_notifications";break;case"coronavirus":case"stayhome":d+=" feed_wall--with-header"}if((0,u.ge)("feed_wall").className=d,(0,u.toggle)("feed_recommends",inArray(cur.section,["news","recommended","videos"])),(0,u.val)("feed_app_widget",a||""),(0,u.toggle)("feed_app_widget",a),a&&_&&(0,h.evalWithLogging)(_),cur.rowsCont&&cur.rowsCont.children&&((0,E.each)(cur.rowsCont.children,(function(){var e=this;(0,u.hasClass)(e,"feed_row")&&(!e.id||e.firstChild?F.onPostLoaded(e,!0):p[e.id]=!0)})),(0,M.isEmpty)(p)||setTimeout(g,10)),cur.q){var f="photos_search"===cur.section?v.servicePhotos:v.serviceNews,w=+new Date-m;(0,v.saveSearchAttemptStats)(f,0,cur.count,(0,u.val)(cur.feedEls.search),0,0,w),(0,S.updateCounters)(location.href,document.referrer)}setTimeout(F.scrollCheck,200)},onFail:function(){return!1},showProgress:function(){cur.isFeedLoading=!0},frame:n,ads:1,hideProgress:a})},onFeedSearch:function(e,t,o,i){t||(0,v.removeSearchPositionTracker)("photos");var r,s,n=i||cur.section;if(n.indexOf("photos")?n.indexOf("trends")?n.indexOf("articles")?(r="search",s="news"):(r="articles_search",s="articles"):(r="trends_search",s="trends"):(r="photos_search",s="photos"),"search"==r||F.hasSearchParams(F.getSectionParams(r))){r!=cur.section&&F.setSection(r,1);var a=F.getSectionParams(r);cur.disableSort&&(a.disable_sort=1),F.go(a),window.searcher&&y.searcher.highlightHotHashtag(t||(0,u.val)(e))}else F.go(F.getSectionParams(s));uiSearch.onChanged(e),uiSearch.showProgress(e)},onSearchChange:function(){return setTimeout(F.onFeedSearch.pbind(cur.feedEls.search),0),!1},init:function(e){var t,o,i,r;setTimeout((function(){(0,E.each)((0,u.geByTag)("textarea",cur.rowsCont),(function(){(0,p.placeholderSetup)(this)})),cur.q&&(0,v.saveSearchAttemptStats)("photos_search"===cur.section?v.servicePhotos:v.serviceNews,0,cur.count,(0,u.val)(cur.feedEls.search))}),200),(0,E.extend)(cur,{oid:e.user_id,postTo:e.user_id,phCache:{},phShown:{},subsections:{},feed_session_id:e.feed_session_id||"na",module:"feed",isFeedLoading:!1,customSearchChange:F.onSearchChange,navParams:e.nav_params||{},wallPostCb:function(){"news"==cur.section?setTimeout(F.update.pbind(1),1e3):setTimeout(F.switchSection.pbind("news"),1e3)},idleManager:(r={isIdle:!1,onIdle:null,onUnIdle:null,stop:function(){(0,c.removeEvent)(document,"mousemove keydown",t),(0,c.removeEvent)(window,"focus blur",i)},start:function(){browser.mobile||(t=function(){cur.idleManager&&r.isIdle&&(r.isIdle=!1,r.onUnIdle&&r.onUnIdle())},o=function(){cur.idleManager&&(r.isIdle=!0,r.onIdle&&r.onIdle())},i=function(e){"focus"==e.type?t():o()},(0,c.addEvent)(window,"focus blur",i))}},r),currentModule:function(){return"videos"==cur.section?"feed_videos":cur.module},onFrameBlocksDone:function(){cur.isFeedLoading=!1,(0===cur.wasScroll||cur.wasScroll>0||!1===cur.wasScroll&&"search"==cur.section&&cur.q&&"#"==cur.q.substr(0,1))&&(cur.wasScroll=!1)},feedEntriesHTML:{},feedUnreadCount:0,feedInitialTitle:"",feedUnread:[],feedToSort:[],feedEls:{wrap:(0,u.ge)("main_feed"),wall:(0,u.ge)("feed_wall"),search:(0,u.ge)("search_query"),rmenu:(0,u.ge)("feed_rmenu"),newPosts:(0,u.ge)("feed_new_posts")}}),cur.nav.push((function(e,t,o,i){if(void 0===e[0]){var r=(0,E.clone)(o);if(delete r[0],void 0===e.section||inArray(cur.section,["notifications","replies"])==inArray(e.section,["notifications","replies"])){if("notifications"==cur.section)return F.switchNotifyList(o.list||"all",(0,E.extend)(r,i.params||{})),!1;if(e.list)return F.switchList(e.list),!1;if(void 0!==e.section&&F.switchSection(e.section||"news",!1,!0),e.notify)return!1;if(e.q)return(0,u.val)(cur.feedEls.search,e.q),F.onFeedSearch(cur.feedEls.search),!1;if(delete e.subsection,(0,M.isEmpty)(e)){var s=(0,u.geByClass1)("feed_section_"+(t.section||"news")+(t.list||""));s&&uiRightMenu.go(s,!1,!1)}return cur.likesTabTT&&cur.likesTabTT.destroy(),F.go((0,E.extend)(r,i.params||{})),!1}}})),cur.idleManager.onUnIdle=F.updateTitle,cur.idleManager.onIdle=F.reSortItems,cur.options=cur.options||{},(0,E.extend)(cur.options,e),F.applyOptions(e,3),cur.rowsCont=e.wallCont=(0,u.ge)("feed_rows"),Wall.init(e),cur.rowsCont&&cur.rowsCont.children&&(0,E.each)(cur.rowsCont.children,(function(){var e=this;(0,u.hasClass)(e,"feed_row")&&e.firstChild&&F.onPostLoaded(e,!0)})),cur._back={text:getLang("news_return_to_news"),show:[F.startEvents],hide:[function(){clearInterval(cur.updateInt),(0,c.removeEvent)(window,"scroll",F.scrollCheck),(0,c.removeEvent)(window,"resize",F.scrollCheck),cur.idleManager.stop(),clearTimeout(cur.lp_error_to)}],loc:!1},F.startEvents(),(0,b.friendsRecommLogSend)(!0),setTimeout((function(){F.scrollCheck({type:"init"})}),200)},startEvents:function(){cur.idleManager.start(),cur.updateInt=setInterval((function(){F.update(0)}),2e4),(0,c.addEvent)(window,"scroll",F.scrollCheck),(0,c.addEvent)(window,"resize",F.scrollCheck)},mentionClick:function(e,t){var o=e,i=((e.getAttribute("mention")||"").match(/^bp(-?\d+_\d+)$/)||{})[1];if(!i)return nav.go(e,t);for(i=i.split("_");e;e=e.parentNode){var r=(e.id||"").match(/^replies(-?\d+_topic\d+)$/);if(r){if(r[1].split("_")[0]==i[0])return Wall.showReply(o,r[1],i[0]+"topic_"+i[1],t);break}}return nav.go(e,t)},toggleCustomFeedTab:function(e,t){return(0,u.hasClass)(e,"feed_tab_link_hidden")?((0,u.removeClass)(e,"feed_tab_link_hidden"),(0,_.setCookie)("remixcustom_feed_added",t)):(0,f.lockButton)(e),F.checkTabsFilter((0,u.geByClass1)("_feed_custom_"+t),t)},recomSubscribe:function(e,t,o){var i,r,s=o?t:(0,u.domPS)(t),n=o?(0,u.domNS)(t):t;o?(i="/al_feed.php",r={act:"subscr",oid:e,from:nav.objLoc.section,hash:(0,u.val)("feed_recom_hash")}):(i="/al_fans.php",r={act:"unsub",oid:e,hash:(0,u.val)("feed_recom_hash"),no_response:1}),ajax.post(i,r,{onDone:function(){(0,u.toggle)(s,!o),(0,u.toggle)(n,!!o),"recommended"!=nav.objLoc.section&&nav.go(nav.objLoc,!1,{params:{norecom:1}})},showProgress:f.lockButton.pbind(t),hideProgress:f.unlockButton.pbind(t)})},clickBlogReminder:function(e,t,o,i,r,s){if(ajax.post("blog.php",{act:"click_reminder",hash:i,nid:t,accept:1,target:s},{onDone:function(){}}),"_blank"!==(0,u.attr)(e,"target"))return(0,c.cancelEvent)(r),nav.go(o)},hideBlogReminder:function(e,t,o,i){o&&(0,c.cancelEvent)(o),(0,u.re)("feed_blog_reminder"),ajax.post("blog.php",{act:"hide_reminder",hash:e,nid:t,accept:0,target:i},{onDone:function(){}})},preloadVideos:function(e){function t(e){var t=new XMLHttpRequest;t.open("GET",e),t.send()}e&&cur.videoAutoplayScrollHandler&&(cur.videoAutoplayPreloaded=cur.videoAutoplayPreloaded||{},(0,E.each)(e,(function(e,o){t(o.index_url),t(o.index_url.replace(/index-(.+).m3u8/,"seg-1-$1.ts")),cur.videoAutoplayPreloaded[o.video]=o.quality})))},expandJoinedGroups:function(e,t){return(0,c.cancelEvent)(t),(0,u.show)((0,u.geByClass1)("feed_groups_hidden_list",e.parentNode)),(0,u.re)(e),!1},showAllFilters:function(e){(0,u.re)(e);for(var t=(0,u.geByClass)("hide",e.parentNode),o=0;o<t.length;o++)(0,u.removeClass)(t[o],"hide")},toggleSubscription:function(e,t,o,i,r){var s=(0,u.domClosest)("_ui_menu_wrap",e);s&&uiActionsMenu.toggle(s,!(0,u.hasClass)(s,"shown")),Page.toggleSubscription(e,t,o,i,r,(function(e,t){(0,u.geByClass)("post",cur.rowsCont).forEach((function(o){var r=o.id.split("_"),s=+r[r.length-2].replace("post","");if(i===s){var n=(0,u.geByClass1)("page_action_subscribe",o);(0,u.val)(n,e),(0,u.domData)(n,"act",t)}}))}))},logBlockInteraction:function(e,t,o){var i=indexOf((0,u.domPN)(e).children,e);(0,v.statlogsValueEvent)("block_interaction",i,t,o)},onPostLoaded:function(e,t){var o=(0,u.geByClass1)("friends_recomm_gallery",e);o&&(0,b.friendsRecommInit)(o,{checkViewItem:function(){return o.visible},onDestroy:function(){(0,u.re)(e)}}),Wall.onPostLoaded(e,t),this.initPrettyCardGallery(e),t&&!(0,u.hasClass)(e,"_post")&&F.initPhotoCarouselInPost((0,u.geByClass1)("_post",e))},openPostSuggest:function(e,t,o){if(t&&null!=t.type)switch(t.type){case 1:var i=t.postData,r=t.notHideByClick,s=(0,u.ge)("post_field");return void((s?(0,E.trim)(s.innerHTML).replace("<br>",""):"")||cur.wallAddMedia&&cur.wallAddMedia.attachCount()?(0,g.showFastBox)({title:getLang("news_suggest_alert_title"),dark:1},getLang("news_suggest_alert_text"),getLang("global_yes"),(function(){(0,a.curBox)().hide(),n(i,r)}),getLang("global_cancel")):n(i,r));case 4:return window.open(t.link),void F.suggestionEvent(e,"open",o,t.notHideByClick)}function n(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(),cur.options&&(cur.options.situational_suggest_id=e),t[0]=t[0].replace(/<br>/g,"\n");var r=cur.editing;delete cur.editing,Wall.setDraft(t),F.suggestionEvent(e,"open",o,i),cur.editing=r}},suggestionEvent:(e,t,o,i)=>(ajax.post("al_feed.php",{act:"suggestion_event",suggest_id:e,event_type:t,not_hide_by_click:(0,E.intval)(i)}),i||(0,u.re)((0,u.geByClass1)("_post_suggest")),(0,c.cancelEvent)(o)),closePostSuggest(e,t,o){F.suggestionEvent(e,t,o,!1)},hideRightBlock:function(e,t,o){var i=(0,u.domCA)(e,".page_block");return(0,u.re)(i),ajax.post("al_feed.php",{act:"a_hide_right_block",block_type:t,app_id:e.dataset.app_id||0,hash:o}),!1},initPrettyCardGallery:function(e){if(!(0,u.geByClass1)("pretty-cards",e))return!1;window.PrettyCardGallery&&new PrettyCardGallery(e)},initPhotoCarouselInPost(e){if(e){var t=(0,B.initPhotoBlockInPost)(e,F.sendPhotoCarouselEvent.bind(F));(0,u.data)(e,"photo_carousel",t),window.cur.destroy.push((()=>{(0,u.removeData)(e,"photo_carousel")}))}},destroyPhotoCarouselByPost(e){var t=(0,u.data)(e,"photo_carousel");t&&t.destroy()},sendPhotoCarouselEvent(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t){var i=t.querySelector(".post_img"),r=i&&i.getAttribute("data-post-id");if(r){var s,n,a=r.match(/(-?\d+)_p(\d+)/);if(a&&a[1]&&a[2]){s=a[1],n=a[2];var _=t.getAttribute("data-photo-raw-id"),c=t.getAttribute("data-pseudopost-type"),l=t.getAttribute("data-post-creation-timestamp");if(!_&&"photo_group"===c&&o){var d=o.target;if(d&&d.href){var u=d.href.match(/\/photo(-?\d+_\d+)/);_=u&&u[1]}}var h={event_type:e,content_type:c,post_owner_id:s,post_id:n,photo_raw_id:_,timestamp:l,ref:F.getModuleRef()};(0,v.statlogsValueEvent)("feed_new_carousel_stat",h)}}}},disablePhotoRecognizeBlock(e){var t=document.getElementById(`${I.BlockTypeIds.PhotoRecognize}`);t&&(cur.feedEntriesHTML[`${I.BlockTypeIds.PhotoRecognize}_ignored`]=(0,u.val)(t),ajax.post("al_feed.php",{act:"disable_recognize_block",hash:e},{onDone:e=>{(0,u.val)(t,e)}}))},enablePhotoRecognizeBlock(e){var t=document.getElementById(`${I.BlockTypeIds.PhotoRecognize}`);t&&ajax.post("al_feed.php",{act:"enable_recognize_block",hash:e},{onDone:()=>{(0,u.val)(t,cur.feedEntriesHTML[`${I.BlockTypeIds.PhotoRecognize}_ignored`])}})}}},801681:(e,t,o)=>{o.d(t,{longView:()=>a});var i=o(905998),r=o(315544),s=o(695724),n={tracking:[],viewed:{}},a={process:(e,t)=>{var o=n.tracking,a=n.viewed;if(0===o.length)return[];var _=[];return(0,s.each)(o,(function(o,n){var c=(0,r.domFC)(n),l=c.id;if(c&&l){var d=(0,r.domData)(c,"ad-block-uid"),u=""+l;if(d&&(u+="_"+d),!a[u]&&document.body.contains(n))if((0,i.isElemViewable)(n,.5,e,t)){var h=Date.now();n.longViewStartedAt?h-n.longViewStartedAt>=1e3&&(a[u]=!0,_.push((0,s.extend)({},(0,i.postsGetRaws)(n),{long:1}))):n.longViewStartedAt=Date.now()}else n.longViewStartedAt=null}})),_},registerElement:e=>!!e&&(!!e.longViewTracking||!e.longViewRegistered&&(e.longViewRegistered=!0,e.longViewTracking=(0,i.isAutoplayAd)(e)||(0,i.isAdWithLongImpression)(e)||(0,i.isAdWithLongImpressionOnly)(e),!!e.longViewTracking&&(n.tracking.push(e),!0)))}},434010:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{evalWithLogging:()=>evalWithLogging});var _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(787481),evalWithLogging=evalString=>{try{return eval(evalString)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__.logEvalError)(e,evalString)}}},667784:(e,t,o)=>{o.d(t,{addDelegateEvent:()=>c,removeDelegateEvent:()=>l});o(530522),o(66108),o(579665),o(95767),o(991181),o(296253),o(751876);var i=o(315544),r=o(49535);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var o=[],i=!0,r=!1,s=void 0;try{for(var n,a=e[Symbol.iterator]();!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(o);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var a=new window.Map;function _(e){var t=a.get(e.currentTarget);if(t){var o=t[e.type];if(o)for(var r,n=0;n<o.length;n++){var _=s(o[n],2),c=_[0],l=_[1],d=void 0;if((0,i.hasClass)(e.target,c)?d=l(e,e.target):(r=(0,i.gpeByClass)(c,e.target,e.currentTarget))&&(d=l(e,r)),!1===d)break}}}function c(e,t,o,i,s){var n=a.get(e);n||(a.set(e,{}),n=a.get(e));for(var c=t.split(" "),l=0;l<c.length;l++){var d=c[l];n[d]||(n[d]=[],s?(0,r.addEvent)(e,d,_,!1,!1,s):(0,r.addEvent)(e,d,_)),n[d].push([o,i])}}function l(e,t,o,i){var s=a.get(e);s&&(t.split(" ").forEach((t=>{s[t]&&(s[t]=s[t].filter((e=>e[0]!==o||e[1]!==i)),0===s[t].length&&(0,r.removeEvent)(e,t,_))})),0===Object.keys(s).map((e=>s[e].length)).reduce(((e,t)=>e+t))&&a.delete(e))}},148298:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{searcher:()=>searcher,iSearch:()=>iSearch});var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(991181),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(579665),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(95767),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(530522),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(66108),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(296253),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(21466),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(695724),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(635429),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(479957),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(850167),_web_lib_fx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(635676),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(803834),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(49535),_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(460615),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(787481),_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(315544),_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(386409),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(654612),_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(786067),_shared_lib_common__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(40906),_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(364904),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(376852),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(533304),_web_ecomm_market_MarketSearchBanner_utils_hideFeaturing__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(699995);function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,s=!0,n=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){n=!0,r=e},f:function(){try{s||null==i.return||i.return()}finally{if(n)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var sectionAuto="auto",sectionAudio="audio",sectionVideo="video",sectionClips="clips",sectionStatuses="statuses",sectionPeople="people",sectionCommunities="communities",sectionMiniApps="mini_apps",sectionQuick="quick",moduleEmpty=void 0,moduleFriends="friends",moduleGroupsCatalog="groups_catalog",moduleGroupsRecommendations="groups_recommendations",paramQuery="c[q]",paramSection="c[section]",paramCategory="c[category]",paramSort="c[sort]",paramPhoto="c[photo]",paramInvite="c[invite]",paramSkipCatalog="c[skip_catalog]",paramHd="c[hd]",paramGroupsRecommendationsModel="c[need_groups_recommendations_model]",paramFrom="c[from]",paramBlockPosition="c[block_position]",searcher={init(e){var t=globalHistory.length;t&&globalHistory[t-1]&&globalHistory[t-1].loc.indexOf("search")?cur.search_return_to=globalHistory[t-1].loc:cur.search_return_to="/",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)("header");var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_query");if(!(o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.data)(o,"opts")||{}).isNew){var i=window.iSearch;i.destroy(),vk.id&&i.init(o,e)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.elfocus)(o),"search"===nav.objLoc[0]&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(cur,{oid:e.user_id,module:"search"}),cur.nav.push(((e,t,o)=>{if(void 0!==e[0]||cur.searchLoc&&void 0!==e.act)return clearTimeout(cur.setLocTO),void(nav.strLoc!==cur.loc&&cur.loc&&hab.setLoc(cur.loc));if(cur.searchLoc){var i=!1;for(var r in o)if("c["===r.substr(0,2)){i=!0;break}if(cur.onLocationChange&&cur.onLocationChange(i),!i)return!0}var s=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(o);delete s[0];var n=s[paramSection]||s.section||sectionQuick;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_menu")&&uiRightMenu&&uiRightMenu.switchMenu((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)(`search_menu_${n}`,"search_menu")),searcher.setSection(n),searcher.sendSearchReq(s,!0),!1}))),cur.options||(cur.options={reply_names:{}}),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(cur.options,e),searcher.applyOptions(e),o.ignoreFixed=cur.section==sectionStatuses,window.scrollTop=bodyNode.scrollTop=pageNode.scrollTop=htmlNode.scrollTop=0,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"resize",searcher.onResize),setTimeout(searcher.scrollCheck,50),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_8__.checkPageBlocks,200);var r=window.audioPlayer;r&&r.showCurrentTrack&&r.showCurrentTrack(),cur._back={text:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("search_back_to"),show:[()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)("header");var t=globalHistory.length;t&&globalHistory[t-1]&&globalHistory[t-1].loc.indexOf("search")&&(cur.search_return_to=globalHistory[t-1].loc),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"resize",searcher.onResize);var o=window.iSearch;o.destroy(),vk.id&&o.init((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_query"),e)}],hide:[()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(window,"resize",searcher.onResize),window.iSearch.destroy()}]},cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_23__.cutTextToHighlight)(".labeled__searchServicesDesc"),this.logSearch(cur.params,e)},sendSearchReq(e,t){if(cur.searchReq)try{cur.searchReq.abort()}catch(e){debugLog(e)}t&&!e.offset&&(vk.no_ads=inArray(e[paramSection],[sectionAudio]),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(e,{uf:1})),void 0!==cur.useRec&&(e.rec=cur.useRec,delete cur.useRec),e.edit=nav.objLoc.edit,e.sign=nav.objLoc.sign,e.all=nav.objLoc.all,e.change=1,cur.searchLoc&&(e.search_loc=cur.searchLoc),void 0!==cur.topType&&(e.type=cur.topType,delete cur.topType);var o=window.iSearch;o&&o.select&&(o.select.hide(),delete cur.setISearch),cur.loadingMedia||(uiSearch.showProgress("search_query"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_query").ignoreFixed=e[paramSection]==sectionStatuses),nav.objLoc.from&&(e.from=nav.objLoc.from);var i=this.removeLogClickHandlers,r=this.logSearch;e.act="search_request",e.module=cur.module;var s=+new Date;cur.searchReq=ajax.post("al_search.php",e,{onDone(o,n,a,_){window.cur.onSearchOrSectionChange&&window.cur.onSearchOrSectionChange.forEach((e=>e())),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(document.querySelector(".search_seo_info"));var c=e.uf&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("results_wrap")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("results_wrap"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("results"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("friends_filters_block")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("friends_filters_block"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("filter_form");if(c.innerHTML=n||"",t&&(l&&(l.innerHTML=a||""),c.setAttribute("style",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.elfocus)("search_query")),o.loc){var d=`${locProtocol}//${location.host}/${o.loc}`,u=document.URL===d?"":document.URL;setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_22__.updateCounters.pbind(d,u),10)}searcher.applyOptions(o,t),uiSearch.hideProgress("search_query"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)("search_clear_params");var h=window.audioPlayer;h&&h.showCurrentTrack&&h.showCurrentTrack(),cur.onSearchFinish&&cur.onSearchFinish(),shortCurrency(),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_8__.checkPageBlocks,200),cur.onSearchDone&&cur.onSearchDone(),i();var p=+new Date-s;o.query_duration=o.query_duration||p,r(e,o)},onFail:()=>(uiSearch.hideProgress("search_query"),!0),showProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!0},hideProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!1,cur.loadingMedia=!1},ads:!(!t||e.offset)})},showMore(){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("ui_search_load_more"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_more_results");if(e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(e)&&!cur.isSearchLoading)if(t&&searcher.appendElements(t),cur.has_more){cur.disableAutoMore=!1,cur.isSearchLoading=!0,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.lockButton)(e);var o=searcher.getSectionParams();o.offset=cur.offset,o.real_offset=cur.real_offset,o.query_id=cur.query_id,o.edit=nav.objLoc.edit,o.sign=nav.objLoc.sign,o.all=nav.objLoc.all,o.act="show_more",o.module=cur.module,cur.section===sectionCommunities&&(o.random_seed=cur.random_seed,o.force_group_id=cur.force_group_id),ajax.post("al_search.php",o,{onDone(t,o){cur.isSearchLoading=!1,o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("no_results")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.re)("no_results"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("results").insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div",{innerHTML:o,id:"search_more_results"}),e),cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_23__.cutTextToHighlight)(".labeled__searchServicesDesc")),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.unlockButton)(e),searcher.applyOptions(t),searcher.scrollCheck()},cache:o[paramSection]!==sectionAudio||o[paramQuery]?1:0})}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(e);else t&&searcher.appendElements(t)},switchSection(e,t,o){if(o&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.checkEvent)(o))return!0;this.removeLogClickHandlers(),t=t||{},e!==sectionCommunities&&e!==sectionMiniApps||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(paramCategory,0),cur.filtersShown=!1);var i=searcher.getSectionParams(e);if(e!==sectionAuto&&e!==sectionQuick&&t.updateStats&&(i.swt=1),t.tab&&(i.tab=1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_menu")&&uiRightMenu){var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)(`search_menu_${e}`,"search_menu");r&&uiRightMenu.switchMenu(r)}return searcher.setSection(e),searcher.sendSearchReq(i,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_12__.scrollToTop)(),!1},removeLogClickHandlers(){(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchAuto),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchPeople),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchStatuses),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchCommunities),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchAudio),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchVideo),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchClips),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceFriendsFind),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceGroupsCatalog)},logSearch(e,t){var o=e[paramQuery];if(o&&0!==(o=o.trim()).length){var i,r=cur.section,s=cur.module,n=cur.query_id,a=t.event_bits,_=t.event_bits_auto_blocks||[],c=t.query_duration,l=t.model_name,d=t.model_name_auto_blocks||[],u=t.is_anonym,h=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("no_results")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_auto_rows")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_auto_rows").children.length>0;switch(r){case sectionAuto:i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchAuto,searcher.logSearchAutoBlocks(i,o,n,a,_,d,u);break;case sectionAudio:i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchAudio;break;case sectionVideo:i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchVideo;break;case sectionClips:i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchClips;break;case sectionStatuses:i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchStatuses;break;case sectionPeople:i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchPeople;break;case sectionCommunities:i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceSearchCommunities;break;default:return}switch(s){case moduleFriends:i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceFriendsFind;break;case moduleGroupsCatalog:i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceGroupsCatalog}s===moduleEmpty&&r===sectionPeople&&(i=_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.serviceFriendsFind),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.saveSearchAttemptStats)(i,0,h,o,n,a,c,l,"","",u)}},logSearchAutoBlocks(e,t,o,i,r,s,n){var a=0,_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_auto_rows");if(_)for(var c={search_audio_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.blockNameSearchAudio,search_people_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.blockNameSearchPeople,search_communities_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.blockNameSearchGroups,search_video_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.blockNameSearchVideo,search_clips_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.blockNameSearchClips,search_market_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.blockNameSearchMarket,search_classifieds_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.blockNameSearchClassifieds},l=0;l<_.children.length;++l){var d,u=_.children[l],h=null,p=_createForOfIteratorHelper(u.classList);try{for(p.s();!(d=p.n()).done;){var f=d.value;if(c.hasOwnProperty(f)){h=c[f];break}}}catch(e){p.e(e)}finally{p.f()}if(h){var g=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.intval)(u.getAttribute("data-block-num"));a=Math.max(a,g);var m=0;r.hasOwnProperty(h)&&(m=r[h]);var v="";s.hasOwnProperty(h)&&(v=s[h]),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.saveSearchAttemptStats)(e,0,!0,t,o,m,0,v,h,"",n,g)}}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("no_results")||(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.saveSearchAttemptStats)(e,0,!0,t,o,i,0,"",_web_lib_stats__WEBPACK_IMPORTED_MODULE_14__.blockNameSearchPosts,"",n,a+1)},getSectionParams(e){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("filter_form"),o={};for(var i in(o=!t||e&&e!==cur.section||cur.section===sectionQuick?{[paramSection]:e||cur.section}:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.serializeForm)(t)||{})[paramQuery]=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)("search_query"),o)o.hasOwnProperty(i)&&(o[i]&&"0"!=o[i]||delete o[i],"-1"==o[i]&&o[`${i}_custom`]?(o[i]=o[`${i}_custom`],delete o[`${i}_custom`]):o[`${i}_custom`]&&delete o[`${i}_custom`]);return cur.section!==sectionVideo||o[paramSort]||(o[paramSort]="0"),cur.section===sectionPeople&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("photo")&&!o[paramPhoto]&&(o[paramPhoto]="0"),cur.section===sectionPeople&&o[paramInvite]&&delete o.from,cur.section!==sectionCommunities||!cur.filtersShown||o[paramQuery]||o[paramCategory]||(o[paramSkipCatalog]="1",cur.module===moduleGroupsRecommendations&&(o[paramGroupsRecommendationsModel]="1",o[paramFrom]=cur.from,o[paramBlockPosition]=cur.block_position)),o},sameParams(e){if(!cur.params)return!1;for(var t in e)if(e.hasOwnProperty(t)&&e[t]!=cur.params[t])return!1;for(var o in cur.params)if(cur.params.hasOwnProperty(o)&&e[o]!=cur.params[o])return!1;return!0},switchAudioTop(e){return cur.useRec=e,cur.audioTop=e,this.switchSection(sectionAudio)},showMedia:(e,t,o)=>(!o||!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.checkEvent)(o))&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("label",t)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("progress",t)),cur.loadingMedia=!0,searcher.switchSection(e,{updateStats:!0},o)),updResults(){if(cur.customSearchChange)return cur.customSearchChange(),!1;var e=searcher.getSectionParams();if(searcher.sameParams(e)||e[paramSection]===sectionVideo&&!e[paramQuery]&&!nav.objLoc[paramQuery])return!1;cur.onSearchChange&&cur.onSearchChange(e);var t=(cur.section===sectionAuto||cur.section===sectionAudio&&e[paramQuery]&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("audio_lyrics_filter")||cur.section===sectionAudio&&!e[paramQuery]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("audio_lyrics_filter"))&&!e.offset;searcher.sendSearchReq(e,t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_12__.scrollToTop)()},onInputChange(e){clearTimeout(cur.requestTimeout),!e||"keydown"===e.type&&13!==e.keyCode?cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),1e3):searcher.updResults()},onKey(){cur.section===sectionQuick&&(clearTimeout(cur.requestTimeout),cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),300))},onEnter(e,t){var o=window.iSearch;o&&o.select&&o.select.isVisible()&&o.select.active>-1||(clearTimeout(cur.requestTimeout),searcher.updResults(),searcher.highlightHotHashtag(t))},checkbox(e,t,o,i){checkbox(e);var r=isChecked(e)?1:0;o&&(r=1-r),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(t,r),i||searcher.updResults()},setSection(e){e!==cur.section&&e!==sectionAuto&&e&&(cur.section=e)},applyOptions(options,changeSection){var iSearch=window.iSearch;iSearch.initSelect(),searcher.setSection(options.section),options.reply_names&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(cur.options.reply_names,options.reply_names),delete options.reply_names),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(cur,options),cur.params=searcher.getSectionParams();var header=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_header");if(options.tabs)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)("search_tabs_wrap",options.tabs),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(header),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)("search_tabs_wrap");else if(options.title){var headerInner=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("_header_inner",header);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(headerInner,options.title),options.summary&&headerInner.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("span",{className:"page_block_header_count",innerHTML:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.langNumeric)(options.summary,"%s",!0)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)("search_tabs_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(header)}if(null!=options.controls&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("_header_extra",header),options.controls||""),void 0!==options.auto_rows&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_auto_rows")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_auto_rows").innerHTML=options.auto_rows||""),clearTimeout(cur.setLocTO),options.loc)if(changeSection)try{nav.setLoc(options.loc)}catch(e){debugLog(e)}else cur.setLocTO=setTimeout((()=>{if("search"===nav.objLoc[0]||nav.objLoc[0]===sectionCommunities||"brands"===nav.objLoc[0]||nav.objLoc[0].match(/^people($|\/)/)||cur.searchLoc)try{nav.setLoc(options.loc)}catch(e){debugLog(e)}}),100);if(options.htitle&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.setDocumentTitle)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(stripHTML(options.htitle))),void 0!==options.q){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)("search_query",(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(stripHTML(options.q))||"");var resetEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_clear_params");resetEl&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)(resetEl)}if(cur.uiSort&&void 0!==options.sortHide&&(options.sortHide&&cur.uiSort.selectItem(0,!1),cur.uiSort.disable(options.sortHide)),cur.section===sectionAuto&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)("search_menu_auto","search_menu")),options.script)try{eval(options.script)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_15__.logEvalError)(e,options.script)}var res=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("results"),sc=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_content"),lighted=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(sc,"highlight");res.className=`search_results search_${cur.section}_results${cur.section===sectionStatuses||cur.section===sectionAuto?" wall_module":""}${cur.section===sectionStatuses&&""!==options.summary||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.gpeByClass)("page_block",res)?"":" page_block"} mark_top_verified`,cur.section===sectionAudio&&(res.className+=" audio_w_covers"),lighted&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(sc,"highlight");var moreResults=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_more_results");cur.has_more||moreResults&&moreResults.firstChild?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)("seach_pages"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.show)("ui_search_load_more")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)("ui_search_load_more")},selectHotHashtag(e){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(e),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_query"),i=((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.data)(o,"opts")||{}).onEnter;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(o,t),i&&i(o,t),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_9__.statlogsValueEvent)("top_hashtag_search",0,"click"),!1},highlightHotHashtag(e){e=e?e.toLowerCase():"";var t=!1,o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass)("search_hot_hashtags_item","search_hot_hashtags");return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(o,((o,i)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(i).toLowerCase()===e?(t=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(i,"search_hot_hashtags_item_active")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(i,"search_hot_hashtags_item_active")})),t},toggleFilter(e,t,o){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(e,"search_filter_shut")||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(t)?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(e,"search_filter_open"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(e,"search_filter_shut"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_11__.slideDown)(t,200,(()=>{(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_8__.checkPageBlocks)(),o&&o()}))):(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_11__.slideUp)(t,200,(()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(e,"search_filter_shut"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(e,"search_filter_open"),o&&o()}))},appendElements(e){if(e){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.re)(e)}},close:()=>nav.go(cur.search_return_to,{},{back:!0}),toggleMinimizedFilters(e,t,o){var i=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domNS)(e),r=o?0:200;return void 0===t&&(t=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(i)),!t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(i)?(cur.filtersShown=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(e,"ui_rmenu_item_expanded"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_11__.slideUp)(i,r)):t&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(i)&&(cur.filtersShown=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(paramCategory,0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(e,"ui_rmenu_item_expanded"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_11__.slideDown)(i,r)),!1},onCommunitiesToggle(){"search"==cur.module&&(uiRightMenu.switchMenu((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass1)(`search_menu_${cur.section}`,"search_menu")),searcher.updResults())},showMenuFeaturing(e){var t,o=document.querySelector(e);if(o){o.classList.add("ui_rmenu_item--featuring");var i=()=>this.hideMenuFeaturing(e);o.addEventListener("click",i),null===(t=window.cur.destroy)||void 0===t||t.push((()=>{o.removeEventListener("click",i)}))}},hideMenuFeaturing(e){var t=document.querySelector(e);t&&t.classList.remove("ui_rmenu_item--featuring")},onMarketSwitchSection(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];searcher.removeLogClickHandlers();var o=searcher.getSectionParams("market"),i=document.querySelector("#search_query"),r=document.querySelector(".search_menu_market");return t&&i?(i.value="",delete o["c[q]"]):(o.swt=1,o.tab=1),r&&uiRightMenu&&((0,_web_ecomm_market_MarketSearchBanner_utils_hideFeaturing__WEBPACK_IMPORTED_MODULE_24__.hideFeaturing)().then((()=>{var e=document.querySelector(".MarketSearchBanner");e&&e.remove(),searcher.hideMenuFeaturing(".search_menu_market")})),uiRightMenu.switchMenu(r)),searcher.setSection("market"),searcher.sameParams(o)||searcher.sendSearchReq(o,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_12__.scrollToTop)(),!1},subscribe(e,t,o,i,r,s,n){var a,_,c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.gpeByClass)("search_row",e);if(cur.unsubscribed=cur.unsubscribed||{},!i&&s&&!cur.unsubscribed[t]){var l=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_warning"),dark:1,bodyStyle:"padding: 20px; line-height: 160%;"},(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)(s),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("search_group_leave"),(()=>{l.hide(),searcher.subscribe(e,t,o,i,r)}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_cancel"));return!1}i?(a="al_feed.php",_={act:"subscr",oid:t,hash:o,from:r||"search",ref:cur.module},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domData)(e,"trackcode")&&(_.trackcode=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.domData)(e,"trackcode"))):(a="al_fans.php",_={act:"unsub",oid:t,hash:o,from:"search",ref:cur.module});ajax.post(a,_,{onDone(){n?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggleClass)(c,"touched",!!i):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggle)(`search_sub${t}`,!i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.toggle)(`search_unsub${t}`,!!i)),i||(cur.unsubscribed[t]=1)},onFail(e){if(e)return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_error"),e).hide,2e3),!0},showProgress(){n?(e.tt&&e.tt.destroy(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.addClass)(c,"loading")):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.lockButton)(e)},hideProgress(){n?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.removeClass)(c,"loading"):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_17__.unlockButton)(e)}})},onResize(){searcher.scrollCheck()},scrollCheck(){if(!(browser.mobile||cur.isSearchLoading||cur.disableAutoMore)){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("ui_search_load_more");if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(e)){var t=document.documentElement,o=window.innerHeight||t.clientHeight||bodyNode.clientHeight;(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_12__.scrollGetY)()+o+200>e.offsetTop&&searcher.showMore()}else{var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_more_results");i&&searcher.appendElements(i)}}},switchFilter(e,t,o){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.checkEvent)(o))return!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)(`c[${e}]`)&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)(`c[${e}]`).value=t),cur.section===sectionVideo&&"quality"===e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)(paramHd)&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)(paramHd).value=t<0?0:1),searcher.updResults()},showMiniAppTooltip(e){var t=e.dataset.appId,o=e.tt&&e.tt.container?e.tt.container:null;o&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(o)&&(o.classList.remove("tt_left"),o.classList.remove("tt_right"),o.classList.remove("GlobalAppsCardTooltipWrapper--up"));var i,r="left",s=-100,n="",a=document.documentElement.clientWidth,_=document.documentElement.clientHeight,c=e.getBoundingClientRect();c.left>a-520?(r="right",i=365):i=-c.width-10,c.top>_-400&&(s=-50,n="GlobalAppsCardTooltipWrapper--up",o&&o.classList.add(n)),(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_21__.showTooltip)(e,{url:"al_apps.php",params:{act:"mini_app_card_tooltip",app_id:t},className:`GlobalAppsCardTooltipWrapper ${n}`,shift:[i,s],hasover:!0,ajaxdt:200,showdt:300,hidedt:300,center:!1,dir:r})},openMiniApp(e,t,o){o&&(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_10__.showWiki)({w:`app${e}`,app_ref:t})}},iSearch={init(e,t){if(!this.inited){var o=this;this.inited=!0,this.input=e,this.cont=e.parentNode.parentNode;var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div",{className:"results_container",innerHTML:'<div class="result_list"></div>'});this.cont.appendChild(i),this.resultList=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.geByClass)("result_list",i)[0],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hide)(this.resultList),browser.chrome&&(this.resultList.style.opacity=1),this.resultList.style.width=i.style.width="552px",this.onShowCallback=!!t&&t.onShow,this.initSelect(t),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(e,"keyup click mouseup",o.inputUpHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(document,"click",o.documentClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(e,"keypress keydown",o.inputDownHandler),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("top_search")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("top_search").onclick=e=>hab.getLoc().indexOf("search")?nav.go("search",e,{search:!0}):(window.searcher&&searcher.close(),!1))}},inputUpHandler(e){var t=window.iSearch;if(t.select){if((t.select.isVisible()&&t.select.active>-1||cur.preventISRequest)&&(delete cur.preventISRequest,inArray(e.keyCode,[_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.UP,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.DOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.PAGEUP,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.PAGEDOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.RETURN])))return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(e);clearTimeout(cur.requestTimeout);var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(t.input);t.currentTerm=o;var i=cur.section;o?cur.requestTimeout=setTimeout((()=>{cur.setISearch=!0,ajax.post("/hints.php?act=a_gsearch_hints",{q:o,section:i},{onDone(e){t.currentTerm===o&&cur.setISearch&&t.showSelectList(o,e),delete cur.setISearch},cache:1})}),300):t.select.hide()}},documentClick(){var e=window.iSearch;e.select&&e.select.hide()},inputDownHandler(e){var t=window.iSearch;if(t.select){if(!t.select||t.select.active<0)return e.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.RETURN&&t.select&&(cur.preventISRequest=!0,t.select.hide()),!0;if(e.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.SPACE||(e.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.RETURN||10===e.keyCode)&&t.select&&t.select.isVisible()){var o,i=t.select.list.childNodes[t.select.active],r=i?i.getAttribute("val"):"";if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(t.lastItems,(function(){this[0]===r&&(o=this)})),!o)return;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(t.input,o[3]+(e.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.SPACE?" ":"")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.elfocus)(t.input,t.input.length),e.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.SPACE&&(cur.preventISRequest=!0,t.select.hide(),searcher.updResults()),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(e)}return e.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.RETURN&&10!==e.keyCode||!t.select||!t.select.isVisible()||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.triggerEvent)(document,e.type,e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(e))}},initSelect(){var e=window._iu,t=window.Select;if(!this.select&&t&&e&&this.resultList){this.guid=e.reg(this);var o=this;this.select=new t(this.resultList,{selectFirst:!1,onItemSelect:this.onItemSelect.bind(this),onShow:()=>((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(o.onShowCallback)&&o.onShowCallback(),e.sel(o.guid)),onHide:e.sel.pbind(!1),cycle:!0}),this.select.hide()}},showSelectList(e,t){this.select&&((t=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_20__.isArray)(t)&&t.length?t:[]).length?(this.select.clear(),this.lastItems=t,this.select.content(t),this.select.show(),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(this.onShowCallback)&&this.onShowCallback()):this.select.hide())},onItemSelect(e){var t;if(this.select&&(this.select.hide(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(this.lastItems,(function(){this[0]===e&&(t=this)})),t)){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div",{innerHTML:t[3]});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.val)(this.input,o.innerText||o.textContent),this.input.blur(),searcher.updResults()}},onEvent(e){e.type===(browser.opera||browser.mozilla?"keypress":"keydown")&&this.select.handleKeyEvent(e)},destroy(e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.cleanElems)(this.resultList),clearTimeout(e?e.requestTimeout:cur.requestTimeout),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(this.input,"keyup click mouseup",this.inputUpHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(document,"click",this.documentClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(this.input,"keypress keydown",this.inputDownHandler),this.select&&(this.select.destroy(),delete this.select),this.resultList&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.re)(this.resultList.parentNode),delete this.lastItems,this.inited=!1},updateResultsList(e){e?e+="px":e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_16__.ge)("search_query_wrap"),"wide")?"512px":"451px",this.resultList.style.width=e}}},780223:(e,t,o)=>{o.d(t,{default:()=>d});o(991181),o(296253),o(283946),o(976142),o(59357);var i=o(386409),r=o(786067),s=o(486125),n=o(695724),a=o(49535),_=o(315544),c=o(961540),l=o(18149);const d={init(e,t){var o,d,u,h=(0,_.ge)("video_live_blacklist_search"),p=(0,_.ge)("video_live_blacklist_wrap"),f=(0,_.domByClass)(p,"olist"),g={};function m(e){var i=e;if((e=(0,n.trim)(e).replace(/\s+/g," ").toLowerCase())!==d){d=e;var s=e?o.search(e):t.list,a="";if(s.length)for(var c,l=new RegExp(e,"i"),u=0;u<s.length;u++)c=s[u],a+=getTemplate("video_live_blacklist_item",{id:c.id,href:c.href,photo:c.photo,name:e?c.name.replace(l,"<em>$&</em>"):c.name,class:g[c.id]?" olist_item_wrap_on":""});else a=getTemplate("video_live_blacklist_empty",{text:(0,r.langStr)(getLang("global_search_not_found"),"search","<b>"+(0,n.clean)(i)+"</b>")});(0,_.val)(f,a)}}e.setOptions({bodyStyle:"padding:0;",onDestroy:function(){uiSearch.destroy(h),u&&u.destroy(),e=o=u=p=h=null}}),t.list.length&&(e.removeButtons().addButton(getLang("global_save"),(function(o){ajax.post("al_video.php?act=save_live_blacklist",{exclude:Object.keys(g).join(","),hash:t.save_hash},{onDone:function(t){e.hide(),t&&(0,s.showDoneBox)(t)},showProgress:i.lockButton.pbind(o),hideProgress:i.unlockButton.pbind(o)})})).addButton(getLang("global_cancel"),null,"no"),u=new uiScroll(p),m(""),p.onclick=function(e){var t=(0,_.domClosest)("olist_item_wrap",e.target);if(!t)return;(0,a.cancelEvent)(e);var o=(0,_.domData)(t,"id");(0,_.toggleClass)(t,"olist_item_wrap_on")?g[o]=1:delete g[o]},h&&(o=new l.vkIndexer(t.list,(function(e){return e.name+" https://"+(0,c.getHostName)()+e.href})),uiSearch.init(h,{onChange:m}),uiSearch.focus(h)))}}},508271:(e,t,o)=>{o.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>i,SHOW_TOOLTIP_TIMEOUT:()=>r,REACTION_ID_DEFAULT:()=>s,REACTION_ID_MAX:()=>n,REACTION_ID_MIN:()=>a,REACTION_ID_UNSET:()=>_,REACTION_SET_ITEMS_MIN_COUNT:()=>c,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>l});var i=600,r=140,s=0,n=7,a=0,_=void 0,c=2,l=s},464746:(e,t,o)=>{o.d(t,{isDebugEnabled:()=>s});var i=o(26330),r=void 0,s=function(){return void 0!==r?r:r=!!i.default.get("reactions.debug_enabled")}},714396:(e,t,o)=>{o.d(t,{reactionCountsBrandUnwrap:()=>r,reactionCountsBrandWrap:()=>s});var i=o(165594),r=function(e){return(0,i.unwrap)(e)},s=function(e){return(0,i.wrap)(e)}},82701:(e,t,o)=>{o.d(t,{reactionLogError:()=>r});var i=o(66433);function r(e){var t=e.error,o=e.reportError;void 0!==o&&o&&(0,i.logError)(t,{environment:"reactions"}),console.error(t)}},517760:(e,t,o)=>{o.d(t,{isUnknownObject:()=>_,getReaction:()=>c,getDefaultReaction:()=>l,getDefaultReactionTitle:()=>d,prepareReactionMenuSet:()=>h,isReactionIdSet:()=>p,isReactionIdUnset:()=>f,isValidReactionId:()=>g,parseReactionId:()=>m,parseReactionIdOrUnset:()=>v,validateReactionSetPayloaditems:()=>E,parseReactionMenuConfig:()=>w,calcCounters:()=>b,calcCountersSum:()=>P,calcCountersWeightedSum:()=>C,hasReactionsForCounts:()=>y,counterForReactionId:()=>T,areCountersEqual:()=>O});var i=o(570655),r=o(508271),s=o(714396),n=o(659397),a=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},_=function(e){return null!==e&&"object"==typeof e},c=function(e,t){return e.itemsById[t]},l=function(e){return c(e,r.REACTION_ID_DEFAULT)},d=function(e){var t;return null===(t=l(e))||void 0===t?void 0:t.title},u=function(e,t){return 0===e.length?"":(o=e,i=function(e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)},r=!1,void 0===r&&(r=!0),o.reduce((function(e,t){var o=i(t),s=i(e);return s===o?r?e:t:s<o?e:t}))).url;var o,i,r},h=function(e,t,o){var i=t.map((function(e){var t=e.asset,i=e.color_sets,r=e.id,s=e.score,n=e.title;return{animationURL:t.animation_url||void 0,backgroundColor:null==i?void 0:i.background,id:r,imageMenuURL:u(t.images,o.imageMenuSize),imagePreviewURL:"imagePreviewSize"in o?u(t.images,o.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in o?u(t.images,o.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in o?u(t.images,o.imageStoryPreviewSize):void 0,score:s,title:n,titleColor:null==i?void 0:i.foreground}})),r={};return i.forEach((function(e){r[e.id]=e})),{id:e,items:i,itemsById:r}},p=function(e){return e!==r.REACTION_ID_UNSET},f=function(e){return e===r.REACTION_ID_UNSET},g=function(e){return a(e)&&e>=r.REACTION_ID_MIN&&e<=r.REACTION_ID_MAX},m=function(e){var t=parseInt(e,10);return g(t)?{isValid:!0,value:t}:{isValid:!1}},v=function(e){var t=m(e);return t.isValid?t.value:r.REACTION_ID_UNSET},E=function(e,t){if(e.length<r.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error("Invalid reactions items count in set '"+t+"': "+e.length)}},w=function(e){if(_(e)){var t={},o=e.animationShowStaticAfterEnd,i=e.menuShowDelay,s=e.openedDefaultReactionId,n=e.reportJsErrors;return"number"!=typeof i&&void 0!==i||(t.menuShowDelay=i),"boolean"==typeof o&&(t.animationShowStaticAfterEnd=o),"boolean"==typeof n&&(t.reportJsErrors=n),"number"==typeof s||null===s?null===s?t.openedDefaultReactionId=void 0:g(s)&&(t.openedDefaultReactionId=s):t.openedDefaultReactionId=r.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t}},b=function(e,t){var o=(0,s.reactionCountsBrandWrap)({});return Object.entries((0,s.reactionCountsBrandUnwrap)(e)).forEach((function(e){var r,s,n,a=(0,i.__read)(e,2),_=a[0],c=a[1],l=_,d=null!==(n=null===(s=null===(r=null==t?void 0:t.itemsById)||void 0===r?void 0:r[l])||void 0===s?void 0:s.score)&&void 0!==n?n:1;o[l]=d*(c||0)})),o},P=function(e){return Object.values((0,s.reactionCountsBrandUnwrap)(e)).reduce((function(e,t){return e+(t||0)}),0)},C=function(e){return P((0,s.reactionCountsBrandWrap)(e))},y=function(e){return P(e)>0},T=function(e,t){var o;return null!==(o=e[t])&&void 0!==o?o:void 0},O=function(e,t){return e&&t?(0,n.isEqual)(e,t):e===t}},165594:(e,t,o)=>{o.d(t,{unwrap:()=>i,wrap:()=>r});var i=function(e){return e},r=function(e){return e}},749091:(e,t,o)=>{var i;o.d(t,{Theme:()=>i,imageSizesIndex:()=>s,imageSizeCache:()=>n,createProductsMap:()=>a,UserProductStateKey:()=>r,isBasePack:()=>c,isStyleProduct:()=>l,isPackProduct:()=>d,ProductsByType:()=>u}),function(e){e.LIGHT="light",e.DARK="dark",e.DEFAULT="light"}(i||(i={}));var r,s=Symbol(),n=Symbol(),a=function(e){return new Map(e)};!function(e){e.IsNew="is_new"}(r||(r={}));var _,c=function(e){return void 0!==e.sticker_ids},l=function(e){return void 0!==e.base_id},d=function(e){return c(e)&&!l(e)};!function(e){e.Pack="pack",e.Style="style"}(_||(_={}));var u=function(){function e(e){var t=this;void 0===e&&(e=[]),this.pack=new Set,this.style=new Set,e.forEach((function(e){return t.add(e)}))}return e.prototype.add=function(e){e&&(d(e)?this.pack.add(e):l(e)&&this.style.add(e))},e.prototype.getPack=function(){return this.pack.values().next().value},e.prototype.getStyles=function(){return Array.from(this.style.values())},e.prototype.getCount=function(){return this.pack.size+this.style.size},e}();!function(){function e(e){var t=this;this.pack=[],this.style=[],e.forEach((function(e){return t.add(e)}))}e.prototype.add=function(e){var t=e.product;t&&(d(t)?this.pack.push(e):l(t)&&this.style.push(e))}}()},749140:(e,t,o)=>{o.d(t,{updateArticleSnippetsFromQueueByPost:()=>n});var i=o(66433),r=o(40906),s=o(19331);function n(e){if(window.vk.id&&(0,s.partConfigEnabled)("update_private_snippets_by_queue")){var t=Array.from(e.querySelectorAll(".article_snippet"));if(t.length){var o=[];t.forEach((function(e){if(window.vk.id&&e.dataset.needUpdate){var t=e.dataset.articleRawId;t&&o.push({article_raw_id:t,post_raw_id:e.dataset.postId,is_mini_snippet:(0,r.intval)(e.dataset.isMiniSnippet)})}})),o.length&&window.ajax.post("al_articles.php",{act:"get_snippets",article_snippets:JSON.stringify(o)},{onDone:function(e){t.forEach((function(t){t.dataset.articleRawId&&e[t.dataset.articleRawId]&&(t.outerHTML=e[t.dataset.articleRawId])}))},onFail:function(){return(0,i.logError)(new Error("Fail: updateArticleSnippetsFromQueueByPost")),!0}})}}}},699995:(e,t,o)=>{o.d(t,{hideFeaturing:()=>s});var i=o(189798),r=o(704615),s=function(){return(0,i.api)("market.searchFeaturingClose",{},{version:r.MARKET_WEB_API_VERSION})}},272972:(e,t,o)=>{var i=o(580693);window.feed=i.Feed,window.Feed=i.Feed;try{window.stManager.done(window.jsc("web/feed.js"))}catch(e){}},312422:(e,t,o)=>{o.d(t,{PhotoCarousel:()=>a});var i=o(570655),r=o(315544),s=o(275512),n="PhotoCarousel__arrowWrapper--hidden",a=function(){function e(e,t,o){var s=this;this.activeItemIdx=0,this.onLeftArrowClick=function(e){var t;s.isLeftBtnDisabled?e.stopPropagation():((null===(t=s.options)||void 0===t?void 0:t.onPrevClick)&&s.options.onPrevClick(e),s.prev())},this.onRightArrowClick=function(e){var t,o;s.isRightBtnDisabled?e.stopPropagation():((null===(t=s.options)||void 0===t?void 0:t.onNextClick)&&(null===(o=s.options)||void 0===o||o.onNextClick(e)),s.next())},this.post=e,this.options=o,this.items=t;var a=e.querySelector(".PhotoCarousel"),_=e.querySelector(".PhotoCarousel__arrowWrapper--left"),c=e.querySelector(".PhotoCarousel__arrowWrapper--right"),l=e.querySelector(".PhotoCarousel__items");if(!a||!l)throw new Error("PhotoCarousel: incorrect arguments");var d=(0,i.__read)((0,r.getSize)(l),1)[0],u=(0,i.__read)((0,r.getSize)(a),1)[0];this.carousel=a,this.leftArrowBtn=_,this.rightArrowBtn=c,this.isLeftBtnDisabled=!_||_.classList.contains(n),this.isRightBtnDisabled=!c||c.classList.contains(n),this.photoList=l,this.photoListWidth=d,this.carouselWidth=u,this.activeItemIdx=this.getActiveItemIdxFromDOM(),this.initListeners()}return e.prototype.destroy=function(){this.deInitListeners()},e.prototype.initListeners=function(){this.leftArrowBtn&&this.leftArrowBtn.addEventListener("click",this.onLeftArrowClick),this.rightArrowBtn&&this.rightArrowBtn.addEventListener("click",this.onRightArrowClick)},e.prototype.deInitListeners=function(){this.leftArrowBtn&&this.leftArrowBtn.removeEventListener("click",this.onLeftArrowClick),this.rightArrowBtn&&this.rightArrowBtn.removeEventListener("click",this.onRightArrowClick)},e.prototype.next=function(){this.move(this.getActiveIdx()+1)},e.prototype.prev=function(){this.move(this.getActiveIdx()-1)},e.prototype.getActive=function(){return this.items[this.activeItemIdx]},e.prototype.getActiveIdx=function(){return this.activeItemIdx},e.prototype.getActiveItemIdxFromDOM=function(){return Number(this.carousel.dataset.idx)},e.prototype.move=function(e){var t,o=this.getActiveIdx(),n=this.getActive(),a=this.items[e];if(a){var _=a.getEl();if(this.rightArrowBtn&&this.leftArrowBtn){var c=a.getPhotoRawId(),l=(0,i.__read)((0,r.getSize)(_),1)[0],d=_.offsetLeft,u=Math.round(this.photoListWidth-this.carouselWidth),h=d+l/2-this.carouselWidth/2;if(e>o)h=Math.min(h,u);else{if(!(e<o))return;h=Math.max(h,0)}h=Math.round(h),this.photoList.style.transform="translateX(-"+h+"px)";var p=(this.carouselWidth-l-12)/2,f=this.carouselWidth-l-20-6;h?(this.toggleLeftBtnDisabled(!1),this.leftArrowBtn.style.width=h===u?f+"px":p+"px"):this.toggleLeftBtnDisabled(!0),h===u?this.toggleRightBtnDisabled(!0):(this.toggleRightBtnDisabled(!1),this.rightArrowBtn.style.width=h?p+"px":f+"px"),n.setActive(!1),a.setActive(),this.activeItemIdx=e,this.items.slice(e,e+s.NUMBER_INITIALIZED_PHOTO).forEach((function(e){return e.init()})),this.carousel.setAttribute("data-idx",String(e)),this.post.setAttribute("data-photo-raw-id",String(c)),(null===(t=this.options)||void 0===t?void 0:t.onChange)&&this.options.onChange()}}},e.prototype.toggleLeftBtnDisabled=function(e){void 0===e&&(e=!0),this.leftArrowBtn&&(e?(this.leftArrowBtn.classList.add(n),this.isLeftBtnDisabled=!0):(this.leftArrowBtn.classList.remove(n),this.isLeftBtnDisabled=!1))},e.prototype.toggleRightBtnDisabled=function(e){void 0===e&&(e=!0),this.rightArrowBtn&&(e?(this.rightArrowBtn.classList.add(n),this.isRightBtnDisabled=!0):(this.rightArrowBtn.classList.remove(n),this.isRightBtnDisabled=!1))},e}()},923374:(e,t,o)=>{o.d(t,{PhotoCarouselBlock:()=>n});var i=o(312422),r=o(917325),s=o(275512),n=function(){function e(e,t){var o,r=this;this.isDestroyed=!1,this.destroy=function(){r.isDestroyed||(r.deInitListener(),r.carousel.destroy(),r.items.forEach((function(e){return e.destroy()})),r.isDestroyed=!0)},this.onPostClick=function(e){var t,o=e.target;(null===(t=r.blockOptions)||void 0===t?void 0:t.sendAnalytic)&&(o.classList.contains("post_img")||o.classList.contains("author")||o.classList.contains("mem_link")||o.classList.contains(s.PHOTO_CAROUSEL_AVATAR_CLASS)?r.blockOptions.sendAnalytic("open_user",r.post,e):o.classList.contains(s.PHOTO_ELEMENT_CLASS)||o.classList.contains(s.PHOTO_NO_SIZE_ELEMENT_CLASS)||o.classList.contains("page_post_thumb_wrap")?r.blockOptions.sendAnalytic("open_photo",r.post,e):o.classList.contains(s.PHOTO_CAROUSEL_HIDE_BTN_CLASS)&&r.blockOptions.sendAnalytic("hide",r.post,e))},this.post=e,this.blockOptions=t;var n=this.getCarouselOptions();this.items=this.createItems(e),this.carousel=new i.PhotoCarousel(e,this.items,n),this.initListeners(),null===(o=window.cur.destroy)||void 0===o||o.push(this.destroy)}return e.prototype.initListeners=function(){this.post.addEventListener("click",this.onPostClick)},e.prototype.deInitListener=function(){this.post.removeEventListener("click",this.onPostClick)},e.prototype.createItems=function(e){var t,o=this,i=Array.from(e.querySelectorAll("."+s.PHOTO_CAROUSEL_ITEM_CLASS)),n={};return(null===(t=this.blockOptions)||void 0===t?void 0:t.sendAnalytic)&&(n.sendAnalytic=function(e,t){var i,r;(null===(i=o.blockOptions)||void 0===i?void 0:i.sendAnalytic)&&(null===(r=o.blockOptions)||void 0===r||r.sendAnalytic(e,o.post,t))}),i.map((function(e){return new r.PhotoCarouselBlockItem(e,n)}))},e.prototype.getCarouselOptions=function(){var e,t=this,o=null===(e=this.blockOptions)||void 0===e?void 0:e.sendAnalytic;return{onPrevClick:function(e){o&&o("click_previous",t.post,e)},onNextClick:function(e){o&&o("click_next",t.post,e)}}},e}()},917325:(e,t,o)=>{o.d(t,{PhotoCarouselBlockItem:()=>c});var i=o(570655),r=o(213),s=o(982452),n=o(542041),a=o(49535),_=o(850167),c=function(e){function t(t,o){var i=e.call(this,t)||this;i.onPhotoClick=function(e){var t;e.ctrlKey||e.metaKey||(i.showPhoto(e),(null===(t=i.options)||void 0===t?void 0:t.sendAnalytic)&&i.options.sendAnalytic("open_photo"))},i.onShareClick=function(e){var t;if(i.objectRawId){var o=null===(t=i.options)||void 0===t?void 0:t.sendAnalytic;o&&(o("click_to_sharing",e),window.cur.sbOnShare=function(){o("repost",e)}),n.Likes.share(i.objectRawId,i.shareOptions),(0,a.cancelEvent)(e)}},i.onCommentsClick=function(e){var t,o=i.photoViewOptions||{};o.commentFocusInit=!0,i.showPhoto(e,o);var r=null===(t=i.options)||void 0===t?void 0:t.sendAnalytic;r&&r("click_to_comment",e)},i.onLikeClick=function(e){var t;if(i.likeBtn&&i.objectRawId&&i.likeHash){var o=i.isLiked()?"unlike":"like",r=null===(t=i.options)||void 0===t?void 0:t.sendAnalytic;r&&r(o,e),n.Likes.toggle(i.likeBtn,e,i.objectRawId,i.likeHash)}},i.isLiked=function(){return i.likeBtn&&i.likeBtn.classList.contains("active")},i.options=o,i.shareBtn=t.querySelector("._share"),i.commentsBtn=t.querySelector("._comment"),i.likeBtn=t.querySelector("._like"),i.objectRawId=t.dataset.objectRawId,i.likeHash=t.dataset.likeHash;var r=t.dataset.shareOptions||"";return i.shareOptions=r&&(0,s.parseJSON)(r),i.initListeners(),i}return(0,i.__extends)(t,e),t.prototype.destroy=function(){this.deInitListeners()},t.prototype.initListeners=function(){this.shareBtn&&this.shareBtn.addEventListener("click",this.onShareClick),this.commentsBtn&&this.commentsBtn.addEventListener("click",this.onCommentsClick),this.likeBtn&&this.likeBtn.addEventListener("click",this.onLikeClick),this.photo.addEventListener("click",this.onPhotoClick)},t.prototype.deInitListeners=function(){this.shareBtn&&this.shareBtn.removeEventListener("click",this.onShareClick),this.commentsBtn&&this.commentsBtn.removeEventListener("click",this.onCommentsClick),this.likeBtn&&this.likeBtn.removeEventListener("click",this.onLikeClick),this.photo.removeEventListener("click",this.onPhotoClick)},t.prototype.showPhoto=function(e,t){void 0===t&&(t=this.photoViewOptions),(0,_.showPhoto)(this.photoRawId,this.photoContext,t,e),(0,a.cancelEvent)(e)},t}(r.PhotoCarouselItem)},213:(e,t,o)=>{o.d(t,{PhotoCarouselItem:()=>n});var i=o(570655),r=o(275512),s=o(520820),n=function(){function e(e){this.item=e;var t=e.querySelector("."+r.PHOTO_ELEMENT_CLASS),o=e.dataset.photoViewOptions||"",n=e.dataset.photoContext,a=e.dataset.photoRawId,_=o&&(0,s.parseJSON)(o);if(!(_&&a&&n&&t))throw new Error("PhotoCarouselBlockItem: incorrect arguments");var c=(0,i.__read)(a.split("_"),2),l=c[0],d=c[1];this.ownerId=Number(l),this.photoId=Number(d),this.photoRawId=a,this.photoContext=n,this.photoViewOptions=_,this.photo=t,this.isActive=e.classList.contains("PhotoCarouselItem--active")}return e.prototype.setActive=function(e){void 0===e&&(e=!0),this.isActive=e,this.item.classList.toggle("PhotoCarouselItem--active",e)},e.prototype.init=function(){var e=this.item.getAttribute("data-photo-url");if(e){if(this.item.classList.contains(r.PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS)){var t=this.item.querySelector("."+r.PHOTO_NO_SIZE_ELEMENT_CLASS);t&&(t.src=e)}else{var o=this.item.querySelector("."+r.PHOTO_ELEMENT_CLASS);if(!o)return;o.style.backgroundImage="url('"+e+"')"}this.item.removeAttribute("data-photo-url")}},e.prototype.getPhotoRawId=function(){return this.photoRawId},e.prototype.getOwnerId=function(){return this.ownerId},e.prototype.getEl=function(){return this.item},e}()},463343:(e,t,o)=>{o.d(t,{PhotoRecognizeBlock:()=>h});var i=o(275512),r=o(642009),s=o(312422),n=o(486125),a=o(315544),_=o(982452),c=o(123251),l=o(786067),d=o(49535),u=o(13353),h=function(){function e(e){var t,o=this;this.isDestroyed=!1,this.countConfirmedTags=0,this.destroy=function(){o.isDestroyed||(o.nextPhotoTimerId&&(clearTimeout(o.nextPhotoTimerId),o.nextPhotoTimerId=null),o.deInitListeners(),o.carousel.destroy(),o.items.forEach((function(e){return e.destroy()})),o.isDestroyed=!0)},this.handleOutsideConfirmationTags=function(e){var t=e.detail.photoRawId,i=e.detail.tagIds;o.items.filter((function(e){return e.getPhotoRawId()===t})).forEach((function(e){return e.setConfirmedTagsByIds(i)}))},this.handleOutsideDeclinationTags=function(e){var t=e.detail.photoRawId,i=e.detail.tagIds;o.items.filter((function(e){return e.getPhotoRawId()===t})).forEach((function(e){return e.setDeclinedTagsByIds(i)}))},this.handleOutsideDeletingTags=function(e){var t=e.detail.photoRawId,i=e.detail.tagIds;o.items.filter((function(e){return e.getPhotoRawId()===t})).forEach((function(e){return e.setDeletedTagsByIds(i)}))},this.next=function(){o.nextPhotoTimerId&&(clearTimeout(o.nextPhotoTimerId),o.nextPhotoTimerId=null),o.carousel.getActiveIdx()!==o.items.length-1?o.carousel.next():o.countConfirmedTags?o.showEndCard():(o.removeBlock(),o.showThanksNotification())},this.removeBlock=function(){o.destroy(),o.post.remove()},this.onPhotoChangeClick=function(){o.nextPhotoTimerId&&(clearTimeout(o.nextPhotoTimerId),o.nextPhotoTimerId=null),o.skipActiveItemTags()},this.updateBlockTitle=function(){if(o.titleEl){var e=o.carousel.getActive().getTitle();e&&(o.titleEl.innerHTML=e)}},this.hideHelpHintClick=function(e){o.hintHelpId&&o.hintHelpHash&&((0,d.cancelEvent)(e),window.ajax.post("al_index.php",{act:"help_hints_hide",hint_id:o.hintHelpId,hash:o.hintHelpHash},{onDone:function(){var e;null===(e=o.hintHelpPanel)||void 0===e||e.remove()},onFail:function(){return console.error("something wrong with help hint"),!0}}))},this.post=e,this.titleEl=e.querySelector(".PhotoRecognizeBlock__title");var i=e.querySelector(".PhotoRecognizeBlock__inner");if(!i)throw new Error("PhotoRecognizeBlock: there is not inner");this.trackCode=e.dataset.trackCode,this.hintHelpId=e.dataset.hintHelpId,this.hintHelpHash=e.dataset.hintHelpHash,this.innerWrapperEl=i,this.items=this.createItems(e),this.carousel=new s.PhotoCarousel(e,this.items,{onPrevClick:this.onPhotoChangeClick,onNextClick:this.onPhotoChangeClick,onChange:this.updateBlockTitle}),this.hintHelpPanel=e.querySelector(".PhotoRecognizeBlockHint"),this.helpHintPanelHideBtn=e.querySelector(".PhotoRecognizeBlockHint__hide"),this.initListeners(),this.initFirstItems(),null===(t=window.cur.destroy)||void 0===t||t.push(this.destroy),window.cur.pvOneSuggestHintId=e.dataset.hintAlertId,window.cur.pvOneSuggestHintHash=e.dataset.hintAlertHash,null==window.cur.pvNeedShowAlertForOneSuggest&&(window.cur.pvNeedShowAlertForOneSuggest=Boolean(Number(e.dataset.needShowAlert)))}return e.prototype.initListeners=function(){var e;document.addEventListener(c.TagEventTypes.CONFIRM_SUGGESTED_TAGS,this.handleOutsideConfirmationTags),document.addEventListener(c.TagEventTypes.DECLINE_SUGGESTED_TAGS,this.handleOutsideDeclinationTags),document.addEventListener(c.TagEventTypes.DELETE_TAG,this.handleOutsideDeletingTags),null===(e=this.helpHintPanelHideBtn)||void 0===e||e.addEventListener("click",this.hideHelpHintClick)},e.prototype.deInitListeners=function(){var e,t;null===(e=this.closeEl)||void 0===e||e.removeEventListener("click",this.removeBlock),null===(t=this.helpHintPanelHideBtn)||void 0===t||t.removeEventListener("click",this.hideHelpHintClick),document.removeEventListener(c.TagEventTypes.CONFIRM_SUGGESTED_TAGS,this.handleOutsideConfirmationTags),document.removeEventListener(c.TagEventTypes.DECLINE_SUGGESTED_TAGS,this.handleOutsideDeclinationTags),document.removeEventListener(c.TagEventTypes.DELETE_TAG,this.handleOutsideDeletingTags)},e.prototype.initFirstItems=function(){this.items.slice(0,i.NUMBER_INITIALIZED_PHOTO).forEach((function(e){return e.init()}))},e.prototype.createItems=function(e){var t=this;return Array.from(e.querySelectorAll("."+i.PHOTO_CAROUSEL_ITEM_CLASS)).map((function(e){return new r.PhotoRecognizeBlockItem(e,t)}))},e.prototype.nextWithDelay=function(){var e=this;this.nextPhotoTimerId||(this.nextPhotoTimerId=setTimeout((function(){e.nextPhotoTimerId=null,e.next()}),800))},e.prototype.incrementConfirmedCount=function(e){void 0===e&&(e=1),this.countConfirmedTags+=e},e.prototype.skipActiveItemTags=function(){this.carousel.getActive().skipTags()},e.prototype.showThanksNotification=function(){(0,n.showDoneBox)((0,l.getLang)("photo_recognition_thanks_notification"))},e.prototype.showEndCard=function(){var e,t=this.innerWrapperEl.parentElement;if(t){var o=this.getEndCardData(),i=(0,l.getLang)("photo_recognition_viewed_photos",this.items.length),r=o.subtitle||"",s=o.button,n=(0,a.se)('\n      <div class="PhotoRecognizeBlockEndCard">\n        <div class="PhotoRecognizeBlockEndCard__close"></div>\n        <div class="PhotoRecognizeBlockEndCard__title">'+i+'</div>\n        <div class="PhotoRecognizeBlockEndCard__subtitle">'+r+"</div>\n      </div>\n    ");if(s){var _=s.title,c=s.action.url,d=(0,a.se)('<a href="'+c+'" class="PhotoRecognizeBlockEndCard__action flat_button secondary">'+_+"</a>");n.appendChild(d)}this.closeEl=n.querySelector(".PhotoRecognizeBlockEndCard__close"),null===(e=this.closeEl)||void 0===e||e.addEventListener("click",this.removeBlock),t.appendChild(n),(0,a.hide)(this.innerWrapperEl),this.sendAnalytic("show_end_card")}},e.prototype.getEndCardData=function(){var e=this.post.getAttribute("data-end-card");return e?(0,_.parseJSON)(e):{}},e.prototype.sendAnalytic=function(e,t){void 0===t&&(t={}),(0,u.sendAnalytic)(e,this.trackCode,t)},e}()},642009:(e,t,o)=>{o.d(t,{PhotoRecognizeBlockItem:()=>m});var i,r=o(570655),s=o(213),n=o(491838),a=o(850167),_=o(315544),c=o(49535),l=o(66433),d=o(959115),u=o(275512),h=o(391789),p=o(786067),f=o(19331),g=o(13353);!function(e){e[e.CONFIRMED=0]="CONFIRMED",e[e.DECLINED=1]="DECLINED",e[e.DELETED=2]="DELETED"}(i||(i={}));var m=function(e){function t(t,o){var r=e.call(this,t)||this;r.isLoading=!1,r.isSkipped=!1,r.onShowAllClick=function(e){r.showPhoto(e),r.sendAnalytic("show_tags")},r.onPhotoClick=function(e){e.ctrlKey||e.metaKey||(r.showPhoto(e),(0,c.cancelEvent)(e))},r.onConfirmClick=function(){if(!r.isLoading){var e=r.getTags();r.isLoading=!0,r.tagArea.confirmSuggestedTags(e,r,r.confirmBtn).then((function(){r.updatePhotoviewCache(!0),r.incrementConfirmedCount(e.length),r.showResultPanel(i.CONFIRMED),r.block.nextWithDelay()}),(function(e){e&&(0,l.logError)(e)})).finally((function(){r.isLoading=!1}))}},r.onDeclineClick=function(){r.isLoading||(r.isLoading=!0,r.tagArea.declineSuggestedTags(r.getTags(),r,r.declineBtn).then((function(){r.updatePhotoviewCache(!0),r.showResultPanel(i.DECLINED),r.block.nextWithDelay()})).finally((function(){r.isLoading=!1})))},r.onCancelClick=function(){r.cancelBtn&&(r.reset(),r.showSuggestPanel())},r.onNextClick=function(){r.skipTags(),r.block.next()};var s=t.dataset.tagHash||"";return r.block=o,r.type=Number(t.dataset.recognizeType),r.title=t.dataset.title,r.trackCode=t.dataset.trackCode||"",r.skipHash=t.dataset.skipHash||"",r.confirmBtn=t.querySelector(".PhotoRecognizeBlockItem__btn--confirm"),r.declineBtn=t.querySelector(".PhotoRecognizeBlockItem__btn--decline"),r.showAllBtn=t.querySelector(".PhotoRecognizeBlockItem__btn--showTags"),r.nextBtn=t.querySelector(".PhotoRecognizeBlockItem__btn--next"),r.description=t.querySelector(".PhotoRecognizeBlockItem__description"),r.tagArea=new d.PhotoTagArea(r,s,r.trackCode),r.initListeners(),r}return(0,r.__extends)(t,e),t.prototype.destroy=function(){this.deInitListeners()},t.prototype.skipTags=function(){this.isSkipped||(this.isSkipped=!0,window.ajax.post("al_photos.php",{act:"skip_suggested_tags",tag_raw_ids:this.tagArea.getFullRawTagIdsStr(),photo_raw_id:this.getPhotoRawId(),track_code:this.trackCode,hash:this.skipHash},{onDone:function(){},onFail:function(e){return!!(0,f.partConfigEnabled)("recognize_mock_turn_off")&&e&&(0,l.logError)(e),!0}}))},t.prototype.initListeners=function(){var e,t,o,i,r;null===(e=this.confirmBtn)||void 0===e||e.addEventListener("click",this.onConfirmClick),null===(t=this.declineBtn)||void 0===t||t.addEventListener("click",this.onDeclineClick),null===(o=this.cancelBtn)||void 0===o||o.addEventListener("click",this.onDeclineClick),null===(i=this.showAllBtn)||void 0===i||i.addEventListener("click",this.onShowAllClick),null===(r=this.nextBtn)||void 0===r||r.addEventListener("click",this.onNextClick),this.photo.addEventListener("click",this.onPhotoClick)},t.prototype.deInitListeners=function(){var e,t,o,i,r;null===(e=this.confirmBtn)||void 0===e||e.removeEventListener("click",this.onConfirmClick),null===(t=this.declineBtn)||void 0===t||t.removeEventListener("click",this.onDeclineClick),null===(o=this.showAllBtn)||void 0===o||o.removeEventListener("click",this.onShowAllClick),null===(i=this.nextBtn)||void 0===i||i.removeEventListener("click",this.onNextClick),null===(r=this.cancelBtn)||void 0===r||r.removeEventListener("click",this.onCancelClick),this.photo.removeEventListener("click",this.onPhotoClick)},t.prototype.showPhoto=function(e){(0,a.showPhoto)(this.photoRawId,this.photoContext,this.photoViewOptions,e),this.updatePhotoviewCache()},t.prototype.updatePhotoviewCache=function(e){void 0===e&&(e=!1),this.photoViewOptions.noCache=e,e&&(0,h.dropPhotoCacheData)()},t.prototype.showResultPanel=function(e){var t;if(this.description){var o=this.getResultText(e);this.resultPanel||this.createResultPanel();var r=null===(t=this.resultPanel)||void 0===t?void 0:t.querySelector(".PhotoRecognizeBlockItem__resultMessage");if(!r||!this.resultPanel)throw new Error("PhotoRecognizeBlockItem: can not get text element");this.resultPanel.classList.toggle("PhotoRecognizeBlockItem__resultPanel--confirmed",e===i.CONFIRMED),r.innerHTML=o,(0,_.hide)(this.description),(0,_.show)(this.resultPanel)}},t.prototype.showSuggestPanel=function(){(0,_.hide)(this.resultPanel),(0,_.show)(this.description)},t.prototype.getResultText=function(e){var t=this.getOwnerId(),o=this.getConfirmedTags(),r=this.getTags()[0],s=r.getUserId(),a=r.getOwnerNameGenitive(),_=r.getUserNameAccusative(),c="";switch(e){case i.CONFIRMED:this.type===n.RecognizeItemType.ME?c=t===s?(0,p.getLang)("photo_recognition_confirm_me_on_my_photo"):(c=t>0?(0,p.getLang)("photo_recognition_confirm_myself_on_photo"):(0,p.getLang)("photo_recognition_confirm_myself_on_photo_group")).replace("{name}",a):this.type===n.RecognizeItemType.FRIEND?c=t===s?(0,p.getLang)("photo_recognition_confirm_on_photo").replace("{name}",a):(c=(c=t>0?(0,p.getLang)("photo_recognition_confirm_friend_on_photo"):(0,p.getLang)("photo_recognition_confirm_friend_on_photo_group")).replace("{name1}",_)).replace("{name2}",a):this.type===n.RecognizeItemType.ALL&&(c=(0,p.getLang)("photo_recognition_confirm_n_friends_on_photo",o.length));break;case i.DECLINED:c=this.type===n.RecognizeItemType.ALL?o.length?(0,p.getLang)("photo_recognition_confirm_n_friends_on_photo",o.length):(0,p.getLang)("photo_recognition_decline_n_friends_on_photo",o.length):(c=t>0?(0,p.getLang)("photo_recognition_decline_on_photo"):(0,p.getLang)("photo_recognition_decline_on_photo_group")).replace("{name}",a);break;default:c=(0,p.getLang)("photo_recognition_deleted_tag")}return c},t.prototype.createResultPanel=function(){this.resultPanel=document.createElement("div"),this.resultPanel.classList.add("PhotoRecognizeBlockItem__resultPanel");var e=document.createElement("span");e.classList.add("PhotoRecognizeBlockItem__resultMessage"),this.resultPanel.appendChild(e);var t=this.item.querySelector(".PhotoRecognizeBlockItem__footerWrapper");t&&t.appendChild(this.resultPanel)},t.prototype.setConfirmedTagsByIds=function(e){this.tagArea.setConfirmedTagsByIds(e)&&(this.showResultPanel(i.CONFIRMED),this.incrementConfirmedCount(e.length))},t.prototype.setDeclinedTagsByIds=function(e){this.tagArea.setDeclinedTagsByIds(e)&&this.showResultPanel(i.DECLINED)},t.prototype.setDeletedTagsByIds=function(e){this.tagArea.setDeclinedTagsByIds(e)&&this.showResultPanel(i.DELETED)},t.prototype.reset=function(){this.tagArea.reset()},t.prototype.getTitle=function(){return this.title},t.prototype.getTags=function(){return this.tagArea.getTags()},t.prototype.getConfirmedTags=function(){return this.tagArea.getConfirmedTags()},t.prototype.incrementConfirmedCount=function(e){void 0===e&&(e=1),this.block.incrementConfirmedCount(e)},t.prototype.init=function(){var t=this.item.getAttribute("data-photo-url");t&&(e.prototype.init.call(this),this.checkItemHasNoSizes()&&this.correctTagView(t))},t.prototype.checkItemHasNoSizes=function(){return this.item.classList.contains(u.PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS)},t.prototype.correctTagView=function(e){var t=this,o=new Image;o.onload=function(){var i=o.width,s=o.height;if(i&&s){var n=t.item.querySelector(".PhotoRecognizeBlockItem__photoFrame");if(!n)return;var a=(0,r.__read)(d.PhotoTagArea.calculateTagAreaSizes(n,i,s),2),_=a[0],c=a[1],l=t.item.querySelector("."+u.PHOTO_ELEMENT_CLASS);if(!l)return;var h=t.item.querySelector("."+u.PHOTO_NO_SIZE_ELEMENT_CLASS);h&&h.remove(),l.style.backgroundSize=_+"px "+c+"px",l.style.backgroundImage="url('"+e+"')";var p=_+1,f=c+1;t.tagArea.setSizes(p,f),t.tagArea.show(),t.item.classList.remove(u.PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS)}},o.src=e},t.prototype.sendAnalytic=function(e,t){void 0===t&&(t={}),(0,g.sendAnalytic)(e,this.trackCode,t)},t}(s.PhotoCarouselItem)},761635:(e,t,o)=>{o.d(t,{initPhotoBlockInPost:()=>a});var i=o(923374),r=o(275512),s=o(463343),n=o(66433);function a(e,t){var o=e.querySelector("."+r.PHOTO_CAROUSEL_CLASS);if(o)try{if(o.classList.contains("PhotoCarousel--recognize"))return new s.PhotoRecognizeBlock(e);var a={sendAnalytic:t};return new i.PhotoCarouselBlock(e,a)}catch(e){console.error(e),(0,n.logError)(e)}}},275512:(e,t,o)=>{o.d(t,{PHOTO_CAROUSEL_CLASS:()=>i,PHOTO_CAROUSEL_ITEM_CLASS:()=>r,PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS:()=>s,PHOTO_ELEMENT_CLASS:()=>n,PHOTO_NO_SIZE_ELEMENT_CLASS:()=>a,PHOTO_CAROUSEL_AVATAR_CLASS:()=>_,PHOTO_CAROUSEL_HIDE_BTN_CLASS:()=>c,NUMBER_INITIALIZED_PHOTO:()=>l});var i="PhotoCarousel",r="PhotoCarouselItem",s="PhotoCarouselItem--noSize",n="PhotoCarouselImage",a="PhotoCarouselItem__stub",_="PhotoCarouselBlockItem__avatar",c="PhotoCarousel__hidePost",l=4},13353:(e,t,o)=>{o.d(t,{sendAnalytic:()=>s});var i=o(570655),r=o(479957);function s(e,t,o){void 0===t&&(t=""),void 0===o&&(o={});var s=(0,i.__assign)({event_type:e,track_code:t},o);(0,r.statlogsValueEvent)("photo_recognition_stat",s)}},491838:(e,t,o)=>{var i;o.d(t,{RecognizeItemType:()=>i}),function(e){e[e.ME=1]="ME",e[e.FRIEND=2]="FRIEND",e[e.ALL=3]="ALL"}(i||(i={}))},41189:(e,t,o)=>{var i;o.d(t,{BlockTypeIds:()=>i}),function(e){e.YoulaRecommendationsCarousel="block_youla-recommendations-carousel",e.AliExpressRecommendationsCarousel="block_aliexpress-recommendations-carousel",e.PhotoRecognize="tags_suggestions",e.RecommendedNarratives="recommended_narratives",e.VideosForYou="videos_for_you",e.VideoPostcard="video_postcard"}(i||(i={}))},377782:(e,t,o)=>{o.d(t,{feedLogFilteredRow:()=>s});var i=o(171516),r=o(347675);function s(e){var t,o,s=e.filterReason,n=e.ref,a=e.row,_=e.rowsContainer,c=e.section,l={contentId:null===(t=a.firstElementChild)||void 0===t?void 0:t.id,feedRowsCount:_.childElementCount,filterReason:s,ref:n,rowFlags:(0,r.formatStringValueBooleans)([Boolean(null===(o=a.firstElementChild)||void 0===o?void 0:o.id),Boolean(a.firstElementChild)]),section:c};(0,i.saveStatlogEvents)({name:"feed_pagination_item_filtered",value:l})}},909456:(e,t,o)=>{o.d(t,{shouldFilterPaginatedRow:()=>n});var i=/^post(-?\d+_\d+)$/,r={shouldFilter:!1},s={shouldFilter:!0,filterReason:"empty"};function n(e){var t=e.row.firstElementChild;return t?function(e){var t=function(e){return!!e.id&&i.test(e.id)}(e),o=function(e){return!!e.id&&e.id.startsWith("feedback_row")}(e);if(!t&&!o)return r;if(!e.id||null===document.querySelector("#"+e.id))return r;return{shouldFilter:!0,filterReason:a({isNotification:o,isPost:t})}}(t):s}function a(e){return e.isNotification?"duplicate_notification":e.isPost?"duplicate_post":"duplicate_unknown"}},905998:(e,t,o)=>{o.d(t,{postsGetRaws:()=>n,isAutoplayAd:()=>a,isAdWithLongImpression:()=>_,isAdWithLongImpressionOnly:()=>c,isAdWithShowOff:()=>l,isElemViewable:()=>u});var i=o(72958),r=o(315544),s=o(695724),n=function(e){var t,o;if(!(e instanceof HTMLElement))return{};var i=(0,s.indexOf)((0,r.domPN)(e).children,e),n=e.firstElementChild;if(!(n instanceof HTMLElement))return{};for(;n&&n.id.startsWith("moat");)n=(0,r.domNS)(n);if(!(n instanceof HTMLElement))return{};var a,_,c,l=/^post(-?\d+_\d+)$/,d={};if("ads_feed_placeholder"===n.id)return d;var u=window.cur;d={module:u.module,index:i},"feed"==u.module&&("search"==u.section?(d.module="feed_search",d.q=u.q):"news"==u.section?d.module=u.subsection?"feed_news_"+u.subsection:"feed_news":"recommended"==u.section?d.module=u.subsection?"feed_recommended_"+u.subsection:"feed_recommended":"friends"==u.section?d.module=u.subsection?"feed_friends_"+u.subsection:"feed_friends":"groups"==u.section?d.module=u.subsection?"feed_groups_"+u.subsection:"feed_groups":"videos"==u.section?d.module=u.subsection?"feed_videos_"+u.subsection:"feed_videos":"photos"==u.section?d.module=u.subsection?"feed_photos_"+u.subsection:"feed_photos":"podcasts"==u.section?d.module=u.subsection?"feed_podcasts_"+u.subsection:"feed_podcasts":"list"==u.section?d.module=u.subsection?"feed_list_"+u.subsection:"feed_list":d.module="feed_other");var h=n.getAttribute("data-ad-view");h&&(d["ad_"+h]=1);var p=n.getAttribute("post_view_hash");if(p&&(d.hash=p),"block_"===n.id.substr(0,6)){d[n.id]=1,d.block=n.id.substr(6);var f=(0,r.attr)(n,"data-contain");f&&f.split(",").forEach((function(e){var t=e.split(":");d[t[0]]=(0,s.intval)(t[1])||1}))}else if(_=n.id.match(l))d[_[1]]=1;else if(_=n.id.match(/^post(adsite.*)$/))d[_[1]]=1;else if(_=(a=n.className).match(/feed_reposts_wrap(-?\d+_\d+)/)){if(c=(0,r.domFC)(n),(0,r.hasClass)((0,r.domFC)(c),"post_copy")&&(d[_[1]]=-1),(_=(0,r.domFC)(c).id.match(l))&&(d[_[1]]=1),(0,r.isVisible)(c=(0,r.domNS)(c)))for(c=(0,r.domFC)(c);c;c=(0,r.domNS)(c))(_=c.id.match(l))&&(d[_[1]]=1)}else if(_=a.match(/feed_repost(-?\d+_\d+)/)){if(!(c=(0,r.domFC)(n)))return d;(0,r.hasClass)(c,"post_copy")&&(d[_[1]]=-1),(_=c.id.match(l))&&(d[_[1]]=1)}else{var g=n.id;if((0,r.hasClass)(n,"post_photos")){var m=null===(o=null===(t=null==(c=(0,r.geByClass1)("post_image",n,"a"))?void 0:c.querySelector)||void 0===t?void 0:t.call(c,"[data-post-id]"))||void 0===o?void 0:o.getAttribute("data-post-id");m&&(_=m.match(/^(-?\d+_p?\d+)$/))&&(g=_[1])}d[g]=1}return d},a=function(e){var t=e&&(0,r.domFC)(e);return t&&t.hasAttribute("data-ad-video-autoplay")},_=function(e){var t=e&&(0,r.domFC)(e);return t&&(t.hasAttribute("data-ad-stat-impression_long")||t.hasAttribute("data-ad-disabled-stat-impression_long"))},c=function(e){var t=e&&(0,r.domFC)(e);return t&&t.hasAttribute("data-ad-views-long-only")},l=function(e){var t=e&&(0,r.domFC)(e);return t&&t.hasAttribute("data-ad-stat-show_off")},d=(0,i.memoizeFirstTruthy)((function(){return(0,r.ge)("page_header").offsetHeight})),u=function(e,t,o,i){var r=d(),s=o+r,n=o+i,a=e.offsetHeight,_=e.offsetTop+r,c=_+a;return(c>s&&_<n?(Math.min(n,c)-Math.max(s,_))/a:0)>=t}},347675:(e,t,o)=>{function i(e){return e.map((function(e){return e?"1":"0"})).join("_")}o.d(t,{formatStringValueBooleans:()=>i})},610124:(e,t,o)=>{o.d(t,{createMutations:()=>n,createModule:()=>c,destroyModule:()=>l});var i=o(570655),r=o(667784),s=o(49535);function n(e){return{callMutations:function(){if("function"==typeof e)throw console.trace(),new Error("Mutations are not initialized");return e},bindMutations:function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if("function"!=typeof e)throw console.trace(),new Error("Mutations are already initialized");return e=e.apply(void 0,(0,i.__spreadArray)([],(0,i.__read)(t)))}}}function a(e,t,o,i){(0,s.addEvent)(t,o,i),e._registeredHandlers.push({handlerType:"bind",elem:t,types:o,handler:i})}function _(e,t,o,i,s,n){(0,r.addDelegateEvent)(t,o,i,s,n),e._registeredHandlers.push({handlerType:"delegate",elem:t,types:o,selector:i,handler:s})}function c(e){var t={_registeredHandlers:[]};return e.handlers((function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return a.apply(void 0,(0,i.__spreadArray)([t],(0,i.__read)(e)))}),(function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return _.apply(void 0,(0,i.__spreadArray)([t],(0,i.__read)(e)))})),t}function l(e){e._registeredHandlers.forEach((function(e){var t=e.handlerType,o=e.elem,i=e.types,n=e.handler;"delegate"===t?(0,r.removeDelegateEvent)(o,i,e.selector,n):(0,s.removeEvent)(o,i,n)})),e._registeredHandlers=[]}},704615:(e,t,o)=>{o.d(t,{MARKET_WEB_API_VERSION:()=>i,MARKET_PROMOCODE_WEB_API_VERSION:()=>r});var i="5.158",r="5.170"},16850:(e,t,o)=>{function i(e){var t,o;if(null!==(o=t=e)&&"object"==typeof o&&("queue"in t||"key"in t&&"string"==typeof t.key))return e.queue||e.key}o.d(t,{subscriptionObjectStableId:()=>i})},901677:(e,t,o)=>{o.d(t,{friendsRecommInit:()=>m,onViewFriendRecomm:()=>v,friendsRecommLogSave:()=>w,friendsRecommLogGet:()=>b,friendsRecommLogClear:()=>P,friendsRecommLogCheckVisited:()=>C,friendsRecommLogSend:()=>y,friendsRecommLogOnFail:()=>O,FriendsRecommendGlobals:()=>M});var i=o(315544),r=o(49535),s=o(654612),n=o(386409),a=o(26330),_=o(695724),c=o(47612),l=o(293680),d=o(786067),u=o(486125),h=o(974186),p=o(635093),f=o(124041),g=function(){var e;return"feed"===window.cur.module&&window.Feed?null===(e=window.Feed)||void 0===e?void 0:e.getModuleRef():window.cur.module};function m(e,t){if(void 0===t&&(t={}),e){var o=(0,i.domData)(e,"from")||"user_rec",r=(0,i.domData)(e,"code"),s={scrollY:!1,onViewItem:function(e,i){var r;(null===(r=null==t?void 0:t.checkViewItem)||void 0===r?void 0:r.call(t,e))||v(e,i,o)}};(0,i.domData)(e,"next")&&(s.onLoadMore=function(){l.ajax.post("al_friends.php",{act:"a_recomm_friends_gallery",next:(0,i.domData)(e,"next"),track_code:r,friend_id:t.friendId||0,ref:g()},{onDone:function(t,o){var r,s=[];t&&(s=(0,i.domChildren)((0,i.ce)("div",{innerHTML:t}))),null===(r=(0,c.uiGetGallery)(e))||void 0===r||r.addMore(s,!o),(0,i.domData)(e,"next",o||null)}})}),new c.UIGallery(e,s)}}function v(e,t,o){if(!e.viewed&&(0,i.hasClass)(e,"ui_gallery_item")){var r=+(0,i.domData)(e,"uid"),s=g(),n=E(e);w(["show_user_rec",r,Date.now(),t,s,o,n]),e.viewed=!0}}function E(e){var t,o=(0,i.domData)(e,"code");return o||(t=(0,i.gpeByClass)("ui_gallery",e),o=(0,i.domData)(t,"code")),o||""}function w(e,t){void 0===t&&(t=!1);var o=b();o.push(e),a.default.set("friends_recomm",o),y(t)}function b(e,t,o){void 0===e&&(e=!1),void 0===o&&(o=!1);var i=a.default.get("friends_recomm"),r=Array.isArray(i)?i:[];return t&&(r=r.filter((function(e){return(o?e[1]!==t:e[1]===t)&&(0,_.inArray)(e[0],["show_user_rec","open_user"])}))),e&&(r=r.map((function(e){return e.join("|")}))),r}function P(e){if(e){var t=b(!1,e,!0);t.length?a.default.set("friends_recomm",t):a.default.remove("friends_recomm")}else a.default.remove("friends_recomm");!function(e){if(e){var t=a.default.get("friends_recomm_visited")||{};delete t[e],a.default.set("friends_recomm_visited",t)}else a.default.remove("friends_recomm_visited")}(e)}function C(e){return(a.default.get("friends_recomm_visited")||{})[e]}function y(e){var t,o;void 0===e&&(e=!1),!(null===(t=window.cur)||void 0===t?void 0:t.friendsRecommLogIdle)&&(null===(o=null===window||void 0===window?void 0:window.curNotifier)||void 0===o?void 0:o.idle_manager)&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=function(){clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(y)),clearTimeout(window.cur.friendsRecommLog),e?T():window.cur.friendsRecommLog=window.setTimeout(T,1e4)}function T(){if(!window.cur.friendsRecommProcess){var e=b(!0);e.length&&(window.cur.friendsRecommProcess=!0,P(),l.ajax.post("al_friends.php",{act:"a_recomm_logs",logs:e},{onDone:function(){delete window.cur.friendsRecommProcess},onFail:function(){return O(e),delete window.cur.friendsRecommProcess,!0}}))}}function O(e){var t=b();t=e.map((function(e){return e.split("|")})).concat(t),a.default.set("friends_recomm",t)}var M={toggleRecommFriend:function(e,t,o){var n=(0,i.gpeByClass)("friend_recomm_card",e),a=n&&+(0,i.domData)(n,"uid");if(a){var _={act:"add",mid:a,hash:o,from:"user_rec",ref:g(),track_code:E(n),ts:Date.now()},c=b(!0,a);return c.length&&(P(a),_.logs=c),l.ajax.post("al_friends.php",_,{onDone:function(t,o,s){if(f.FlatButton.setLabel(e,t),f.FlatButton.setAppearance(e,f.FlatButtonAppearance.SECONDARY),f.FlatButton.setDisabled(e,!0),f.FlatButton.setBefore(e,null),(0,i.addClass)(n,"friend_recomm_card_accepted"),(0,i.re)((0,i.geByClass1)("wall_card_text_special",n)),(0,h.isFriendAddResultRequestSent)(o)&&o.friend_request_add_sent_message_nudge){var a=t;(0,u.showDoneBoxFull)("",{},{tooltipHandler:(_=o.friend_request_entrypoint,function(e,t){var o=t.hide;(0,r.addEvent)(e.querySelector('[data-section-ref="friend_request_notification_send_message"]'),"click",(function(e){var t;if(e.currentTarget instanceof HTMLElement){var i=parseInt(null!==(t=e.currentTarget.getAttribute("data-message-user-id"))&&void 0!==t?t:"");if(!i||(0,r.checkEvent)(e))return!0;o(),(0,p.showWriteMessageBox)(e,i,{params:{box_custom_entrypoint:_}})}}))}),text:o.friend_request_add_sent_message_nudge,title:a})}else s&&(0,u.showDoneBox)(s);var _},onFail:function(e){if(c&&O(c),e)return(0,s.showFastBox)((0,d.getLang)("global_error"),e),!0},showProgress:function(){return f.FlatButton.lock(e)},hideProgress:function(){return f.FlatButton.unlock(e)}}),(0,r.cancelEvent)(t),!1}},hideRecommFriend:function(e,t,o){var a=(0,i.gpeByClass)("friend_recomm_card",e),_=a&&+(0,i.domData)(a,"uid");if(_){var u=(0,i.gpeByClass)("ui_gallery",e),h=g(),p=(0,i.domData)(a,"code")||(0,i.domData)(u,"code")||"";return l.ajax.post("al_friends.php",{act:"hide_possible",mid:_,ref:h,track_code:p,hash:o},{onDone:function(){var t=(0,c.uiGetGallery)((0,i.gpeByClass)("ui_gallery",e));if(t){var o=(0,i.gpeByClass)("ui_gallery_item",e);t.removeItem(o)}},onFail:function(e){if(e)return(0,s.showFastBox)((0,d.getLang)("global_error"),e),!0},showProgress:function(){return(0,n.lockButton)(e)},hideProgress:function(){return(0,n.unlockButton)(e)}}),(0,r.cancelEvent)(t),!1}},onClickRecommFriend:function(e){if((0,i.hasClass)(e,"ui_gallery_item")||(e=(0,i.gpeByClass)("ui_gallery_item",e)),e){var t=+(0,i.domData)(e,"uid"),o=g(),r=E(e);!function(e,t,o){var i=a.default.get("friends_recomm_visited")||{};i[e]={ref:t,trackCode:o},a.default.set("friends_recomm_visited",i)}(t,o,r),w(["open_user",t,Date.now(),o,r])}}}},974186:(e,t,o)=>{o.d(t,{isFriendAddResultRequestSent:()=>s});var i,r=o(40906);!function(e){e[e.DELETED_USER=-5]="DELETED_USER",e[e.BLACKLISTED=-4]="BLACKLISTED",e[e.FRIENDS_COUNT_EXCEEDED=-3]="FRIENDS_COUNT_EXCEEDED",e[e.FLOOD_CONTROL=-2]="FLOOD_CONTROL",e[e.SERVER_ERROR=-1]="SERVER_ERROR",e[e.NOT_FRIENDS=0]="NOT_FRIENDS",e[e.REQUEST_FROM_USER=1]="REQUEST_FROM_USER",e[e.REQUEST_TO_USER=2]="REQUEST_TO_USER",e[e.ARE_FRIENDS=3]="ARE_FRIENDS"}(i||(i={}));var s=function(e){if((0,r.isObject)(e)){var t=e;return(null==t?void 0:t.result_code)===i.REQUEST_FROM_USER}return!1}},173801:(e,t,o)=>{o.d(t,{feedInitialViewRecommendedGroupsTrigger:()=>r,blockInstanceSetForFeedRowContent:()=>s});var i=o(47612);function r(e){var t=e.querySelector(".js-feed_groups_recomm"),o=e.querySelector(".ui_gallery");if(t&&o){var r,s=o.getAttribute("data-code")||"",n=null!==(r=t.__RecommendedGroups)&&void 0!==r?r:void 0;if(n){n.viewBlock(s);var a=(0,i.uiGetGallery)(o);a&&a.getVisibleItems().forEach((function(e){n.onViewGroup(e[0])})),o.visible=!0}else console.error(new Error("RecommendedGroups: missing block instance"),t,o)}else console.error(new Error("RecommendedGroups: missing block container for view"),t,o)}function s(e,t){e.__RecommendedGroups=t}},310568:(e,t,o)=>{var i;o.d(t,{PhotoTag:()=>r}),function(e){e[e.Initial=0]="Initial",e[e.Confirmed=1]="Confirmed",e[e.Declined=2]="Declined"}(i||(i={}));var r=function(){function e(e,t){this.tagEl=e,this.tagArea=t;var o=e.getAttribute("data-item");if(!o)throw new Error("Tag: incorrect json data");var r=JSON.parse(o);this.id=Number(r.id),this.userId=r.userId,this.name=r.name,this.nameGenitive=r.nameGenitive,this.ownerNameGenitive=r.ownerNameGenitive,this.placerNameGenitive=r.placerNameGenitive,this.nameAccusative=r.nameAccusative,this.isSuggested=Boolean(r.isSuggested),this.sex=Number(r.sex),this.styles={top:r.top,left:r.left,width:r.width,height:r.height};var s=i.Initial;e.classList.contains("PhotoTag--confirm")?s=i.Confirmed:e.classList.contains("PhotoTag--decline")&&(s=i.Declined),this.state=s;var n="tag_cutout"+t.getPhotoRawId()+"_"+r.userId,a=document.getElementById(n);if(!a)throw new Error("Tag: incorrect data");this.cutoutEl=a}return e.prototype.decline=function(){this.tagEl.classList.remove("PhotoTag--confirm"),this.tagEl.classList.add("PhotoTag--decline"),this.cutoutEl.classList.remove("PhotoTagCutout--transparency"),this.state=i.Declined},e.prototype.confirm=function(){this.tagEl.classList.remove("PhotoTag--decline"),this.tagEl.classList.add("PhotoTag--confirm"),this.cutoutEl.classList.add("PhotoTagCutout--transparency"),this.state=i.Confirmed},e.prototype.reset=function(){this.tagEl.classList.remove("PhotoTag--decline"),this.tagEl.classList.remove("PhotoTag--confirm"),this.cutoutEl.classList.remove("PhotoTagCutout--transparency"),this.state=i.Initial},e.prototype.getFullRawId=function(){return this.tagArea.getPhotoRawId()+"_"+this.getId()},e.prototype.getId=function(){return this.id},e.prototype.getUserId=function(){return this.userId},e.prototype.getUserName=function(){return this.name},e.prototype.getUserNameGenitive=function(){return this.nameGenitive},e.prototype.getUserNameAccusative=function(){return this.nameAccusative},e.prototype.getOwnerNameGenitive=function(){return this.ownerNameGenitive},e.prototype.getPlacerNameGenitive=function(){return this.placerNameGenitive},e.prototype.isConfirmed=function(){return this.state===i.Confirmed},e.prototype.getSex=function(){return this.sex},e}()},959115:(e,t,o)=>{o.d(t,{PhotoTagArea:()=>l});var i=o(310568),r=o(386409),s=o(19331),n=o(486125),a=o(786067),_=o(654612),c=o(365931),l=function(){function e(e,t,o){var _=this;this.confirmTag=function(e,t,o){o&&(0,r.lockButton)(o);var i=!(0,s.partConfigEnabled)("recognize_mock_turn_off");return new Promise((function(s,c){window.ajax.post("al_photos.php",{act:"confirm_tag",photo:t.getPhotoRawId(),tag:e.getId(),hash:_.tagHash},{onDone:function(){_.setConfirmedTags([e]),_.decrementLeftMenuCounterIfNeeded([e]),s()},onFail:function(){return i?(_.setConfirmedTags([e]),s(),!0):((0,n.showDoneBox)((0,a.getLang)("global_unknown_error")),c(),!0)},hideProgress:function(){o&&(0,r.unlockButton)(o)}})}))},this.declineTag=function(e,t,o){return new Promise((function(i,c){o&&(0,r.lockButton)(o);var l=!(0,s.partConfigEnabled)("recognize_mock_turn_off");window.ajax.post("al_photos.php",{act:"delete_tag",photo:t.getPhotoRawId(),tag:e.getId(),hash:_.tagHash},{onDone:function(){_.setDeclinedTags([e]),_.decrementLeftMenuCounterIfNeeded([e]),i()},onFail:function(){return l?(_.setDeclinedTags([e]),i(),!0):((0,n.showDoneBox)((0,a.getLang)("global_unknown_error")),c(),!0)},hideProgress:function(){o&&(0,r.unlockButton)(o)}})}))},this.confirmSuggestedTags=function(e,t,o){return _.showConfirmAlertBoxIfNeeded(e).then((function(){o&&(0,r.lockButton)(o);var t=!(0,s.partConfigEnabled)("recognize_mock_turn_off");return new Promise((function(i,s){window.ajax.post("al_photos.php",{act:"confirm_suggested_tags",tag_raw_ids:_.getFullRawTagIdsStr(e),track_code:_.trackCode,hash:_.tagHash},{onDone:function(){_.setConfirmedTags(e),_.decrementLeftMenuCounterIfNeeded(e),i()},onFail:function(){return t?(_.setConfirmedTags(e),i(),!0):((0,n.showDoneBox)((0,a.getLang)("global_unknown_error")),s(),!0)},hideProgress:function(){o&&(0,r.unlockButton)(o)}})}))}))},this.declineSuggestedTags=function(e,t,o){return new Promise((function(t,i){o&&(0,r.lockButton)(o);var c=!(0,s.partConfigEnabled)("recognize_mock_turn_off");window.ajax.post("al_photos.php",{act:"decline_suggested_tags",tag_raw_ids:_.getFullRawTagIdsStr(e),track_code:_.trackCode,hash:_.tagHash},{onDone:function(){_.setDeclinedTags(e),_.decrementLeftMenuCounterIfNeeded(e),t()},onFail:function(){return c?(_.setDeclinedTags(e),t(),!0):((0,n.showDoneBox)((0,a.getLang)("global_unknown_error")),i(),!0)},hideProgress:function(){o&&(0,r.unlockButton)(o)}})}))};var c=e.getEl().querySelector(".PhotoTagArea");if(!c)throw new Error("error: there is not tag area el");if(!t)throw new Error("error: there is not tag hash");var l=Array.from(e.getEl().querySelectorAll(".PhotoTag"));this.trackCode=o,this.tagArea=c,this.tagHash=t,this.photoEntity=e,this.tags=l.map((function(e){return new i.PhotoTag(e,_)})),this.tagsMap=this.tags.reduce((function(e,t){return e[t.getId()]=t,e}),{})}return e.prototype.showConfirmAlertBoxIfNeeded=function(e){var t=this,o=e[0];return new Promise((function(e,i){if(window.cur.pvNeedShowAlertForOneSuggest&&o.getUserId()!==window.vk.id)var r=(0,a.getLang)("photo_recognition_one_tag_alert"),s=(0,a.langSex)(o.getSex(),(0,a.getLang)("photo_recognition_one_tag_alert_text","raw")).replace("{name}",o.getUserName()),n=(0,_.showFastBox)(r,s,(0,a.getLang)("photo_recognition_one_friend_submit_btn"),(function(){t.hideHint(),n.hide(),e()}),(0,a.getLang)("global_cancel"),(function(){n.hide(),i()}));else e()}))},e.prototype.hideHint=function(){window.cur.pvNeedShowAlertForOneSuggest=!1;var e=window.cur.pvOneSuggestHintId,t=window.cur.pvOneSuggestHintHash;e&&t&&window.ajax.post("al_index.php",{act:"help_hints_hide",hint_id:e,hash:t},{onDone:function(){},onFail:function(){return console.error("something wrong with help hint"),!0}})},e.prototype.decrementLeftMenuCounterIfNeeded=function(e){e.forEach((function(e){e.getUserId()===window.vk.id&&(0,c.decrementLeftMenuPhotoCounter)()}))},e.prototype.getFullRawTagIdsStr=function(e){return void 0===e&&(e=this.tags),e.reduce((function(e,t,o){return e+(0===o?"":",")+t.getFullRawId()}),"")},e.prototype.setConfirmedTagsByIds=function(e){var t=this,o=e.reduce((function(e,o){return t.tagsMap[o]&&e.push(t.tagsMap[o]),e}),[]);return!!o.length&&(this.setConfirmedTags(o),!0)},e.prototype.setConfirmedTags=function(e){var t=this;(e=e.filter((function(e){return t.tagsMap[e.getId()]}))).length&&(e.forEach((function(e){return e.confirm()})),this.tagArea.classList.add("PhotoTagArea--fade"))},e.prototype.setDeclinedTags=function(e){e.forEach((function(e){return e.decline()}))},e.prototype.setDeclinedTagsByIds=function(e){var t=this,o=e.reduce((function(e,o){return t.tagsMap[o]&&e.push(t.tagsMap[o]),e}),[]);return!!o.length&&(this.setDeclinedTags(o),!0)},e.prototype.reset=function(){this.tagArea.classList.remove("PhotoTagArea--fade"),this.tags.forEach((function(e){return e.reset()}))},e.prototype.getPhotoRawId=function(){return this.photoEntity.getPhotoRawId()},e.prototype.getTags=function(){return this.tags},e.prototype.getConfirmedTags=function(){return this.tags.filter((function(e){return e.isConfirmed()}))},e.prototype.setSizes=function(e,t){this.tagArea.style.width=e+"px",this.tagArea.style.height=t+"px"},e.prototype.show=function(){this.tagArea.classList.remove("PhotoTagArea--hide")},e.calculateTagAreaSizes=function(e,t,o){var i,r,s=e.offsetWidth,n=e.offsetHeight,a=t/o,_=!0;return s/n>a&&(_=!1),_?(i=Math.round(Math.min(t,s)),r=Math.round(i/a)):(r=Math.round(Math.min(o,n)),i=Math.round(r*a)),[i,r]},e}()},365931:(e,t,o)=>{o.d(t,{decrementLeftMenuPhotoCounter:()=>a});var i=o(695724),r=o(66433),s=o(447215),n="ph";function a(e){void 0===e&&(e=1);try{var t=function(){var e=document.getElementById("l_ph");if(!e)throw new Error("There is not photo left menu item");var t=e.querySelector(".left_count");return t?(0,i.intval)(t.textContent):0}();(0,s.handlePageCount)(n,Math.max(t-e,0))}catch(e){console.error(e),(0,r.logError)(e)}}},123251:(e,t,o)=>{var i;o.d(t,{TagEventTypes:()=>i}),function(e){e.CONFIRM_SUGGESTED_TAGS="CONFIRM_SUGGESTED_TAGS",e.DECLINE_SUGGESTED_TAGS="DECLINE_SUGGESTED_TAGS",e.DECLINE_USER_TAG="DECLINE_USER_TAG",e.CONFIRM_USER_TAG="CONFIRM_USER_TAG",e.DELETE_TAG="DELETE_TAG"}(i||(i={}))},485207:(e,t,o)=>{o.d(t,{isDebugEnabled:()=>i.isDebugEnabled,ENABLED_IN_POST_REPLY:()=>r});var i=o(464746),r=!1},582982:(e,t,o)=>{o.d(t,{reactionLogError:()=>s});var i=o(82701),r=o(385667),s=function(e){var t,o=e.error,s=(0,r.getReactionConfig)(),n=null!==(t=null==s?void 0:s.reportJsErrors)&&void 0!==t&&t;(0,i.reactionLogError)({error:o,reportError:n})}},385667:(e,t,o)=>{o.d(t,{storageAddSets:()=>u,getReactionSet:()=>h,storageSetConfig:()=>p,getReactionConfig:()=>f});var i=o(570655),r=o(449849),s=o(517760),n=o(469687),a=o(582982),_=o(95146),c=o(485207),l=(0,n.makeSharedState)("reactions-storage",(function(){return new Map})),d=(0,n.makeSharedState)("reactions-config",(function(){return{config:void 0}})),u=function(e){(0,c.isDebugEnabled)()&&console.log(e),Object.entries(e).forEach((function(e){var t=(0,i.__read)(e,2),o=t[0],n=t[1],c=(0,s.validateReactionSetPayloaditems)(n,o);if(c)(0,a.reactionLogError)({error:c.error});else{var d=n.map((function(e){return(0,i.__assign)((0,i.__assign)({},e),{title:(0,r.decodeHTMLEntities)(e.title)})}));l().set(o,(0,s.prepareReactionMenuSet)(o,d,{imageMenuSize:_.SIZE_96,imagePreviewSize:_.SIZE_32,imageStoryPanelSize:_.SIZE_128,imageStoryPreviewSize:_.SIZE_40}))}}))},h=function(e){var t=l().get(e);if(t)return t;var o=new Error("Reaction set not found: "+e);(0,a.reactionLogError)({error:o})},p=function(e){(0,c.isDebugEnabled)()&&console.log(e);var t=(0,s.parseReactionMenuConfig)(e);t?d().config=t:console.warn("Reactions: invalid menu config passed",e)},f=function(){var e;return null===(e=d())||void 0===e?void 0:e.config}},507794:(e,t,o)=>{o.d(t,{getReactionsButtonPostTemplate:()=>d,getReactionsButtonReplyTemplate:()=>u,likeDataReactionsFields:()=>f});var i=o(19331),r=o(315544),s=o(95146),n=o(385667),a=o(517760),_=o(714396),c=function(e,t){var o,i=null===(o=function(e){try{var t=JSON.parse(e);if(null!==t&&"object"!=typeof t)return;return t}catch(e){return}}(e))||void 0===o?void 0:o.set_id,s="string"==typeof i?i:void 0;if(t&&s){var _=(0,n.getReactionSet)(s);if(_)return{likeClassName:"like_btn--hidden PostBottomAction--hidden",template:(0,r.rs)(t,{reactions_button_title:(0,a.getDefaultReactionTitle)(_)||"",reactions_set_id:s})}}},l=function(e,t){return t.length>e},d=function(e,t){var o,i=null===(o=null==t?void 0:t.wallTpl)||void 0===o?void 0:o.post_likes_reactions,r=l(14,e)?e[14]:void 0;if("string"==typeof r)return c(r,i)},u=function(e,t){var o,r=null===(o=null==t?void 0:t.wallTpl)||void 0===o?void 0:o.reply_likes_reactions;if((0,i.partConfigEnabled)("reactions_enabled_post_replies")){var s=l(14,e)?e[14]:void 0;if("string"==typeof s)return c(s,r)}},h=function(e){var t=JSON.parse(e);if(null===t||"object"==typeof t||Array.isArray(t)){var o;if(Array.isArray(t))t=(0,_.reactionCountsBrandWrap)((o=t,Object.assign({},o)));return t}},p=function(e){var t=l(5,e)?e[5]:void 0;if("string"==typeof t){var o=function(e){var t=e.indexOf(";"),o=e.substr(0,t),i=e.substr(t+1);if("1"===o)return h(i)}(t);if(o)return{counts:o}}},f=function(e){var t,o=p(e);return(t={})[s.REACTIONS_COUNTS_RESPONSE_FIELD]=null==o?void 0:o.counts,t}},348230:(e,t,o)=>{o.d(t,{getBoxLayerWrap:()=>d,showLoader:()=>u,hideLoader:()=>h,getPurchaseResult:()=>p,updateStickersFromQueue:()=>f});var i=o(786067),r=o(41650),s=o(511417),n=o(315544),a=o(486125),_=o(749091),c=r.default.getLang;function l(){return document.querySelector("#box_loader")}function d(){return document.querySelector("#box_layer_wrap")}function u(){var e=l();(0,a.boxRefreshCoords)(e),(0,n.show)(e),(0,n.show)(d())}function h(){(0,n.hide)(l())}function p(e){var t=new _.ProductsByType(e.items.filter((function(e){return!e.error})).map((function(e){return e.product}))),o=t.getPack(),r=t.getStyles();if(o)return r.length?(0,i.langStr)(c("purchases_stickers_purchase_result_pack_and_styles",r.length),"pack_title",o.title,"n",r.length):(0,i.langStr)(c("purchases_stickers_purchase_result_pack"),"title",o.title);if(r.length)switch(r.length){case 1:return(0,i.langStr)(c("purchases_stickers_purchase_result_1_style"),"title",r[0].title);case 2:return(0,i.langStr)(c("purchases_stickers_purchase_result_2_styles"),"title1",r[0].title,"title2",r[1].title);case 3:return(0,i.langStr)(c("purchases_stickers_purchase_result_3_styles"),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title);case 4:return(0,i.langStr)(c("purchases_stickers_purchase_result_3_styles_and_1_more"),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title);default:var s=r.length-3;return(0,i.langStr)(c("purchases_stickers_purchase_result_3_styles_and_n_more",s),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title,"n",s)}return null}function f(e){var t,o;t=e,o=s.colorScheme.isDarkScheme()?"data-src-dark":"data-src-light",t.querySelectorAll(".sticker_img["+o+"]").forEach((function(e){var t=e.getAttribute(o);t&&(e.src=t)}))}},329979:(e,t,o)=>{o.d(t,{highlightUpdatedPost:()=>r,highlightUpdatedPostContent:()=>s});var i=o(830104),r=function(e){(0,i.triggerAnimationClass)(e,"post_highlight_updated",3e3)},s=function(e){(0,i.triggerAnimationClass)(e,"post_highlight_updated_content",3e3)}},175382:(e,t,o)=>{o.d(t,{floatingButtonCollapseAllRepliesHide:()=>s,floatingButtonCollapseAllRepliesShow:()=>n,loadRepliesLinkShow:()=>a,loadRepliesLinkIsVisible:()=>_,highlightUpdatedReply:()=>c,highlightUpdatedReplyContent:()=>l});var i=o(830104),r=o(315544),s=function(e){e instanceof HTMLElement&&e.classList.contains("replies_side")&&e.classList.add("replies_side_hidden")},n=function(e){e instanceof HTMLElement&&e.classList.contains("replies_side")&&e.classList.remove("replies_side_hidden")},a=function(e){e instanceof HTMLElement&&e.classList.contains("replies_next")&&e.classList.add("replies_next_shown")},_=function(e){return!!(e instanceof HTMLElement&&e.classList.contains("replies_next"))&&(e.classList.contains("replies_next_shown")||(0,r.isVisible)(e))},c=function(e){(0,i.triggerAnimationClass)(e,"reply_highlight_updated",3e3)},l=function(e){(0,i.triggerAnimationClass)(e,"reply_highlight_updated_content",3e3)}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.loaded=!0,o.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,o,i)=>{if(!t){var r=1/0;for(_=0;_<deferred.length;_++){for(var[t,o,i]=deferred[_],s=!0,n=0;n<t.length;n++)(!1&i||r>=i)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[n])))?t.splice(n--,1):(s=!1,i<r&&(r=i));if(s){deferred.splice(_--,1);var a=o();void 0!==a&&(e=a)}}return e}i=i||0;for(var _=deferred.length;_>0&&deferred[_-1][2]>i;_--)deferred[_]=deferred[_-1];deferred[_]=[t,o,i]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var i={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var r=2&t&&e;"object"==typeof r&&!~leafPrototypes.indexOf(r);r=getProto(r))Object.getOwnPropertyNames(r).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,__webpack_require__.d(o,i),o},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.e=()=>Promise.resolve(),__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={12495:0};__webpack_require__.O.j=t=>0===e[t];var t=(t,o)=>{var i,r,[s,n,a]=o,_=0;for(i in n)__webpack_require__.o(n,i)&&(__webpack_require__.m[i]=n[i]);if(a)var c=a(__webpack_require__);for(t&&t(o);_<s.length;_++)r=s[_],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[s[_]]=0;return __webpack_require__.O(c)},o=self.webpackChunkvk=self.webpackChunkvk||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var __webpack_exports__=__webpack_require__.O(void 0,[11216,24509,68592,17592],(()=>__webpack_require__(272972)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();